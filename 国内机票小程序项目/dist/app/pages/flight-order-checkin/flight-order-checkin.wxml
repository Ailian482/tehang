<view class="h-full f-s-14 text-grey1 d-flex flex-direction-column">
    <view class="flex-1 h-1 text-grey1 bg-grey9 overflow-auto">
        <view class="bg-white m-b-8">
            <view wx:for="{{routes}}" wx:for-item="route" wx:key="index" wx:for-index="routeIndex" data-index="{{routeIndex}}" bindtap="handleSelect">
                <block wx:for="{{route.segments}}" wx:for-item="seg" wx:key="index">
                    <view wx:if="{{!route.canCheckIn}}" class="f-s-12 bg-orange3 text-orange1 p-y-6 p-x-16 d-flex align-items-center">
                        <image src="{{tipIcon}}" class="w-12 h-12 m-r-4" />
                        <view>{{route.cannotCheckInReason}}</view>
                    </view>
                    <view class="p-l-16 p-y-14 p-r-24">
                        <view class="d-inline-flex bg-grey12 f-s-12 r-full align-items-center p-r-20">
                            <view wx:if="{{routeIndex===0}}" class="bg-linear-primary r-full p-y-2 p-x-8 f-s-11 text-white m-r-10">
                                {{!isRoundTrip?'单程':'去程'}}
                            </view>
                            <view wx:else class="bg-linear-green r-full p-y-2 p-x-8 f-s-11 text-white m-r-10">
                                返程
                            </view>
                            <view class="d-flex align-items-center">
                                <airline-thumbnail class="w-12 h-12 d-flex m-r-4" airlineCode="{{seg.airline}}" />
                                <view>{{seg.airlineName}} {{seg.flightNo}}  {{seg.planeType}}</view>
                                <view class="m-x-4">
                                    <date-format value="{{seg.departureDateTime}}" />
                                </view>
                                <view>
                                    <date-format value="{{seg.departureDateTime}}" format="E" />
                                </view>
                            </view>
                        </view>
                        <view class="m-t-12 d-flex">
                            <view class="m-l-48">
                                <view class="d-flex align-items-center">
                                    <view>
                                        <view class="f-s-24 f-w-bold">
                                            <date-format value="{{seg.departureDateTime}}" format="HH:mm" />
                                        </view>
                                        <view class="f-s-12">{{seg.departureAirportName}}</view>
                                    </view>
                                    <view class="m-r-26 m-l-30">
                                        <image class="w-50 h-5" src="{{flightRouteArrowSrc}}" lazy-load="true" />
                                    </view>
                                    <view>
                                        <view class="f-s-24 f-w-bold">
                                            <date-format value="{{seg.arrivalDateTime}}" format="HH:mm" />
                                        </view>
                                        <view class="f-s-12">{{seg.arrivalAirportName}}</view>
                                    </view>
                                </view>
                                <view class="f-s-12 m-t-8 d-flex align-items-center">
                                    <view>成人票</view>
                                    <view class="text-orange1 m-r-8">
                                        ￥{{seg.displayBunkPrice.bunkPrice}}
                                    </view>
                                    <!-- 税费 -->
                                    <!-- <text class="text-orange1">￥{{seg.bunkPrice.bunkPrice}}</text> -->
                                    <view>机建燃油</view>
                                    <view class="text-orange1">
                                        ￥{{seg.displayBunkPrice.airportFee+seg.displayBunkPrice.oilFee}}
                                    </view>
                                </view>
                            </view>
                        </view>
                    </view>
                </block>
            </view>
        </view>
        <block wx:if="{{orderCanCheckIn}}">
            <view class="bg-white p-l-16 p-y-16 p-r-24 m-b-8" wx:if="{{hasMultiPassenger}}">
                <view wx:for="{{ checkInTypeOptions }}" wx:key="index" class="d-flex p-y-8" bindtap="handleChangeCheckInType" data-index="{{index}}">
                    <view class="flex-1 f-w-bold">{{item.label}}</view>
                    <iconfont icon="radio-{{item.selected?'':'un'}}selected" class="text-primary f-s-16 m-r-20" />
                </view>
            </view>
            <view class="bg-white p-l-16 p-y-16 p-r-24 m-b-8">
                <view class="f-s-16 f-w-bold">请选择{{!isTogether?'乘机人':''}}偏好</view>
                <block wx:for="{{uncheckableTickets}}" wx:key="index" wx:for-item="ticket">
                    <view class="d-flex f-w-bold m-t-20">
                        <view>{{ticket.passengerName}}</view>
                        <block wx:for="{{ticket.netCheckInStatuses}}" wx:key="index" wx:for-item="status">
                            <dict-transform class="m-l-28" dict="FlightNetCheckInStatus" code="{{status}}"></dict-transform>
                        </block>
                    </view>
                </block>
                <block wx:for="{{requirements}}" wx:key="index" wx:for-item="requirement" wx:for-index="requirementIndex">
                    <view class="f-w-bold m-t-20 m-b-18">
                        <block wx:for="{{requirement.tickets}}" wx:key="index" wx:for-item="ticket">
                            <block wx:if="{{index>0}}">、</block>
                            {{ticket.passengerName}}
                        </block>
                    </view>
                    <view class="seat-wrapper">
                        <view wx:for="{{requirement.seatOptions}}" wx:key="index" bind:tap="handleToggleSeat" data-index="{{index}}" data-requirementindex="{{requirementIndex}}">
                            <view class="text-center p-y-6 r-16 {{item.selected?'bg-primary text-white':'bg-grey11 text-grey2'}}">
                                {{item.label}}
                            </view>
                        </view>
                    </view>
                </block>
            </view>
        </block>
    </view>
    <view class="z-index-1 p-y-16 p-x-10 box-shadow-footer" wx:if="{{orderCanCheckIn}}">
        <button bindtap="throttleSubmit" class="bg-btn-primary text-white f-w-bold f-s-16 r-full l-h-42">
            提交
        </button>
    </view>
</view>
<loading wx:if="{{isLoading}}" title="{{loadingTitle}}" />