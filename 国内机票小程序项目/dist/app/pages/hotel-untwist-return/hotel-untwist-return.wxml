<view class="tips">
    <iconfont icon="fill-exclamation" class="m-r-6"></iconfont>
    非整单退订可能会产生额外手续费
</view>
<view wx:if="{{orderDetail}}" class="container">
    <view>
        <view class="f-s-16 f-w-bold text-grey1">预订日期</view>
        <view class="d-flex f-s-12 m-t-14">
            <view class="flex-1 d-flex text-gery1">
                <view>
                    <date-format value="{{orderDetail.checkInDate}}" format="yyyy年 MM月dd日"></date-format>
                </view>
                <view class="total">共{{orderDetail.days}}晚</view>
                <view>
                    <date-format value="{{orderDetail.checkOutDate}}" format="yyyy年 MM月dd日"></date-format>
                </view>
            </view>
        </view>
    </view>
    <view class="room-list text-grey1">
        <view class="f-s-16 f-w-bold">请选择退订日期</view>
        <view class="room-item" wx:for="{{guests}}" wx:for-index="idx" wx:key="*this">
            <block wx:if="{{item.guestCanReturn}}">
                <view class="f-s-12">
                    {{item.guestName}}
                    <block wx:if="{{item.belongedDeptName}}">{{item.belongedDeptName}}</block>
                </view>
                <view class="date-list">
                    <block wx:for="{{item.dayInfos}}" wx:for-item="dateItem" wx:key="id">
                        <block wx:if="{{dateItem.canReturn}}">
                            <view class="date-item {{dateItem.selected ? 'selected' : ''}}" data-guest-index="{{idx}}" data-day-index="{{index}}" bindtap="handleSelectedRoomDay">
                                <date-format value="{{dateItem.begin}}" format="dd" />
                                -
                                <date-format value="{{dateItem.end}}" format="dd" />
                            </view>
                        </block>
                    </block>
                </view>
            </block>
        </view>
    </view>
    <view class="room-list text-grey1">
        <view class="f-s-16 f-w-bold">退订规则</view>
        <view class="f-s-12 m-t-14">{{orderDetail.hotel.roomInfo.rule}}</view>
    </view>
</view>
<!-- 底部 -->
<footer-container>
    <view class="submit-btn" slot="content" bindtap="handleApplyPartReturn">确认退订</view>
</footer-container>
<loading wx:if="{{isLoading}}" title="{{loadingTitle}}" />