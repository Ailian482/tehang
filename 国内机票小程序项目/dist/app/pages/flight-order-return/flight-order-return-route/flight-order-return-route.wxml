<view class="h-full  d-flex flex-direction-column">
    <view class="flex-1 h-1 text-grey1 bg-grey9 ">
        <view class="bg-white p-l-16 p-y-16 p-r-24 m-b-8">
            <view class="d-flex m-b-8 align-items-center">
                <view class="f-s-16 f-w-bold">退票行程</view>
                <view class="m-l-auto f-s-12 text-grey2 d-flex align-items-center" bindtap="throttleShowPolicyAndBaggage">
                    <view>查看退改签规则</view>
                    <iconfont class="text-grey3 f-s-10 m-l-6" icon="arrow-right"></iconfont>
                </view>
            </view>
            <view wx:for="{{routes}}" wx:for-item="route" wx:key="index" wx:for-index="routeIndex" data-index="{{routeIndex}}" bindtap="handleSelect">
                <view class="p-y-16" wx:for="{{route.segments}}" wx:for-item="seg" wx:key="index">
                    <view class="d-inline-flex bg-grey12 f-s-12 r-full align-items-center p-r-20">
                        <view wx:if="{{routeIndex===0}}" class="{{route.canBeReturned?'bg-linear-primary':'bg-grey6'}} r-full p-y-2 p-x-8 f-s-11 text-white m-r-10">
                            去程
                        </view>
                        <view wx:else class="{{route.canBeReturned?'bg-linear-green':'bg-grey6'}} r-full p-y-2 p-x-8 f-s-11 text-white m-r-10">
                            返程
                        </view>
                        <view class="d-flex align-items-center">
                            <airline-thumbnail class="w-12 h-12 d-flex m-r-4" airlineCode="{{seg.airline}}" />
                            <view>{{seg.airlineName}} {{seg.flightNo}}  {{seg.planeType}}</view>
                            <view class="m-x-4">
                                <date-format value="{{seg.departureDateTime}}" />
                            </view>
                            <view>
                                <date-format value="{{seg.departureDateTime}}" format="E" />
                            </view>
                        </view>
                    </view>
                    <view class="m-t-12 d-flex">
                        <view class="d-flex p-x-4 align-items-center">
                            <iconfont icon="radio-{{route.selected?'':'un'}}selected" class="{{route.canBeReturned?'text-primary':'text-grey6'}} f-s-16 m-r-20" />
                        </view>
                        <view class="{{route.canBeReturned?'':'text-grey2'}}">
                            <view class="d-flex align-items-center">
                                <view>
                                    <view class="f-s-24 f-w-bold">
                                        <date-format value="{{seg.departureDateTime}}" format="HH:mm" />
                                    </view>
                                    <view class="f-s-12">{{seg.departureAirportName}}</view>
                                </view>
                                <view class="m-r-26 m-l-30">
                                    <image class="w-50 h-5" src="{{route.canBeReturned?flightRouteArrowSrc:routeUnchangeableArrow}}" lazy-load="true" />
                                </view>
                                <view>
                                    <view class="f-s-24 f-w-bold">
                                        <date-format value="{{seg.arrivalDateTime}}" format="HH:mm" />
                                    </view>
                                    <view class="f-s-12">{{seg.arrivalAirportName}}</view>
                                </view>
                            </view>
                            <view class="f-s-12 m-t-8 d-flex align-items-center">
                                <view>成人票</view>
                                <view class="{{route.canBeReturned?'text-orange1':''}} m-r-8">
                                    ￥{{seg.displayBunkPrice.bunkPrice}}
                                </view>
                                <!-- 税费 -->
                                <!-- <text class="text-orange1">￥{{seg.bunkPrice.bunkPrice}}</text> -->
                                <view>机建燃油</view>
                                <view class="{{route.canBeReturned?'text-orange1':''}}">
                                    ￥{{seg.displayBunkPrice.airportFee+seg.displayBunkPrice.oilFee}}
                                </view>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
    <view class="z-index-1 p-y-16 p-x-10 box-shadow-footer">
        <button bindtap="throttleConfirm" class="bg-btn-primary text-white f-w-bold f-s-16 r-full l-h-42">
            下一步
        </button>
    </view>
</view>
<bunk-policies-and-baggage routes="{{routes}}" visible="{{policyAndBaggageVis}}"></bunk-policies-and-baggage>