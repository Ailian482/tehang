<view class="h-full bg-grey9 text-grey1 f-s-14">
    <view class="h-44 b-b-1 b-grey7 bg-white d-flex align-items-center p-l-24 p-r-18" wx:for="{{departments}}" wx:key="index" data-department="{{item}}" bindtap="throttleDepartment">
        <text class="flex-1">{{item.name}}</text>
        <iconfont icon="arrow-right" class="f-s-12 text-grey3" wx:if="{{item.nodes}}" />
    </view>
</view>
<van-popup show="{{ popupVisible }}" round closeable position="bottom" custom-style="height: 1010rpx" bind:close="throttleClosePopup">
    <view class="d-flex flex-direction-column f-s-14 text-grey1 h-full">
        <view class="b-b-1 b-grey7 p-t-18 d-flex flex-direction-column h-170">
            <view class="f-w-bold f-s-16 text-center">请选择部门</view>
            <scroll-view class="flex-1 h-1 p-t-18" scroll-y="{{true}}" scroll-top="{{scrollTop}}">
                <view class="p-l-18 p-r-8 ">
                    <view class="item m-b-18 {{index===selected.length-1?'is-last text-primary':''}}" wx:for="{{selected}}" wx:key="index" data-index="{{index}}" bindtap="throttleSelected">
                        <text>{{item.name}}</text>
                    </view>
                </view>
            </scroll-view>
        </view>
        <scroll-view class="flex-1 h-1 p-t-8" scroll-y="{{true}}">
            <view class="p-18">
                <view class="p-y-12" wx:for="{{selected[selected.length-1].nodes}}" wx:key="index" data-department="{{item}}" bindtap="throttleDepartmentNode">
                    <text>{{item.name}}</text>
                </view>
            </view>
        </scroll-view>
        <view class="footer p-y-16 p-x-10">
            <button bindtap="throttleConfirm">确定</button>
        </view>
    </view>
</van-popup>