<view class="flex-direction-column d-flex h-full text-grey1">
    <view class="p-x-16 p-y-10 bg-white z-index-1 d-flex align-items-center">
        <view class="d-flex align-items-center bg-grey7 r-full p-y-6 p-x-12 flex-1">
            <iconfont icon="search" class="text-grey3" />
            <input class="flex-1 p-l-4" placeholder="搜索" bindinput="handleKeywordInput" value="{{keyword}}" />
        </view>
        <view class="text-primary f-s-14 p-l-8" bindtap="throttleAddEmployee" wx:if="addEmployeePermission">
            + 新增员工
        </view>
    </view>
    <view class="flex-1 h-1">
        <scroll-view scroll-y="{{true}}" class="h-full bg-grey9 f-s-14" bindscrolltolower="throttlescrolltolower">
            <view class="p-y-4 p-x-16">最近搜索</view>
            <view class="bg-white p-x-14 p-y-6 d-grid f-s-12 grid-template-columns-4">
                <block wx:for="{{history}}" wx:key="index">
                    <block wx:if="{{selectedModule.isSelected(selected,item.id)}}">
                        <view class="m-4 bg-blue4 r-4 text-center p-y-4 " data-employee="{{item}}" bindtap="handleToggleEmployee">
                            <employee-name employeeInfo="{{item}}" class="text-primary"></employee-name>
                            <view class="text-primary">{{item.departmentName}}</view>
                        </view>
                    </block>
                    <block wx:else>
                        <view class="m-4 bg-grey8 r-4 text-center p-y-4 " data-employee="{{item}}" bindtap="handleToggleEmployee">
                            <employee-name employeeInfo="{{item}}"></employee-name>
                            <view class="text-grey2">{{item.departmentName}}</view>
                        </view>
                    </block>
                </block>
            </view>
            <view class="p-x-10">
                <view class="m-y-6 p-x-16 p-y-12 d-flex r-4 bg-white align-items-center" wx:for="{{list}}" wx:key="index" data-employee="{{item}}" bindtap="handleToggleEmployee">
                    <block wx:if="{{selectedModule.isSelected(selected,item.id)}}">
                        <iconfont icon="radio-selected" class="text-primary f-s-16" />
                        <view class="p-l-14">
                            <view class="f-s-16 m-b-8 f-w-bold text-primary">
                                <employee-name employeeInfo="{{item}}"></employee-name>
                            </view>
                            <view class="text-primary">{{item.departmentName}}</view>
                        </view>
                    </block>
                    <block wx:else>
                        <iconfont icon="radio-unselected" class="text-grey4 f-s-16" />
                        <view class="p-l-14">
                            <view class="f-s-16 m-b-8 f-w-bold">
                                <employee-name employeeInfo="{{item}}"></employee-name>
                            </view>
                            <view class="text-grey2">{{item.departmentName}}</view>
                        </view>
                    </block>
                </view>
            </view>
        </scroll-view>
    </view>
    <view class="box-shadow-footer p-t-8 p-x-10 p-b-16 f-s-14 z-index-1">
        <view class="d-grid grid-template-columns-4">
            <view class="bg-grey8 p-y-8 p-x-16 text-primary r-4 d-inline-block m-b-12 m-x-6 text-center" wx:for="{{selected}}" wx:key="index" data-employee="{{item}}" bindtap="handleToggleEmployee">
                <employee-name employeeInfo="{{item}}"></employee-name>
            </view>
        </view>
        <view class="f-s-12 text-grey2 text-center m-b-12" wx:if="{{count}}">
            <text>还需选择</text>
            <text class="m-x-4 text-orange1">{{remain}}</text>
            <text>人，每间房需选择1人</text>
        </view>
        <button bindtap="throttleConfirm" class="bg-btn-primary text-white f-w-bold f-s-16 r-full l-h-42">
            确定
        </button>
    </view>
</view>
<wxs module="selectedModule">
module.exports.isSelected = function(selected,id){
    var result = false
    selected.forEach(function(item){
        if(item.id===id){
            result = true
        }
    })
    return result
};
</wxs>