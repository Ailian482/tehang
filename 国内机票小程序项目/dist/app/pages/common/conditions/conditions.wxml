<view class="search-bar">
    <view class="d-flex input-wrapper align-items-center">
        <iconfont icon="search" class="text-grey3" />
        <input class="flex-1 p-l-4" placeholder="搜索关键字/位置/酒店名" bindconfirm="throttleKeywordConfirm" bindinput="handleKeywordInput" value="{{keyword}}" />
    </view>
</view>
<view wx:if="{{keyword}}">
    <view class="search-tip">当前城市及周边查询结果：</view>
    <view class="search-result">
        <view wx:for="{{searchResults}}" wx:key="index" wx:for-item="search">
            <view class="item align-items-center" bindtap="throttleSearchResultTap" data-item="{{search}}">
                <iconfont icon="search" class="m-r-10" />
                <view class="flex-1 m-r-10">
                    <text wx:for="{{search.words}}" wx:key="index" class="f-w-bold f-s-14 {{item.isHighLight?'text-primary':'text-grey1'}}">
                        <text>{{item.text}}</text>
                    </text>
                    <view class="f-s-12 text-grey3">{{search.address}}</view>
                </view>
                <text class="item-type">{{search.tipTag}}</text>
            </view>
        </view>
    </view>
</view>
<view wx:else class="container">
    <view class="condition-wrapper" wx:if="{{history&&history.length}}">
        <view class="title d-flex f-s-12">
            <view class="flex-1">
                <iconfont-colorful icon="history" />
                <text class="m-l-4">搜索历史</text>
            </view>
            <view class="text-primary" bindtap="throttleClearHistoryKeywords">
                <view>
                    <iconfont icon="trash" class="f-s-12" />
                    <text class="m-l-2">清空</text>
                </view>
            </view>
        </view>
        <view class="grid">
            <view class="condition-item" wx:for="{{history}}" wx:key="index" bindtap="throttleHistoryKeywordTap" data-item="{{item}}">
                <text>{{item.name}}</text>
            </view>
        </view>
    </view>
    <view class="condition-wrapper">
        <view class="title d-flex f-s-12">
            <view class="flex-1">
                <iconfont-colorful icon="brands" />
                <text class="m-l-4">品牌</text>
            </view>
            <view class="text-primary" bindtap="handleToggleExpanded" data-type="brands" wx:if="{{expandable_brands}}">
                <view wx:if="{{!expanded.brands}}">
                    <text class="m-r-4">展开</text>
                    <iconfont icon="arrow-down" class="f-s-10" />
                </view>
                <view wx:else>
                    <text class="m-r-4">折叠</text>
                    <iconfont icon="arrow-up" class="f-s-10" />
                </view>
            </view>
        </view>
        <view class="grid">
            <view class="condition-item" wx:for="{{brands}}" wx:key="index" bindtap="throttleBrandTap" data-brand="{{item}}" wx:if="{{index<8 || expanded.brands}}">
                <text>{{item}}</text>
            </view>
        </view>
    </view>
    <view class="condition-wrapper">
        <view class="title d-flex">
            <view class="flex-1">
                <iconfont-colorful icon="counties" />
                <text class="m-l-4">行政区</text>
            </view>
            <view class="text-primary" bindtap="handleToggleExpanded" data-type="counties" wx:if="{{expandable_counties}}">
                <view wx:if="{{!expanded.counties}}">
                    <text class="m-r-4">展开</text>
                    <iconfont icon="arrow-down" class="f-s-10" />
                </view>
                <view wx:else>
                    <text class="m-r-4">折叠</text>
                    <iconfont icon="arrow-up" class="f-s-10" />
                </view>
            </view>
        </view>
        <view class="grid">
            <text class="condition-item" wx:for="{{counties}}" wx:key="index" bindtap="throttleCountyTap" data-name="{{item.name}}" wx:if="{{index<8 || expanded.counties}}">
                <text>{{item.name}}</text>
            </text>
        </view>
    </view>
    <view class="condition-wrapper">
        <view class="title d-flex">
            <view class="flex-1">
                <iconfont-colorful icon="businesszones" />
                <text class="m-l-4">商圈</text>
            </view>
            <view class="text-primary" bindtap="handleToggleExpanded" data-type="businessZones" wx:if="{{expandable_businessZones}}">
                <view wx:if="{{!expanded.businessZones}}">
                    <text class="m-r-4">展开</text>
                    <iconfont icon="arrow-down" class="f-s-10" />
                </view>
                <view wx:else>
                    <text class="m-r-4">折叠</text>
                    <iconfont icon="arrow-up" class="f-s-10" />
                </view>
            </view>
        </view>
        <view class="grid">
            <text class="condition-item" wx:for="{{businessZones}}" wx:key="index" bindtap="throttleBizZoneTap" data-namecn="{{item.nameCn}}" wx:if="{{index<8 || expanded.businessZones}}">
                <text>{{item.nameCn}}</text>
            </text>
        </view>
    </view>
    <view class="condition-wrapper" wx:for="{{hotPorts}}" wx:key="index" wx:for-item="hotPort">
        <view class="title d-flex">
            <view class="flex-1">
                <iconfont-colorful icon="{{hotPort.typeName}}" />
                <text class="m-l-4">{{hotPortName[hotPort.typeName]}}</text>
            </view>
            <view class="text-primary" bindtap="handleToggleExpanded" data-type="{{hotPort.typeName}}" wx:if="{{expandable_hotPorts[hotPort.typeName]}}">
                <view wx:if="{{!expanded[hotPort.typeName]}}">
                    <text class="m-r-4">展开</text>
                    <iconfont icon="arrow-down" class="f-s-10" />
                </view>
                <view wx:else>
                    <text class="m-r-4">折叠</text>
                    <iconfont icon="arrow-up" class="f-s-10" />
                </view>
            </view>
        </view>
        <view class="grid">
            <text class="condition-item" wx:for="{{hotPort.hotPorts}}" wx:key="index" bindtap="throttleHotPortTap" data-type="{{hotPort.typeName}}" data-name="{{item.name}}" wx:if="{{index<8 || expanded[hotPort.typeName]}}">
                <text>{{item.name}}</text>
            </text>
        </view>
    </view>
    <view class="condition-wrapper">
        <view class="title d-flex">
            <view class="flex-1">
                <iconfont-colorful icon="metros" />
                <text class="m-l-4">地铁</text>
            </view>
            <view class="text-primary" bindtap="handleToggleExpanded" data-type="metros" wx:if="{{expandable_metros}}">
                <view wx:if="{{!expanded.metros}}">
                    <text class="m-r-4">展开</text>
                    <iconfont icon="arrow-down" class="f-s-10" />
                </view>
                <view wx:else>
                    <text class="m-r-4">折叠</text>
                    <iconfont icon="arrow-up" class="f-s-10" />
                </view>
            </view>
        </view>
        <view class="grid">
            <text class="condition-item" wx:for="{{metros}}" wx:key="index" bindtap="throttleMetroLineTap" data-code="{{item.code}}" wx:if="{{index<8 || expanded.metros}}">
                <text>{{item.name}}</text>
            </text>
        </view>
    </view>
</view>