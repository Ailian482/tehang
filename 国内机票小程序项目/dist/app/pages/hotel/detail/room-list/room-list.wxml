<block wx:for="{{group.list}}" wx:key="roomCode" wx:for-item="room" wx:if="{{index<roomVisCount||more}}">
    <block wx:if="{{room.ratePlans.length>1}}">
        <view bindtap="handleToggleRoomList" data-index="{{index}}">
            <view class="room d-flex align-items-center">
                <view class="room-picture-wrapper">
                    <view class="tag-supplier {{group.supplier}}">{{ group.supplierName  }}</view>
                    <teh-image src="{{room.pictureUrl}}" defaultSrc="{{defaultHotelRoomImageUrl}}" style="background:#cde7ff;" />
                </view>
                <view class="room-info flex-1">
                    <view class="room-name m-b-4 d-flex">
                        <text class="text-ellipsis">{{ room.roomName}}</text>
                        <view class="flex-1 d-flex align-items-center p-l-4" wx:if="{{room.minPricePlan.protocolCode}}">
                            <image class="w-14 h-16" src="{{OSSPrefix}}/hotel/contract-tag.svg" />
                        </view>
                    </view>
                    <view class="room-desc m-b-4">
                        <text wx:if="{{room.minPricePlan.area}}">
                            <text>{{ room.minPricePlan.area }}m²</text>
                        </text>
                        <text>{{ room.minPricePlan.breakfast }}</text>
                        <text>{{ room.minPricePlan.bedType }}</text>
                        <text>{{ room.minPricePlan.windowType }}</text>
                    </view>
                    <view class="room-more m-b-4">{{ room.minPricePlan.returnRule }}</view>
                    <view class="room-more" wx:if="{{room.confirmImmediately}}">立即确认</view>
                </view>
                <view class="room-price-info f-s-14">
                    <text class="m-r-2">¥</text>
                    <text class="room-price">{{ room.minPrice }}</text>
                    <text>起</text>
                    <view class="d-inline-block m-l-4 l-h-1 {{!room.listVisible?'rotate-180':''}}">
                        <iconfont icon="putaway" class="f-s-12" />
                    </view>
                </view>
            </view>
            <view class="room-list-wrapper" wx:if="{{room.listVisible}}">
                <view wx:for="{{room.ratePlans}}" wx:key="ratePlanCode" class="list-item d-flex" wx:if="{{index<ratePlanVisCount||room.more}}">
                    <view class="item-info flex-1" catchtap="throttleOpenRoomDetailPopup" data-room="{{room}}" data-rateplan="{{item}}">
                        <view class="item-name m-b-4 d-flex">
                            <text class="text-ellipsis">{{ item.ratePlanName }}</text>
                            <view class="flex-1 d-flex align-items-center p-l-4" wx:if="{{item.protocolCode}}">
                                <image class="w-14 h-16" src="{{OSSPrefix}}/hotel/contract-tag.svg" />
                            </view>
                        </view>
                        <view class="item-desc m-b-4">
                            <text class="m-r-4">{{ item.breakfast }}</text>
                            <text wx:if="{{room.area}}">{{ room.area }}m²</text>
                        </view>
                        <view class="item-more m-b-4">{{ item.returnRule}}</view>
                        <!-- <view class="item-more" wx:if="{{item.confirmImmediately}}">立即确认</view> -->
                    </view>
                    <view class="item-price-info">
                        <text class="m-r-2">¥</text>
                        <text class="item-price">{{ item.avgPrice }}</text>
                        <button class="btn-booking" data-roomcode="{{item.roomCode}}" data-plancode="{{item.ratePlanCode}}" catchtap="throttleBook">
                            预订
                        </button>
                    </view>
                </view>
                <view class="text-center m-t-6 m-b-8" wx:if="{{room.ratePlans.length>ratePlanVisCount&&!room.more}}">
                    <button class="r-full text-primary b-primary b-1 f-s-12 h-26 l-h-26 d-inline-block" catchtap="throttleShowRoomMore" data-index="{{index}}">
                        查看剩余{{room.ratePlans.length-ratePlanVisCount}}个价格
                    </button>
                </view>
            </view>
        </view>
    </block>
    <view wx:else>
        <view class="room d-flex" catchtap="throttleOpenRoomDetailPopup" data-room="{{room}}" data-rateplan="{{room.minPricePlan}}">
            <view class="room-picture-wrapper">
                <view class="tag-supplier {{group.supplier}}">{{ group.supplierName  }}</view>
                <teh-image src="{{room.pictureUrl}}" defaultSrc="{{defaultHotelRoomImageUrl}}" style="background:#cde7ff;" />
            </view>
            <view class="room-info flex-1">
                <view class="room-name m-b-4 d-flex">
                    <text class="text-ellipsis">{{ room.roomName}}</text>
                    <view class="flex-1 d-flex align-items-center p-l-4" wx:if="{{room.minPricePlan.protocolCode}}">
                        <image class="w-14 h-16" src="{{OSSPrefix}}/hotel/contract-tag.svg" />
                    </view>
                </view>
                <view class="room-desc m-b-4">
                    <text wx:if="{{room.minPricePlan.area}}">
                        <text>{{ room.minPricePlan.area }}m²</text>
                    </text>
                    <text>{{ room.minPricePlan.breakfast }}</text>
                    <text>{{ room.minPricePlan.bedType }}</text>
                    <text>{{ room.minPricePlan.windowType }}</text>
                </view>
                <view class="room-more m-b-4">{{ room.minPricePlan.returnRule }}</view>
                <view class="room-more" wx:if="{{room.confirmImmediately}}">立即确认</view>
            </view>
            <view class="room-price-info f-s-14">
                <text class="m-r-2">¥</text>
                <text class="f-w-bold f-s-20">{{ room.minPricePlan.avgPrice }}</text>
                <button class="btn-booking" data-roomcode="{{room.minPricePlan.roomCode}}" data-plancode="{{room.minPricePlan.ratePlanCode}}" catchtap="throttleBook">
                    预订
                </button>
            </view>
        </view>
    </view>
</block>
<view class="text-center m-y-6 p-t-8 p-b-2 bg-white" wx:if="{{group.list.length>roomVisCount&&!more}}">
    <button class="r-full text-primary b-primary b-1 f-s-12 h-26 l-h-26 d-inline-block" catchtap="throttleShowAll">
        查看全部房型
    </button>
</view>
<view class="text-center m-y-6 p-t-8 p-b-2 bg-white" wx:if="{{group.sendOutList.length&&!sendOutRoomVis}}">
    <button class="r-full text-primary b-primary b-1 f-s-12 h-26 l-h-26 d-inline-block" catchtap="throttleShowSendOut">
        查看售罄房型
    </button>
</view>
<block wx:for="{{group.sendOutList}}" wx:key="roomCode" wx:for-item="room" wx:if="{{sendOutRoomVis}}">
    <view bindtap="handleToggleSendOutRoomList" data-index="{{index}}">
        <view class="room d-flex align-items-center">
            <view class="room-picture-wrapper">
                <view class="tag-supplier {{group.supplier}}">{{ group.supplierName  }}</view>
                <teh-image src="{{room.pictureUrl}}" defaultSrc="{{defaultHotelRoomImageUrl}}" style="background:#cde7ff;" />
            </view>
            <view class="room-info flex-1">
                <view class="room-name m-b-4 d-flex">
                    <text class="text-ellipsis">{{ room.roomName}}</text>
                    <view class="flex-1 d-flex align-items-center p-l-4" wx:if="{{room.minPricePlan.protocolCode}}">
                        <image class="w-14 h-16" src="{{OSSPrefix}}/hotel/contract-tag.svg" />
                    </view>
                </view>
                <view class="room-desc m-b-4">
                    <text wx:if="{{room.minPricePlan.area}}">
                        <text>{{ room.minPricePlan.area }}m²</text>
                    </text>
                    <text>{{ room.minPricePlan.breakfast }}</text>
                    <text>{{ room.minPricePlan.bedType }}</text>
                    <text>{{ room.minPricePlan.windowType }}</text>
                </view>
                <view class="room-more m-b-4">{{ room.minPricePlan.returnRule }}</view>
                <view class="room-more" wx:if="{{room.confirmImmediately}}">立即确认</view>
            </view>
            <view class="room-price-info f-s-14">
                <text class="m-r-2">¥</text>
                <text class="room-price">{{ room.minPrice }}</text>
                <text>起</text>
                <view class="d-inline-block m-l-4 l-h-1 {{!room.listVisible?'rotate-180':''}}">
                    <iconfont icon="putaway" class="f-s-12" />
                </view>
            </view>
        </view>
        <view class="room-list-wrapper" wx:if="{{room.listVisible}}">
            <view wx:for="{{room.ratePlans}}" wx:key="ratePlanCode" class="list-item d-flex">
                <view class="item-info flex-1" catchtap="throttleOpenRoomDetailPopup" data-room="{{room}}" data-rateplan="{{item}}">
                    <view class="item-name m-b-4 d-flex">
                        <text class="text-ellipsis">{{ item.ratePlanName }}</text>
                        <view class="flex-1 d-flex align-items-center p-l-4" wx:if="{{item.protocolCode}}">
                            <image class="w-14 h-16" src="{{OSSPrefix}}/hotel/contract-tag.svg" />
                        </view>
                    </view>
                    <view class="item-desc m-b-4">
                        <text class="m-r-4">{{ item.breakfast }}</text>
                        <text wx:if="{{room.area}}">{{ room.area }}m²</text>
                    </view>
                    <view class="item-more m-b-4">{{ item.returnRule}}</view>
                    <!-- <view class="item-more" wx:if="{{item.confirmImmediately}}">立即确认</view> -->
                </view>
                <view class="item-price-info">
                    <text class="m-r-2">¥</text>
                    <text class="item-price">{{ item.avgPrice }}</text>
                    <button class="btn-booking send-out" catchtap="noop">售罄</button>
                </view>
            </view>
        </view>
    </view>
</block>
