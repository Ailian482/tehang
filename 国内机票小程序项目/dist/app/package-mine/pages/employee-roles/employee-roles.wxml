<!-- 角色列表 -->
<view class="employee-role-list">
    <block wx:for="{{employeeRoleList}}" wx:for-item="roleItem" wx:for-index="idx" wx:key="employeeId">
        <van-cell title="{{roleItem.name}}-{{roleItem.corpName}}" title-class="cell-title" data-id="{{roleItem.employeeId}}" bindtap="handleSelectRole">
            <block wx:if="{{roleItem.currentChosen}}">
                <iconfont class="text-primary f-s-14" icon="selected" slot="right-icon"></iconfont>
            </block>
        </van-cell>
    </block>
</view>
<!-- 邀请列表 -->
<view class="invitation-padding-list">
    <block wx:for="{{invitationList}}" wx:for-item="invitation" wx:for-index="idx" wx:key="invitationCode">
        <van-cell title="{{invitation.corpSummaryInfoDto.corpName}}" title-class="cell-title" data-invitation="{{invitation}}" bindtap="handleShowOverlay">
            <view class="text-grey2 f-s-15 m-r-12" slot="">待加入</view>
            <iconfont class="text-grey3 f-s-12" icon="arrow-right" slot="right-icon"></iconfont>
        </van-cell>
    </block>
</view>
<loading wx:if="{{isLoading}}" title="{{loadingTitle}}" />
<!-- 邀请详情的遮罩层 -->
<van-overlay show="{{ showInvitation }}" bind:click="handleHideOverlay">
    <!-- TODO 后面抽出为业务组件，会多处使用 -->
    <view class="overlay-wrapper">
        <view class="invitation-detail-container" wx:if="{{selectedInvitation}}">
            <view class="header">
                <image class="header-icon" src="{{modalHeaderIconUrl}}" lazy-load="true" />
                <iconfont icon="close" bindtap="handleHideOverlay"></iconfont>
            </view>
            <view class="component-info">
                <view class="f-w-bold">
                    {{selectedInvitation.corpSummaryInfoDto.corpName}}邀请您加入
                </view>
                <view class="m-t-10">邀请人:{{selectedInvitation.inviterEmployeeInfoDto.name}}</view>
            </view>
            <view class="employee-info m-t-10">
                <view>员工姓名：{{selectedInvitation.inviteeEmployeeInfoDto.name}}</view>
                <view>部门：{{selectedInvitation.inviteeEmployeeInfoDto.departmentName}}</view>
                <view>
                    联系手机：
                    <number-encrypt value="{{selectedInvitation.inviteeEmployeeInfoDto.mobile}}" encryptType="Mobile"></number-encrypt>
                </view>
                <!-- 证件号：取第一个展示 -->
                <view wx:if="{{selectedInvitation.inviteeEmployeeInfoDto.documents.length}}">
                    <dict-transform dict="DocType" code="{{selectedInvitation.inviteeEmployeeInfoDto.documents[0].docType}}"></dict-transform>
                    ：
                    <number-encrypt value="{{selectedInvitation.inviteeEmployeeInfoDto.documents[0].docNo}}" encryptType="{{ selectedInvitation.inviteeEmployeeInfoDto.documents[0].docType}}"></number-encrypt>
                </view>
            </view>
            <view class="expiration-info f-s-14">
                请尽快处理，该邀请将于
                <count-down expireTimestamp="{{selectedInvitation.codeExpireTimestamp}}"></count-down>
                后过期
            </view>
            <view class="operate-group">
                <view class="join-btn" bindtap="handleAcceptInvitation">确认加入</view>
                <view class="text-center text-primary f-s-14 m-t-18" bindtap="handleRefuseInvitation">
                    这不是我的机构
                </view>
            </view>
        </view>
    </view>
</van-overlay>