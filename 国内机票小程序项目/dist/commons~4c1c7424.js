exports.ids=[5],exports.modules=Array(72).concat([function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(109),s=r(14),c=r(8),l=r(6),u=r(16),p=r(5),f=r(0);t.LAST_LOGIN_SCENE_KEY="last_login_scene_key",function(e){e.WechatCode="WechatCode",e.WechatPhone="WechatPhone",e.VerificationCode="VerificationCode"}(a=t.LoginScene||(t.LoginScene={}));var d=function(){function e(e,t,r,i,n,a,o,s){this.tokenService=e,this.globalDataService=t,this.routerService=r,this.handleErrorService=i,this.accountLoginHttpService=n,this.accountRegisterHttpService=a,this.frontAccountWechatBindingHttpService=o,this.employeeHttpService=s}var r=e.prototype;return r.getWechatAccount=function(){var e=this;return new u.Observable(function(t){wx.login({success:function(r){var i=r.code;e.frontAccountWechatBindingHttpService.getWechatUserInfo({code:i,operateSource:l.OperateSource}).pipe(p.tap(function(t){var r=t.openId;e.tokenService.saveOpenId(r)}),p.catchError(function(e){return t.error(e),t.complete(),u.EMPTY})).subscribe(function(e){t.next(e),t.complete()})},fail:function(e){t.error(e),t.complete()}})})},r.wechatLogin=function(){var e=this;wx.showLoading({title:"加载中"}),wx.login({success:function(t){"login:ok"===t.errMsg&&e.loginByWechatCodeRequest(t.code).pipe(p.finalize(function(){wx.hideLoading()})).subscribe(function(t){t&&e.routerService.toHome()})},fail:function(e){wx.showToast({title:"微信登录失败："+e.errMsg})}})},r.loginByWechatPhone=function(e){var t=this;return this.accountRegisterHttpService.registerWechatMiniProgram(e).pipe(p.catchError(function(e){return t.handleErrorService.handle(e)}),p.tap(function(e){t.saveLastLoginScene(a.WechatPhone),t.handleLoginToken(e)}),p.switchMap(function(e){return e.employeeToken?t.getEmployeeInfoRequest():u.of(void 0)}))},r.loginBySMS=function(e){var t=this;return this.accountLoginHttpService.loginVerificationCode(e).pipe(p.catchError(function(e){return t.handleErrorService.handle(e)}),p.tap(function(e){t.saveLastLoginScene(a.VerificationCode),t.handleLoginToken(e)}),p.switchMap(function(e){return e.employeeToken?t.getEmployeeInfoRequest():u.EMPTY}))},r.loginByPwd=function(e){var t=this;return this.accountLoginHttpService.loginPassword(e).pipe(p.catchError(function(e){return t.handleErrorService.handle(e)}),p.tap(function(e){t.saveLastLoginScene(a.VerificationCode),t.handleLoginToken(e)}),p.switchMap(function(e){return e.employeeToken?t.getEmployeeInfoRequest():u.EMPTY}))},r.loginByLastToken=function(){var e=this;this.getEmployeeInfoRequest().pipe(p.catchError(function(t){return e.routerService.toAuthorizeLogin(),e.handleErrorService.handle(t)})).subscribe(function(){e.routerService.toHome()})},r.loginByRegisterScene=function(e){var t=this;return this.accountRegisterHttpService.registerRole({registerScene:e}).pipe(p.tap(function(e){var r=e.employeeToken;t.tokenService.saveToken(r)}),p.switchMap(function(){return t.getEmployeeInfoRequest()}))},r.loginByWechatCodeRequest=function(e){var t=this,r={code:e,operateSource:l.OperateSource};return this.accountLoginHttpService.loginWechat(r).pipe(p.catchError(function(e){throw e}),p.tap(function(e){t.saveLastLoginScene(a.WechatCode),t.handleLoginToken(e)}),p.switchMap(function(e){return e.employeeToken?t.getEmployeeInfoRequest():u.of(null)}))},r.handleLoginToken=function(e){var t=e.accountToken,r=e.employeeToken,i=e.openId;this.tokenService.saveAccountToken(t),i&&this.tokenService.saveOpenId(i),r?this.tokenService.saveToken(r):this.routerService.toLoginGuide()},r.getEmployeeInfoRequest=function(){var e=this;return this.employeeHttpService.getEmployeeInfo().pipe(p.tap(function(t){var r=t,i="GovernmentSK"===t.corpConfig.corpType||"SK"===t.corpConfig.corpType;e.globalDataService.saveGlobalData({employeeInfo:r,isSK:i})}))},r.getLastLoginScene=function(){return wx.getStorageSync(t.LAST_LOGIN_SCENE_KEY)},r.saveLastLoginScene=function(e){return wx.setStorageSync(t.LAST_LOGIN_SCENE_KEY,e)},e}();d=i([f.singleton(),n("design:paramtypes",[c.TokenService,c.GlobalDataService,c.RouterService,c.HandleErrorService,s.AccountLoginHttpService,s.AccountRegisterHttpService,o.FrontAccountWechatBindingHttpService,s.EmployeeHttpService])],d),t.LoginService=d},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(22);t.FLIGHT_SEARCH_PARAMS_CACHE="flight-search-params-cache",t.FLIGHT_SELECTED_DATA="flight-selected-data",t.FlightBunkOptions=[{value:"不限舱位",key:"Y,C,F"},{value:"经济舱",key:"Y"},{value:"头等舱/公务舱",key:"C,F"}],t.DEFAULT_CITY_LIST=[{isCity:!0,cityCode:"SZX",code:"SZX",cityName:"深圳",cityFirstLetter:"s"},{isCity:!0,cityCode:"BJS",code:"PEK",cityName:"北京",cityFirstLetter:"b"}],t.bunkTagClass={[i.BunkTag.Airline]:"price-tag tag-orange",[i.BunkTag.Qunar]:"price-tag tag-blue",[i.BunkTag.TehangNormal]:"price-tag tag-red",[i.BunkTag.TehangPreferentialPrice]:"price-tag tag-red"}},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o,s=r(14),c=r(16),l=r(5),u=r(22),p=r(0);!function(e){e.route="route",e.passenger="passenger",e.reason="reason",e.completed="completed"}(o||(o={}));var f=function(){function e(e,t,r){this.policyExecuteQueryHttpService=e,this.flightOrderOperationHttpService=t,this.flightOrderQueryHttpService=r,this.steps=[],this.currentStepIndex=-1}var t,r,n,a=e.prototype;return a.toReturn=function(e){var t=this;return this.policyExecuteQueryHttpService.getCorpBookingSetting(u.BizType.Flight).pipe(l.switchMap(function(r){var i=r.flightTicketReturnReason;t.flightTicketReturnReason=i,t.orderDetail=e,t.reset();var n=t.steps;return e.routes.length>1?(n.push(o.route),c.of(null)):t.routeConfirm([0])}))},a.reset=function(){this.currentStepIndex=-1,this.steps=[]},a.getOrder=function(){return this.orderDetail},a.getRouteSelected=function(){return this.routeSelected},a.toNextPage=function(){this.currentStepIndex++;var e=this.steps[this.currentStepIndex];wx.navigateTo({url:"/app/pages/flight-order-return/flight-order-return-"+e+"/flight-order-return-"+e})},a.routeConfirm=function(e){this.routeSelected=e;var t=this.steps,r=this.orderDetail.passengers;return r.length>1?(t.push(o.passenger),c.of(null)):this.passengerConfirm([r[0].passengerId])},a.passengerConfirm=function(e){this.passengerSelected=e;var t=this.steps,r=this.flightTicketReturnReason;return r&&r.enabled?(t.push(o.reason),c.of(null)):this.reasonConfirm()},a.reasonConfirm=function(e){var t=this;this.steps.push(o.completed);var r=this.getParams({returnReason:e});return this.getRefundModeInfo().pipe(l.switchMap(function(e){return t.flightOrderOperationHttpService.returnApply(Object.assign({},r,e))}))},a.getRefundModeInfo=function(){var e=this.orderDetail,t=e.id;return e.payMode!==u.CorpPayMode.Personally?c.of(null):this.flightOrderQueryHttpService.getRefundModeInfoForOrder(t).pipe(l.map(function(e){var t;if(e){var r=e.refundableModes,i=u.RefundMode.RefundByBackTrack;r.includes(i)?t=i:r.length>0&&(t=r[0])}return{refundMode:t,withdrawFromPreDepositAccount:!1}}))},a.getReasonConfig=function(){return this.flightTicketReturnReason},a.getParams=function(e){var t=this.routeSelected,r=this.passengerSelected,i=this.orderDetail.id,n=this.getTicketIds(t,r).join(",");return Object.assign({},e,{orderId:i,ticketIds:n})},a.getTicketIds=function(e,t){var r=this.orderDetail.passengers;return e.map(function(e){return r.filter(function(e){return t.includes(e.passengerId)}).map(function(t){return t.flightOrderTicketBos[e].id})}).reduce(function(e,t){return e.push.apply(e,t),e},[])},t=e,(r=[{key:"orderId",get:function(){return this.orderDetail.id}}])&&i(t.prototype,r),n&&i(t,n),e}();f=n([p.singleton(),a("design:paramtypes",[s.PolicyExecuteQueryHttpService,s.FlightOrderOperationHttpService,s.FlightOrderQueryHttpService])],f),t.FlightOrderReturnService=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,a=r(6);!function(e){e.Mine="Mine",e.Other="Other"}(t.ApprovalSource||(t.ApprovalSource={})),function(e){e.Cancelled="Cancelled",e.Passed="Passed",e.Rejected="Rejected",e.WaitApproval="WaitApproval"}(i=t.ApprovalStatus||(t.ApprovalStatus={})),function(e){e.Cancelled="Cancelled",e.Passed="Passed",e.Rejected="Rejected",e.WaitAuthorize="WaitAuthorize"}(n=t.AuthorizeStatus||(t.AuthorizeStatus={})),function(e){e.Handled="Handled",e.NoNeedToHandle="NoNeedToHandle",e.WaitHandle="WaitHandle"}(t.AuthorizeSheetHandleStatus||(t.AuthorizeSheetHandleStatus={})),t.approvalOSSPrefix=a.OSSPrefix+"/approval",t.ApprovalStatusConstant={[i.Cancelled]:{imageUrl:t.approvalOSSPrefix+"/approval-cancelled.png",processUrl:t.approvalOSSPrefix+"/process-cancelled.png",textColor:"text-grey3"},[i.Passed]:{imageUrl:t.approvalOSSPrefix+"/approval-passed.png",processUrl:t.approvalOSSPrefix+"/process-passed.png",textColor:"text-primary"},[i.Rejected]:{imageUrl:t.approvalOSSPrefix+"/approval-rejected.png",processUrl:t.approvalOSSPrefix+"/process-rejected.png",textColor:"text-red2"},[i.WaitApproval]:{imageUrl:t.approvalOSSPrefix+"/approval-waiting.png",processUrl:t.approvalOSSPrefix+"/process-waiting.png",textColor:"text-orange1"}},t.AuthorizeStatusConstant={[n.Cancelled]:{imageUrl:t.approvalOSSPrefix+"/approval-cancelled.png",processUrl:t.approvalOSSPrefix+"/process-cancelled.png",textColor:"text-grey3"},[n.Passed]:{imageUrl:t.approvalOSSPrefix+"/authorize-passed.png",processUrl:t.approvalOSSPrefix+"/process-passed.png",textColor:"text-primary"},[n.Rejected]:{imageUrl:t.approvalOSSPrefix+"/authorize-rejected.png",processUrl:t.approvalOSSPrefix+"/process-rejected.png",textColor:"text-red2"},[n.WaitAuthorize]:{imageUrl:t.approvalOSSPrefix+"/authorize-waiting.png",processUrl:t.approvalOSSPrefix+"/process-waiting.png",textColor:"text-orange1"}}},,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(14),s=r(8),c=r(5),l=r(0);!function(e){e.Approval="Approval",e.Authorize="Authorize"}(a=t.ApprovalProcessType||(t.ApprovalProcessType={}));var u=function(){function e(e,t,r,i,n){this.handleErrorService=e,this.approvalHttpService=t,this.authorizeHttpService=r,this.policyDisplayHttpService=i,this.globalDataService=n}var t=e.prototype;return t.getApprovalAndAuthorizeEnabled=function(){var e=this;return this.policyDisplayHttpService.getClusteredPolicy({}).pipe(c.map(function(e){var t=e.approvalPolicy,r=e.authorizePolicy;return{approvalEnabled:!!t.approvalEnabled,authorizeEnabled:r.authorizeEnabled&&"WarningOnly"!==r.overrunPolicyOption}}),c.tap(function(t){var r=t.approvalEnabled,i=t.authorizeEnabled;e.globalDataService.saveGlobalData({approvalEnabled:r,authorizeEnabled:i})}))},t.getApprovalForMineMixedRequest=function(e,t){return e===a.Approval?this.getApprovalPageListRequest(t):this.getAuthorizePageListRequest(t)},t.getApprovalForOtherMixedRequest=function(e,t){return e===a.Approval?this.getApprovalToAuditPageListRequest(t):this.getAuthorizeToAuditPageListRequest(t)},t.getApprovalPageListRequest=function(e){var t=this;return this.approvalHttpService.getApprovalPageList(e).pipe(c.map(function(e){return e.content=t.handleApproval(e.content),e}),c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getAuthorizePageListRequest=function(e){var t=this;return this.authorizeHttpService.getAuthorizeSheetPageList(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getApprovalToAuditPageListRequest=function(e){var t=this;return this.approvalHttpService.getApprovalToAuditPageList(e).pipe(c.map(function(e){return e.content=t.handleApproval(e.content),e}),c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getAuthorizeToAuditPageListRequest=function(e){var t=this;return this.authorizeHttpService.getAuthorizeSheetToAuditPageList(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getApprovalCancelRequest=function(e){var t=this;return this.approvalHttpService.cancelApproval(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getAuditApprovalMixedRequest=function(e,t){if(e===a.Approval){var r=Object.assign({},t,{approvalId:t.id});return this.getAuditApprovalRequest(r)}var i=Object.assign({},t,{authorizeSheetId:t.id});return this.getAuditAuthorizeRequest(i)},t.getAuditApprovalRequest=function(e){var t=this;return this.approvalHttpService.auditApproval(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.getAuditAuthorizeRequest=function(e){var t=this;return this.authorizeHttpService.auditAuthorizeSheet(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.handleApproval=function(e){return e.map(function(e){var t=e.employees.map(function(e){return e.name}).join("、"),r=e.routes.map(function(e){return e.travelFrom+"-"+e.travelDestination}),i=e.routes.map(function(e){return e.travelDateStart+"至"+e.travelDateEnd}),n=e.routes.map(function(e){return e.transport});return Object.assign({},e,{employeeNamesStr:t,travelPlaces:r,travelDates:i,transports:n})})},e}();u=i([l.singleton(),n("design:paramtypes",[s.HandleErrorService,o.ApprovalHttpService,o.AuthorizeHttpService,o.PolicyDisplayHttpService,s.GlobalDataService])],u),t.ApprovalMixedService=u},function(e,t,r){"use strict";function i(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),i(r(171)),i(r(312)),i(r(172)),i(r(173)),i(r(313)),i(r(314)),i(r(315)),i(r(316)),i(r(174)),i(r(175))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(5),o=r(0),s=function(){function e(){this.city$=new n.Subject}var t=e.prototype;return t.getCity=function(){return wx.navigateTo({url:"/app/pages/common/cities/cities"}),this.city$.pipe(a.take(1))},t.choose=function(e){this.city$.next(e),wx.navigateBack()},e}();s=i([o.singleton()],s),t.ChooseCityService=s},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(e,t){return this.confirm$=new n.Subject,this.selected=t,this.count=e,wx.navigateTo({url:"/app/pages/common/employee-select/employee-select"}),this.confirm$.asObservable()},t.getInfo=function(){return{count:this.count,selected:this.selected}},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.EmployeeSelectService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/pages/common/department-select/department-select"}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.DepartmentSelectService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.modify=function(){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/pages/common/employee-modify/employee-modify"}),this.confirm$.asObservable()},t.confirm=function(){var e=this;wx.navigateBack(),setTimeout(function(){e.confirm$.next(),e.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.EmployeeModifyService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.toModify=function(e){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/pages/common/frequent-traveller-modify/frequent-traveller-modify"+(e?"?id="+e:"")}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.FrequentTravellerModifyService=o},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.toModify=function(e){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/package-mine/pages/invoice-detail-modify/invoice-detail-modify?invoice="+JSON.stringify(e)}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.InvoiceDetailModifyService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(110),o=r(16),s=r(5),c=r(0);t.DOMESTIC_AIRPORTS_DATA="domestic-airports-data";var l=function(){function e(e,t){this.resourceVersionHttpService=e,this.commonAirportHttpService=t,this.MAX_HOT_CITY=16,this.airports$=new o.BehaviorSubject([]),this.refuseCache()}var r=e.prototype;return r.getAirports=function(){var e=wx.getStorageSync(t.DOMESTIC_AIRPORTS_DATA);return console.log(e),e?this.airports$.asObservable().pipe(s.take(1)):this.getDomesticAirports().pipe(s.map(function(e){return e.airports}))},r.refuseCache=function(){var e=this,r=wx.getStorageSync(t.DOMESTIC_AIRPORTS_DATA);r?this.resourceVersionHttpService.getAll().subscribe(function(t){if(t.length){var i=t.find(function(e){return"airport"===e.resourceName}),n=i?i.version:"";r.version!==n?e.getDomesticAirports().subscribe():e.airports$.next(r.airports)}}):this.getDomesticAirports().subscribe()},r.getDomesticAirports=function(){var e=this;return this.commonAirportHttpService.getSimpleInternationalAirports().pipe(s.map(function(e){var t=e.airports;return{version:e.version,airports:t.filter(function(e){return e.wasDomestic}).map(function(e){return{cityCode:e.cityCode,cityName:e.cityName,code:e.code,name:e.name,cityFirstLetter:e.cityFirstLetter,cityInternationalHotIndex:e.cityInternationalHotIndex}})}}),s.tap(function(r){e.airports$.next(r.airports),wx.setStorageSync(t.DOMESTIC_AIRPORTS_DATA,r)}))},r.getHotAirportCity=function(e,t){var r=new Map;return e.forEach(function(e){if(r.has(e.cityCode)){var t=r.get(e.cityCode),i=Number(e.cityInternationalHotIndex)+Number(t.cityInternationalHotIndex);e=Object.assign({},e,{cityInternationalHotIndex:i})}r.set(e.cityCode,e)}),Array.from(r.values()).sort(function(e,t){return Number(t.cityInternationalHotIndex)-Number(e.cityInternationalHotIndex)}).slice(0,t||this.MAX_HOT_CITY).map(function(e){return Object.assign({},e,{isCity:!0})})},r.getAirportsByKeyword=function(e){var t=this;return this.commonAirportHttpService.search(e).pipe(s.map(function(e){var r=e.content,i=t.convertAirports(r.filter(function(e){return e.wasDomestic}));return t.pickCitiesFromAirports(i).concat(i)}))},r.convertAirports=function(e){return e.map(function(e){return{cityName:e.cityNameCn,cityCode:e.cityIataCode,code:e.code,name:e.nameCnShort,isCity:!1}})},r.pickCitiesFromAirports=function(e){var t=new Set;return e.filter(function(e){var r=t.has(e.cityCode);return r||t.add(e.cityCode),!r}).map(function(e){return Object.assign({},e,{isCity:!0})})},e}();l=i([c.singleton(),n("design:paramtypes",[a.ResourceVersionHttpService,a.CommonAirportHttpService])],l),t.AirportsService=l},,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a,o=r(0);!function(e){e.TimeAsc="TimeAsc",e.TimeDesc="TimeDesc",e.PriceAsc="PriceAsc",e.PriceDesc="PriceDesc"}(a=t.FlightOrderBy||(t.FlightOrderBy={})),function(e){e.Time="Time",e.Price="Price"}(t.FlightSortType||(t.FlightSortType={}));var s=function(){function e(){}var t=e.prototype;return t.sortFlights=function(e,t){var r=[];switch(t){case a.PriceDesc:r=this.flightOrderByPriceDesc(e);break;case a.PriceAsc:r=this.flightOrderByPriceAsc(e);break;case a.TimeDesc:r=this.flightOrderByTimeDesc(e);break;case a.TimeAsc:default:r=this.flightOrderByTimeAsc(e)}return r},t.flightOrderByPriceDesc=function(e){var t=this;return e.sort(function(e,r){return t.comparePrice(r,e)})},t.flightOrderByPriceAsc=function(e){var t=this;return e.sort(function(e,r){return t.comparePrice(e,r)})},t.comparePrice=function(e,t){return e.bunks[0].adultPrice.factBunkPrice-t.bunks[0].adultPrice.factBunkPrice},t.flightOrderByTimeAsc=function(e){return e.sort(function(e,t){return e.departure.dateTime.localeCompare(t.departure.dateTime)})},t.flightOrderByTimeDesc=function(e){return e.sort(function(e,t){return t.departure.dateTime.localeCompare(e.departure.dateTime)})},e}();s=i([o.singleton(),n("design:paramtypes",[])],s),t.FlightSortService=s},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=function(){function e(){}var t=e.prototype;return t.toDetail=function(e,t){this.passengers=e,this.routes=t,wx.navigateTo({url:"/app/pages/common/order-insurance-detail/order-insurance-detail"})},t.getPassengers=function(){var e=this.passengers,t=this.routes;return e.map(function(e){var r=e.flightOrderTicketBos,i=n(e,["flightOrderTicketBos"]);return Object.assign({},i,{flightOrderTicketBos:r.map(function(e,r){return Object.assign({},e,{segment:t[r].segments[0]})})})})},e}();o=i([a.singleton()],o),t.OrderInsuranceDetailService=o},function(e,t,r){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.getCannotCheckInReason=function(e){var t="";return e.departureTimeOk?e.airlineOk&&e.timeOk?e.passengerOk||(t="乘客订单状态暂不支持申请值机，请谅解"):t="本航段暂不支持网上值机，请前往机场柜台办理":t="该行程已过航班起飞时间",t},t.getCanCheckIn=function(e){var t=e.airlineOk,r=e.departureTimeOk,i=e.orderOk,n=e.passengerOk,a=e.timeOk;return t&&r&&i&&n&&a},function(e){e.together="together",e.divided="divided"}(i=t.CheckInType||(t.CheckInType={})),t.getCheckInTypeOptions=function(){return[{label:"将为您选择连号座位",selected:!0,type:i.together},{label:"分别选座",selected:!1,type:i.divided}]},t.getSeatOptions=function(){return[{label:"靠过道",selected:!0},{label:"靠窗",selected:!1},{label:"靠安全出口",selected:!1},{label:"尽量前排",selected:!1},{label:"尽量后排",selected:!1}]}},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(79),o=r(8),s=r(16),c=r(5),l=r(0),u=function(){function e(e,t,r){this.hotelCityHttpService=e,this.handleErrorService=t,this.frontHotelBrandHttpService=r,this.cache={}}var t=e.prototype;return t.getCondition=function(e){return wx.navigateTo({url:"/app/pages/common/conditions/conditions?citycode="+e.cityCode}),this.detailRequestParams=e,this.conditions=new s.Subject,this.conditions.asObservable()},t.choose=function(e,t,r){var i=this;void 0===r&&(r=1),wx.navigateBack({delta:r}),setTimeout(function(){i.conditions.next({conditions:e,desc:t}),i.conditions.complete()},0)},t.getDetailRequestParams=function(){return this.detailRequestParams},t.getCityBaseInfo=function(e){return this.cache[e]?s.of(this.cache[e]):this.requestCityBaseInfo(e)},t.getBrands=function(){var e=this;return this.brandsCache?s.of(this.brandsCache):this.frontHotelBrandHttpService.getAllBrand().pipe(c.map(function(e){return e.map(function(e){return e.name})}),c.tap(function(t){return e.brandsCache=t}))},t.requestCityBaseInfo=function(e){var t=this;return this.hotelCityHttpService.getCityBaseInfo(e).pipe(c.catchError(function(e){return t.handleErrorService.handle(e)}),c.map(function(e){var t=e.hotPorts,r=["MetroStation","Airport","RailwayStation","ExaminationPoint","BusinessZone","Poi","Hotel","District","Brand"],i=t.filter(function(e){return r.includes(e.typeName)});return Object.assign({},e,{hotPorts:i})}),c.tap(function(r){return t.cache[e]=r}))},e}();u=i([l.singleton(),n("design:paramtypes",[a.FrontHotelCityHttpService,o.HandleErrorService,a.FrontHotelBrandHttpService])],u),t.ConditionService=u;var p=function(){this.keyWord=null,this.condition={brands:null,position:null,tipWordType:null,coordinates:{lat:null,lon:null}}};t.getEmptyConditions=function(){return new p}},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/pages/common/project-select/project-select"}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.ProjectSelectService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(e){return this.confirm$=new n.Subject,this.params=e,wx.navigateTo({url:"/app/pages/common/approval-select/approval-select"}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},t.getParams=function(){return this.params},e}();o=i([a.singleton()],o),t.ApprovalSelectService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(e){return this.confirm$=new n.Subject,this.selected=e,wx.navigateTo({url:"/app/pages/common/invoice-select/invoice-select"}),this.confirm$.asObservable()},t.getInfo=function(){return{selected:this.selected}},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.InvoiceSelectService=o},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.select=function(e,t){return this.confirm$=new n.Subject,this.selected=t,this.count=e,wx.navigateTo({url:"/app/pages/common/frequent-traveller-select/frequent-traveller-select"}),this.confirm$.asObservable()},t.getInfo=function(){return{count:this.count,selected:this.selected}},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.FrequentTravellerSelectService=o},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),n=r(32);t.createAccountLoginForm=function(){var e=n.ThValidators,t=e.required,r={mobile:[,[t,e.mobile]],password:[,[t]],captchaCode:[,],captchaToken:[],loginScene:["Normal"],operateSource:["WechatMiniProgram"]};return i.fb.group(r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHotPortNames=function(){return{RailwayStation:"火车站",Airport:"机场",ViewSpot:"景点",ExhibitionCenter:"展馆",College:"学校",Hospital:"医院",ExaminationPoint:"汽车站"}},t.getBaseInfoCats=function(){return[{name:"行政区",type:"District"},{name:"地铁站",type:"MetroStation"},{name:"火车站",type:"RailwayStation"},{name:"机场",type:"Airport"},{name:"汽车站",type:"ExaminationPoint"},{name:"商圈",type:"BusinessZone"}]}},,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(16),o=r(0),s=function(){function e(){}var t=e.prototype;return t.getMetro=function(e,t){return this.metros=e,this.code=t,this.selected$=new a.Subject,wx.navigateTo({url:"/app/pages/common/conditions/metros/metros"}),this.selected$.asObservable()},t.chooseMetro=function(e){this.selected$.next(e),this.selected$.complete()},e}();s=i([o.singleton(),n("design:paramtypes",[])],s),t.MetrosService=s},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-detail/point-detail.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-detail/point-detail.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-detail/point-detail.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-rule/point-rule.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-rule/point-rule.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/point-rule/point-rule.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback/feedback.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback/feedback.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback/feedback.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-sheet/feedback-sheet.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-sheet/feedback-sheet.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-sheet/feedback-sheet.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-history/feedback-history.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-history/feedback-history.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-history/feedback-history.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-detail/feedback-detail.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-detail/feedback-detail.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/feedback-detail/feedback-detail.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/user-protocol/user-protocol.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/user-protocol/user-protocol.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/travel-policy/travel-policy.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/travel-policy/travel-policy.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/travel-policy/travel-policy.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/mine-setting/mine-setting.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/mine-setting/mine-setting.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/mine-setting/mine-setting.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/modify-password/modify-password.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/modify-password/modify-password.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/modify-password/modify-password.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/employee-roles/employee-roles.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/employee-roles/employee-roles.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/employee-roles/employee-roles.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/general-info-management.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/general-info-management.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/general-info-management.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/traveler-detail-modify/traveler-detail-modify.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/traveler-detail-modify/traveler-detail-modify.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/traveler-detail-modify/traveler-detail-modify.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/address-detail-modify/address-detail-modify.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/address-detail-modify/address-detail-modify.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/address-detail-modify/address-detail-modify.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/invoice-detail-modify/invoice-detail-modify.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/invoice-detail-modify/invoice-detail-modify.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/invoice-detail-modify/invoice-detail-modify.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-search/flight-search.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-search/flight-search.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-search/flight-search.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/airports/airports.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/airports/airports.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/airports/airports.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/flight-list.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/flight-list.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/flight-list.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/flight-bunk-list.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/flight-bunk-list.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/flight-bunk-list.wxss"},,,,function(e,t,r){e.exports=r.p+"app/pages/flight-order-detail/flight-order-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-detail/flight-order-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-detail/flight-order-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/order-insurance-detail/order-insurance-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/common/order-insurance-detail/order-insurance-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/order-insurance-detail/order-insurance-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-route/flight-order-return-route.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-route/flight-order-return-route.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-route/flight-order-return-route.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-passenger/flight-order-return-passenger.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-passenger/flight-order-return-passenger.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-passenger/flight-order-return-passenger.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-reason/flight-order-return-reason.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-reason/flight-order-return-reason.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-reason/flight-order-return-reason.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-completed/flight-order-return-completed.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-completed/flight-order-return-completed.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-return/flight-order-return-completed/flight-order-return-completed.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/flight-order-checkin.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/flight-order-checkin.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/flight-order-checkin.wxss"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/checkin-completed/checkin-completed.json"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/checkin-completed/checkin-completed.wxml"},function(e,t,r){e.exports=r.p+"app/pages/flight-order-checkin/checkin-completed/checkin-completed.wxss"},,,,,,,function(e,t,r){e.exports=r.p+"app/pages/entrance/authorize-login/authorize-login.json"},function(e,t,r){e.exports=r.p+"app/pages/entrance/authorize-login/authorize-login.wxml"},function(e,t,r){e.exports=r.p+"app/pages/entrance/authorize-login/authorize-login.wxss"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login/login.json"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login/login.wxml"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login/login.wxss"},function(e,t,r){e.exports=r.p+"app/pages/entrance/pwd-login/pwd-login.json"},function(e,t,r){e.exports=r.p+"app/pages/entrance/pwd-login/pwd-login.wxml"},function(e,t,r){e.exports=r.p+"app/pages/entrance/pwd-login/pwd-login.wxss"},function(e,t,r){e.exports=r.p+"app/pages/entrance/smscode/smscode.json"},function(e,t,r){e.exports=r.p+"app/pages/entrance/smscode/smscode.wxml"},function(e,t,r){e.exports=r.p+"app/pages/entrance/smscode/smscode.wxss"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login-guide/login-guide.json"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login-guide/login-guide.wxml"},function(e,t,r){e.exports=r.p+"app/pages/entrance/login-guide/login-guide.wxss"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r.p+"app/pages/approval/approval.json"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval.wxml"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval.wxss"},function(e,t,r){e.exports=r.p+"app/pages/approval-process-detail/approval-process-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/approval-process-detail/approval-process-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/approval-process-detail/approval-process-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/authorize-process-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/authorize-process-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/authorize-process-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/approval-created/approval-created.json"},function(e,t,r){e.exports=r.p+"app/pages/approval-created/approval-created.wxml"},function(e,t,r){e.exports=r.p+"app/pages/approval-created/approval-created.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/cities/cities.json"},function(e,t,r){e.exports=r.p+"app/pages/common/cities/cities.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/cities/cities.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/conditions.json"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/conditions.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/conditions.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/metros/metros.json"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/metros/metros.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/conditions/metros/metros.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/protocol/protocol.json"},function(e,t,r){e.exports=r.p+"app/pages/common/protocol/protocol.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/privacy/privacy.json"},function(e,t,r){e.exports=r.p+"app/pages/common/privacy/privacy.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/employee-select/employee-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/employee-select/employee-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/department-select/department-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/department-select/department-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/department-select/department-select.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/project-select/project-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/project-select/project-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/project-select/project-select.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/approval-select/approval-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/approval-select/approval-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/approval-select/approval-select.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-select/invoice-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-select/invoice-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-select/invoice-select.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/employee-modify/employee-modify.json"},function(e,t,r){e.exports=r.p+"app/pages/common/employee-modify/employee-modify.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/employee-modify/employee-modify.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/frequent-traveller-modify/frequent-traveller-modify.json"},function(e,t,r){e.exports=r.p+"app/pages/common/frequent-traveller-modify/frequent-traveller-modify.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/frequent-traveller-select/frequent-traveller-select.json"},function(e,t,r){e.exports=r.p+"app/pages/common/frequent-traveller-select/frequent-traveller-select.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/order-operate-result/order-operate-result.json"},function(e,t,r){e.exports=r.p+"app/pages/common/order-operate-result/order-operate-result.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/guest-detail/guest-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/common/guest-detail/guest-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/guest-detail/guest-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-detail/invoice-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-detail/invoice-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/common/invoice-detail/invoice-detail.wxss"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),n=r(32);t.createTravelerForm=function(){var e=n.ThValidators,r=e.required,a=e.en,o=e.mobile,s=e.nameAll,c=e.email,l={id:[],nameAll:[,[r,s]],givenNameCn:[,[r]],surnameCn:[,[r]],givenNameEn:[,[r,a]],surnameEn:[,[r,a]],docs:i.fb.array([t.createTravelerDocForm()]),gender:[],nationality:[],birthday:[],mobile:[,[o]],email:[,[c]]};return i.fb.group(l)},t.createTravelerDocForm=function(){var e=n.ThValidators.required,t={docNo:[,e],docType:[,e],expiredDate:[,e]};return i.fb.group(t)},t.getTravelerFormValue=function(e){return Object.assign({},e.value)}},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(t,"__esModule",{value:!0});var n=r(16),a=r(0),o=function(){function e(){}var t=e.prototype;return t.toModify=function(e){return this.confirm$=new n.Subject,wx.navigateTo({url:"/app/package-mine/pages/traveler-detail-modify/traveler-detail-modify"+(e?"?id="+e:"")}),this.confirm$.asObservable()},t.confirm=function(e){var t=this;wx.navigateBack(),setTimeout(function(){t.confirm$.next(e),t.confirm$.complete()},0)},e}();o=i([a.singleton()],o),t.TravellerDetailModifyService=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),n=r(32);t.createAddressForm=function(){var e=n.ThValidators,t=e.required,r={id:[],consignee:[,t],mobile:[,[t,e.mobile]],province:[,t],city:[,t],area:[,t],address:[,t],defaulted:[]};return i.fb.group(r)},t.getAddressFormValue=function(e){return Object.assign({},e.value)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),n=r(32);t.createInvoiceForm=function(){var e=n.ThValidators.required,t={id:[],registrationNo:[,e],title:[,e],type:[,e],defaulted:[]};return i.fb.group(t)},t.getInvoiceFormValue=function(e){return Object.assign({},e.value)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a,o,s,c=r(6),l=r(0);!function(e){e.OnlyNonStop="OnlyNonStop"}(a=t.FlightFilterHots||(t.FlightFilterHots={})),function(e){e.Night="Night",e.Morning="Morning",e.Afternoon="Afternoon",e.Evening="Evening"}(o=t.FlightDeparturePeriod||(t.FlightDeparturePeriod={})),function(e){e.hotsFilter="hotsFilter",e.departurePeriod="departurePeriod",e.airline="airline",e.departureAirport="departureAirport",e.arrivalAirport="arrivalAirport",e.bunkType="bunkType",e.planeTypeCategory="planeTypeCategory"}(s=t.FlightFilterKey||(t.FlightFilterKey={})),t.HotsFilterOptions=[{label:"仅看直飞",value:a.OnlyNonStop}],t.DeparturePeriodOptions=[{label:"00:00-06:00",value:o.Night},{label:"06:00-12:00",value:o.Morning},{label:"12:00-18:00",value:o.Afternoon},{label:"18:00-24:00",value:o.Evening}],t.FlightBunkOptions=[{label:"经济舱",value:"Y"},{label:"头等舱/公务舱",value:"C,F"}],t.DefaultFilterParams={hotsFilter:[],departurePeriod:[],airline:[],departureAirport:[],arrivalAirport:[],bunkType:[],planeTypeCategory:[]};var u=function(){function e(){}var r=e.prototype;return r.flightFilter=function(e,t){var r=this,i=t.airline,n=t.departureAirport,a=t.arrivalAirport,o=t.departurePeriod,s=t.hotsFilter,c=t.planeTypeCategory,l=t.bunkType,u=e.filter(function(e){return r.filterByStringArray(i,e.airline)&&r.filterByStringArray(n,e.departure.airportCode)&&r.filterByStringArray(a,e.arrival.airportCode)&&r.filterByDeparturePeriod(o,e.departure.dateTime)&&r.filterByFilterHots(s,e)&&r.filterByStringArray(c,e.planeTypeCategory)});return l.length?this.filterBunkType(u,l):u},r.filterByFilterHots=function(e,t){if(0===e.length)return!0;var r=t.stops;return!e.includes(a.OnlyNonStop)||0===r},r.filterByStringArray=function(e,t){return 0===e.length||e.includes(t)},r.filterByDeparturePeriod=function(e,t){var r=o,i=r.Night,n=r.Morning,a=r.Afternoon,s=r.Evening;return 0===e.length||e.includes(n)&&c.DateUtils.isWithinRangeByHours(t,6,12)||e.includes(a)&&c.DateUtils.isWithinRangeByHours(t,12,18)||e.includes(s)&&c.DateUtils.isWithinRangeByHours(t,18,24)||e.includes(i)&&c.DateUtils.isWithinRangeByHours(t,24,30)},r.filterBunkType=function(e,t){var r=[];return e.forEach(function(e){var i=e.bunks.filter(function(e){return t.toString().includes(e.bunkType)});i.length>0&&r.push(Object.assign({},e,{bunks:i}))}),r},r.createFilterSource=function(e){var r=new Map,i=new Map,n=new Map,a=new Map;return e.forEach(function(e){var t=e.airlineName,o=e.departure,s=e.arrival,c=e.planeTypeCategory;r.set(e.airline,t),i.set(o.airportCode,o.airportName),n.set(s.airportCode,s.airportName),c&&a.set(c,c)}),[{title:"热门",options:t.HotsFilterOptions,key:s.hotsFilter},{title:"起飞时间",options:t.DeparturePeriodOptions,key:s.departurePeriod},{title:"航空公司",options:this.getMapOptions(r),key:s.airline},{title:"所有机型",options:this.getMapOptions(a),key:s.planeTypeCategory},{title:"舱位",options:t.FlightBunkOptions,key:s.bunkType},{title:"出发机场",options:this.getMapOptions(i),key:s.departureAirport},{title:"到达机场",options:this.getMapOptions(n),key:s.arrivalAirport}]},r.getMapOptions=function(e){var t=[];return e.forEach(function(e,r){return t.push({label:e,value:r,checked:!1})}),t},e}();u=i([l.singleton(),n("design:paramtypes",[])],u),t.FlightFilterService=u},,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),n=r(36),a=r(32);t.createSmsCodeLoginForm=function(){var e=a.ThValidators,t=e.required,r={mobile:["",[t,e.mobile]],verificationCode:["",[t]],invitationCode:[],loginScene:["Normal"],operateSource:[i.OperateSource]};return n.fb.group(r)}},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(36),n=r(32);t.createApprovalForm=function(){var e=n.ThValidators.required,t={travelReason:[,e],travelFrom:[],travelDestination:[,e],travelDateStart:[,e],travelDateEnd:[,e],transport:[],projectId:[],employees:i.fb.array([]),memo:[]};return i.fb.group(t)},t.createApprovalTravelerForm=function(e){var t={departmentName:[e.departmentName],givenNameCn:[e.givenNameCn],givenNameEn:[e.givenNameEn],id:[e.id],name:[e.name],surnameCn:[e.surnameCn],surnameEn:[e.surnameEn]};return i.fb.group(t)},t.getApprovalFormValue=function(e){return Object.assign({},e.value)}},function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),a=r(32),o=r(5);function s(){return n.fb.group({docNo:[],docType:[]})}t.createForm=function(){var e=a.ThValidators,t=e.required,r=e.mobile,i=e.en,c=n.fb.control(!0),l=function(e){return c.value?t(e):null},u=function(e){return c.value?null:t(e)},p={department:[,t],mobile:[,[r]],employeeDocs:n.fb.array([s()]),gender:[],birthday:[],isNameCn:c,givenNameEn:[,[u,i]],surnameEn:[,[u,i]],givenNameCn:[,[l]],surnameCn:[,[l]]},f=n.fb.group(p);return c.valueChanges.pipe(o.startWith(c.value),o.distinctUntilChanged(),o.skip(1)).subscribe(function(e){var t=f.controls,r=t.givenNameCn,i=t.surnameCn,n=t.surnameEn,a=t.givenNameEn;e?(r.enable(),i.enable(),a.disable(),n.disable()):(r.disable(),i.disable(),a.enable(),n.enable())}),f},t.getFormValue=function(e){var t=e.value,r=t.department,n=t.isNameCn,a=t.employeeDocs,o=t.givenNameCn,s=t.givenNameEn,c=t.surnameCn,l=t.surnameEn,u=i(t,["department","isNameCn","employeeDocs","givenNameCn","givenNameEn","surnameCn","surnameEn"]),p=n?{givenNameCn:o,surnameCn:c}:{surnameEn:l,givenNameEn:s};return Object.assign({},u,{departmentId:r.id,departmentName:r.name,employeeDocs:a.filter(function(e){return e.docType||e.docNo})},p)}},function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),a=r(32),o=r(5);t.createForm=function(){var e=a.ThValidators,t=e.required,r=e.en,i=n.fb.control(!0),s=function(e){return i.value?t(e):null},c=function(e){return i.value?null:t(e)},l={id:[],isNameCn:i,givenNameEn:[,[c,r]],surnameEn:[,[c,r]],givenNameCn:[,[s]],surnameCn:[,[s]]},u=n.fb.group(l);return i.valueChanges.pipe(o.startWith(i.value),o.distinctUntilChanged(),o.skip(1)).subscribe(function(e){var t=u.controls,r=t.givenNameCn,i=t.surnameCn,n=t.surnameEn,a=t.givenNameEn;e?(r.enable(),i.enable(),a.disable(),n.disable()):(r.disable(),i.disable(),a.enable(),n.enable())}),u},t.getFormValue=function(e){var t=e.value,r=t.isNameCn,n=t.givenNameCn,a=t.givenNameEn,o=t.surnameCn,s=t.surnameEn,c=i(t,["isNameCn","givenNameCn","givenNameEn","surnameCn","surnameEn"]);return r?Object.assign({givenNameCn:n,surnameCn:o},c):Object.assign({surnameEn:s,givenNameEn:a},c)}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/traveler-list-management/traveler-list-management.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/traveler-list-management/traveler-list-management.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/traveler-list-management/traveler-list-management.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/address-list-management/address-list-management.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/address-list-management/address-list-management.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/address-list-management/address-list-management.wxss"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/invoice-list-management/invoice-list-management.json"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/invoice-list-management/invoice-list-management.wxml"},function(e,t,r){e.exports=r.p+"app/package-mine/pages/general-info-management/invoice-list-management/invoice-list-management.wxss"},,,,,,,function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-item/flight-item.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-item/flight-item.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-item/flight-item.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-attention/flight-attention.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-attention/flight-attention.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-attention/flight-attention.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-route-detail/flight-route-detail.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-route-detail/flight-route-detail.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-route-detail/flight-route-detail.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-filter-tab-bar/flight-filter-tab-bar.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-filter-tab-bar/flight-filter-tab-bar.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-list/components/flight-filter-tab-bar/flight-filter-tab-bar.wxss"},,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/cabin-list/cabin-list.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/cabin-list/cabin-list.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/cabin-list/cabin-list.wxss"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/bunk-policies-and-baggage/bunk-policies-and-baggage.json"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/bunk-policies-and-baggage/bunk-policies-and-baggage.wxml"},function(e,t,r){e.exports=r.p+"app/package-flight/pages/flight-bunk-list/components/bunk-policies-and-baggage/bunk-policies-and-baggage.wxss"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){e.exports=r.p+"app/pages/approval/approval-mine/approval-mine.json"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval-mine/approval-mine.wxml"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval-mine/approval-mine.wxss"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval-other/approval-other.json"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval-other/approval-other.wxml"},function(e,t,r){e.exports=r.p+"app/pages/approval/approval-other/approval-other.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/overrun-describe/overrun-describe.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/overrun-describe/overrun-describe.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/overrun-describe/overrun-describe.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-router-info-card/flight-router-info-card.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-router-info-card/flight-router-info-card.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-router-info-card/flight-router-info-card.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-router-info-card/hotel-router-info-card.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-router-info-card/hotel-router-info-card.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-router-info-card/hotel-router-info-card.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-order-detail/flight-order-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-order-detail/flight-order-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/flight-order-detail/flight-order-detail.wxss"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-order-detail/hotel-order-detail.json"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-order-detail/hotel-order-detail.wxml"},function(e,t,r){e.exports=r.p+"app/pages/authorize-process-detail/hotel-order-detail/hotel-order-detail.wxss"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(5),l=r(0),u=function(){function e(e,t,r){this.data=e,this.handleErrorService=t,this.pointsHttpService=r,this.searchParams={pageNumber:1,pageSize:20}}var t=e.prototype;return t.onLoad=function(){this.query(!1)},t.query=function(e){var t=this;this.showLoading(),this.getPointListRequest().pipe(c.finalize(function(){return t.hideLoading()}),c.catchError(function(e){return t.handleErrorService.handle(e)})).subscribe(function(r){t.setPointList(r,e)})},t.setPointList=function(e,t){if(t){var r=this.data.pointList.concat(e);this.setData({pointList:r})}else this.setData({pointList:e})},t.getPointListRequest=function(){var e=this;return this.pointsHttpService.queryPointsHistoryRecord(Object.assign({},this.searchParams)).pipe(c.tap(function(t){return e.totalElements=t.totalElements}),c.map(function(e){return e.content}))},t.onPullDownRefresh=function(){var e=this;this.searchParams.pageNumber=1,this.getPointListRequest().pipe(c.finalize(function(){wx.stopPullDownRefresh()}),c.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.setPointList(t,!1)})},t.onReachBottom=function(){this.data.pointList.length<this.totalElements?(wx.showLoading({title:"加载更多"}),this.searchParams.pageNumber+=1,this.query(!0)):wx.showToast({title:"没有更多数据了...",icon:"none"})},t.handToPointRulePage=function(){wx.navigateTo({url:"/app/package-mine/pages/point-rule/point-rule"})},e}();u=i([l.injectable(),s.loading,n("design:paramtypes",[function(){},o.HandleErrorService,a.PointsHttpService])],u),Page(l.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(5),c=r(22),l=r(0),u=function(){function e(e,t,r,i){this.data=e,this.loadingService=t,this.handleErrorService=r,this.pointsRuleHttpService=i}var t=e.prototype;return t.onLoad=function(){this.query()},t.query=function(){var e=this;this.loadingService.showLoading("请求中"),this.pointsRuleHttpService.getAll().pipe(s.finalize(function(){e.loadingService.hideLoading()}),s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({pointRules:t})})},e}();u=i([l.injectable(),n("design:paramtypes",[function(){this.pointRules=[],this.pointsMethod=c.PointsMethod},o.LoadingService,o.HandleErrorService,a.PointsRuleHttpService])],u),Page(l.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=function(){function e(e){this.data=e}var t=e.prototype;return t.onLoad=function(){},t.toFeedbackHistory=function(){wx.navigateTo({url:"/app/package-mine/pages/feedback-history/feedback-history"})},t.toFeedbackSheet=function(){wx.navigateTo({url:"/app/package-mine/pages/feedback-sheet/feedback-sheet"})},e}();o=i([a.injectable(),n("design:paramtypes",[function(){}])],o),Page(a.container.resolve(o))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(50),c=r(6),l=r(36),u=r(32),p=r(5),f=r(0),d=function(){function e(e,t,r,i,n,a,o,s){this.data=e,this.routerService=t,this.toastService=r,this.handleErrorService=i,this.validateService=n,this.ossUploadService=a,this.globalDataService=o,this.feedbackSheetHttpService=s,this.pictureUrls=[]}var t=e.prototype;return t.onLoad=function(){this.deviceInfo=this.globalDataService.getSysInfo().model;var e=this.globalDataService.getGlobalData().employeeInfo,t=e.surnameCn,r=e.givenNameCn,i=e.mobile;this.contactName=""+t+r,this.createForm(i),this.attachValueChanges()},t.attachValueChanges=function(){var e=this;this.form.valueChanges.pipe(p.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;c.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(p.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;c.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})})},t.createForm=function(e){var t=u.ThValidators.required;this.form=l.fb.group({description:[,[t]],contactTel:[e,[t]]})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.handleUpload=function(e){var t=this,r=e.detail,i=r.file,n=r.name;"image"===i.type?this.ossUploadService.ossUpload(i.url,n,function(e){var r=t.data.fileList;r.push(Object.assign({},i)),t.setData({fileList:r}),t.pictureUrls.push(e)}):this.toastService.error("请选择正确的图片")},t.handleRemoveFile=function(e){var t=e.detail.index,r=this.data.fileList;r.splice(t,1),this.setData({fileList:r}),this.pictureUrls.splice(t,1)},t.handleSubmit=function(){var e=this,t=this.form,r=this.pictureUrls,i=this.deviceInfo,n=this.contactName;if(!c.FormUtils.validate(t)){var a=this.validateService.getErrorMsgs(t);return this.setData({formData:t.value,errMsgs:a}),void this.toastService.error("请检查表单内容")}var o=Object.assign({},this.form.value,{pictureUrls:r,deviceInfo:i,contactName:n});this.showLoading("保存中"),this.feedbackSheetHttpService.create(o).pipe(p.finalize(function(){return e.hideLoading()}),p.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("反馈成功"),setTimeout(function(){e.routerService.toBack()},100)})},e}();d=i([f.injectable(),c.loading,n("design:paramtypes",[function(){this.fileList=[]},o.RouterService,o.ToastService,o.HandleErrorService,u.ValidateService,o.OssUploadService,s.GlobalDataService,a.FeedbackSheetHttpService])],d),Page(f.container.resolve(d))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(0),u=function(){function e(){this.acceptedImageUrl=c.OSSPrefix+"/common/accepted.svg",this.scrollTop=0,this.list=[]}var t,r,n;return t=e,(r=[{key:"listHasContent",get:function(){var e=this.list;return e&&e.length>0}},{key:"listIsEmpty",get:function(){var e=this.list;return e&&0===e.length}}])&&i(t.prototype,r),n&&i(t,n),e}(),p=function(e){var t,r;function i(t,r,i){var n;return(n=e.call(this,i)||this).data=t,n.feedbackSheetQueryHttpService=r,n.httpRequest=n.feedbackSheetQueryHttpService.query.bind(n.feedbackSheetQueryHttpService),n}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.onLoad=function(){this.query()},n.getQueryParams=function(){return{}},n.handleScrollToLower=function(){this.loadMore()},n.toFeedbackDetail=function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/package-mine/pages/feedback-detail/feedback-detail?id="+t})},i}(c.PaginationPage);p=n([l.injectable(),a("design:paramtypes",[u,o.FeedbackSheetQueryHttpService,s.HandleErrorService])],p),Page(l.container.resolve(p))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(5),l=r(0),u=function(){function e(e,t,r){this.data=e,this.handleErrorService=t,this.feedbackSheetQueryHttpService=r}var t=e.prototype;return t.onLoad=function(e){this.feedbackId=e.id,this.getFeedbackDetail()},t.getFeedbackDetail=function(){var e=this;this.showLoading("请求中"),this.feedbackSheetQueryHttpService.queryDetail({id:this.feedbackId}).pipe(c.finalize(function(){e.hideLoading()}),c.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){t.history=t.history.reverse(),e.setData({feedbackDetail:t})})},t.handleShowPopup=function(e){var t=e.currentTarget.dataset.src;this.setData({showPopup:!0,currentImage:t})},t.handleClose=function(){this.setData({showPopup:!1})},e}();u=i([l.injectable(),s.loading,n("design:paramtypes",[function(){this.acceptedImageUrl=s.OSSPrefix+"/common/accepted.svg",this.showPopup=!1},o.HandleErrorService,a.FeedbackSheetQueryHttpService])],u),Page(l.container.resolve(u))},function(e,t,r){"use strict";Page({})},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(6),s=r(5),c=r(0),l=r(8),u=function(){function e(e,t,r){this.data=e,this.handleErrorService=t,this.policyDisplayHttpService=r,this.overrunPolicyOptions={WarningAndAuthorize:"仅超标需要授权",WarningOnly:"超标仅需提醒，无需授权",AuthorizeCompulsively:"订单均需授权",Forbidden:"超标禁止下单"}}var t=e.prototype;return t.onLoad=function(){},t.onShow=function(){this.getTravelPolicyDetail()},t.getTravelPolicyDetail=function(){var e=this;this.policyDisplayHttpService.getClusteredPolicy({}).pipe(s.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){var r=t.notifyPolicy,i=t.travelPolicy,n=t.approvalPolicy,a=t.authorizePolicy;e.setApprovalRuleInfo(n),e.setAuthorizeRuleInfo(a),e.setNotifyRuleInfo(r),e.setData({travelPolicyName:i.configName,flightPolicy:i.domesticFlightPolicy.policyConfig,hotelPolicy:i.domesticHotelPolicy.policyConfig})})},t.setApprovalRuleInfo=function(e){if(e){var t=e.approvalEnabled,r=e.approvalRequired,i=e.approvalPassedRequired,n=e.approvalProcess,a={approvalEnabled:t,approvalRequiredDescribe:r?"预订时必须填入出差审批单":"预订时可以选填出差审批单",approvalPassedRequiredDescribe:i?"预订时必须选择审批通过的出差申请单":"预订时可选未审批或审批通过的出差申请单，但需要审批通过才能出票",firstAuditEmployees:this.getAuditEmployee(n.firstAuditEmployees),secondAuditEmployees:this.getAuditEmployee(n.secondAuditEmployees)};this.setData({approvalRuleInfo:a})}},t.setAuthorizeRuleInfo=function(e){if(e){var t=e.authorizeEnabled,r=e.overrunPolicyOption,i=e.authorizeProcess,n={authorizeEnabled:t,overrunPolicyDescribe:this.overrunPolicyOptions[r],firstAuditEmployees:this.getAuditEmployee(i.firstAuditEmployees),secondAuditEmployees:this.getAuditEmployee(i.secondAuditEmployees)};this.setData({authorizeRuleInfo:n})}},t.setNotifyRuleInfo=function(e){if(e){var t=e.enabled,r=e.notifyProcess,i={enabled:t,notifierEmployees:this.getAuditEmployee(r.notifierEmployees)};this.setData({notifyRuleInfo:i})}},t.getAuditEmployee=function(e){return e&&e.length?e.map(function(e){return e.name}).join(","):"暂无"},e}();u=i([c.injectable(),n("design:paramtypes",[function(){this.prefixAreaUrl=o.OSSPrefix+"/prefix-area.png",this.postfixAreaUrl=o.OSSPrefix+"/postfix-area.png"},l.HandleErrorService,a.PolicyDisplayHttpService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(109),o=r(14),s=r(8),c=r(6),l=r(5),u=r(0),p=function(){function e(e,t,r,i,n,a,o,s){this.data=e,this.toastService=t,this.tokenService=r,this.handleErrorService=i,this.routerService=n,this.accountInfoHttpService=a,this.employeeHttpService=o,this.invitationsService=s}var t=e.prototype;return t.onLoad=function(){},t.onShow=function(){this.getAccountInfo(),this.getEmployeeInfo(),this.getAllInvitationsCount()},t.getAllInvitationsCount=function(){var e=this;this.invitationsService.getAllInvitationsCount().subscribe(function(t){e.setData({invitationCount:t})})},t.handleShowInvitations=function(){this.setData({showInvitations:!0})},t.getAccountInfo=function(){var e=this;this.accountInfoHttpService.getAccountBasicInfo().pipe(l.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({accountMobile:t.mobile})})},t.getEmployeeInfo=function(){var e=this;this.employeeHttpService.getEmployeeInfo().pipe(l.catchError(function(t){throw 401===t.code&&e.setData({employeeInfo:void 0}),e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({employeeInfo:t})})},t.unsupportedToast=function(){this.toastService.info("该功能正在紧急开发中！")},t.loginOut=function(){this.tokenService.clearToken(),this.routerService.toAuthorizeLogin()},t.toEmployeeRoles=function(){wx.navigateTo({url:"/app/package-mine/pages/employee-roles/employee-roles"})},t.toResetPassword=function(){wx.navigateTo({url:"/app/package-mine/pages/modify-password/modify-password"})},e}();p=i([u.injectable(),n("design:paramtypes",[function(){this.tipIcon=c.OSSPrefix+"/common/tip-icon.svg",this.userSexIcon={Male:c.OSSPrefix+"/common/user-thumbnail-male.svg",Female:c.OSSPrefix+"/common/user-thumbnail-female.svg",default:c.OSSPrefix+"/common/user-thumbnail.svg"},this.invitationCount=0,this.showInvitations=!1},s.ToastService,s.TokenService,s.HandleErrorService,s.RouterService,a.FrontAccountInfoHttpService,o.EmployeeHttpService,s.InvitationsService])],p),Page(u.container.resolve(p))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(109),o=r(8),s=r(6),c=r(36),l=r(32),u=r(5),p=r(22),f=r(0),d=function(){function e(e,t,r,i,n,a,o,s){this.data=e,this.toastService=t,this.handleErrorService=r,this.routerService=i,this.validateService=n,this.frontPasswordHttpService=a,this.accountInfoHttpService=o,this.frontVerificationCodeHttpService=s,this.scene=p.VerificationCodeScene.ResetPassword}var t=e.prototype;return t.onLoad=function(){this.getAccountInfo(),this.createForm(),this.attachValueChanges()},t.onShow=function(){},t.getAccountInfo=function(){var e=this;this.accountInfoHttpService.getAccountBasicInfo().pipe(u.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({accountMobile:t.mobile})})},t.createForm=function(){var e=l.ThValidators,t=e.required,r=e.password;this.form=c.fb.group({password:[,[t,r]],repeatPassword:[,[t,r]],verificationCode:[,t]})},t.attachValueChanges=function(){var e=this,t=this.form.controls,r=t.repeatPassword,i=t.password;this.form.valueChanges.pipe(u.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;s.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(u.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;s.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})}),i.valueChanges.pipe(u.distinctUntilChanged()).subscribe(function(e){e!==r.value&&r.value?r.setErrors({repeatPassword:"两次密码输入不一致"}):r.setErrors(null)}),r.valueChanges.pipe(u.distinctUntilChanged()).subscribe(function(e){e!==i.value&&i.value?r.setErrors({repeatPassword:"两次密码输入不一致"}):r.setErrors(null)})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.sendVerificationCode=function(){var e=this,t={scene:this.scene,mobile:this.data.accountMobile};this.showLoading("发送中"),this.frontVerificationCodeHttpService.sendVerificationCode(t).pipe(u.finalize(function(){e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.toastService.success("验证码已发送"),e.setData({countTime:t.coolDownTime,codeText:"重新获取"}),e.countdown()})},t.handleSubmit=function(){var e=this;if(!s.FormUtils.validate(this.form))return this.form.updateValueAndValidity(),void this.toastService.error("请检查表单内容");var t=this.form.value,r=t.verificationCode,i=t.password,n={mobile:this.data.accountMobile,verificationCode:r,password:i};this.showLoading("修改中"),this.frontPasswordHttpService.resetPassword(n).pipe(u.finalize(function(){e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("密码已重置"),setTimeout(function(){e.routerService.toBack()},1e3)})},t.handleCleartext=function(){this.setData({isPassword:!this.data.isPassword})},t.countdown=function(){var e=this;setTimeout(function(){var t=e.data.countTime;(t-=1)>=0&&e.setData({countTime:t}),t>0&&e.countdown()},1e3)},e}();d=i([f.injectable(),s.loading,n("design:paramtypes",[function(){this.isPassword=!0,this.codeText="获取验证码"},o.ToastService,o.HandleErrorService,o.RouterService,l.ValidateService,a.FrontPasswordHttpService,a.FrontAccountInfoHttpService,a.FrontVerificationCodeHttpService])],d),Page(f.container.resolve(d))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(5),l=r(22),u=r(72),p=r(0),f=function(){function e(e,t,r,i,n,a,o,s){this.data=e,this.toastService=t,this.tokenService=r,this.handleErrorService=i,this.routerService=n,this.employeeRoleHttpService=a,this.employeeInvitationHttpService=o,this.loginService=s,this.corpNameOps={[l.CorpType.SK]:"特航个人会员",[l.CorpType.GovernmentSK]:"公务员个人会员",[l.CorpType.Corporation]:"",[l.CorpType.Government]:""}}var t=e.prototype;return t.onLoad=function(){},t.onShow=function(){this.getRoleList(),this.getInvitationList()},t.getRoleList=function(){var e=this;this.showLoading(),this.employeeRoleHttpService.getEmployeeRoles().pipe(c.map(function(t){return t.map(function(t){var r=t.corpType,i=e.corpNameOps[r]||t.corpName;return Object.assign({},t,{corpName:i})})}),c.finalize(function(){return e.hideLoading()}),c.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({employeeRoleList:t})})},t.handleSelectRole=function(e){var t=this,r=e.currentTarget.dataset.id;this.data.employeeRoleList.find(function(e){return e.currentChosen}).employeeId!==r&&(this.showLoading("切换中"),this.employeeRoleHttpService.chooseEmployeeRole({employeeId:r}).pipe(c.tap(function(e){t.tokenService.saveToken(e.token)}),c.switchMap(function(){return t.loginService.getEmployeeInfoRequest()}),c.finalize(function(){return t.hideLoading()}),c.catchError(function(e){throw t.handleErrorService.handle(e)})).subscribe(function(e){e&&(t.toastService.success("切换成功"),setTimeout(function(){t.routerService.toHome()},1e3))}))},t.getInvitationList=function(){var e=this;this.getInvitationListRequest().pipe(c.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({invitationList:t})})},t.getInvitationListRequest=function(){return this.employeeInvitationHttpService.getPendingInvitations()},t.handleAcceptInvitation=function(){var e=this;this.employeeInvitationHttpService.acceptInvitations({invitationCode:this.data.selectedInvitation.invitationCode}).pipe(c.switchMap(function(){return e.getInvitationListRequest()}),c.catchError(function(e){throw e})).subscribe(function(t){e.setData({invitationList:t}),e.getRoleList(),e.handleHideOverlay()})},t.handleRefuseInvitation=function(){var e=this;this.employeeInvitationHttpService.refuseInvitations({invitationCode:this.data.selectedInvitation.invitationCode}).pipe(c.switchMap(function(){return e.getInvitationListRequest()}),c.catchError(function(e){throw e})).subscribe(function(t){e.setData({invitationList:t}),e.handleHideOverlay()})},t.handleShowOverlay=function(e){var t=e.currentTarget.dataset.invitation;this.setData({showInvitation:!0,selectedInvitation:t})},t.handleHideOverlay=function(){this.setData({showInvitation:!1,selectedInvitation:void 0})},e}();f=i([p.injectable(),s.loading,n("design:paramtypes",[function(){this.modalHeaderIconUrl=s.OSSPrefix+"/common/modal-icon-message.png"},o.ToastService,o.TokenService,o.HandleErrorService,o.RouterService,a.EmployeeRoleHttpService,a.EmployeeInvitationHttpService,u.LoginService])],f),Page(p.container.resolve(f))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(6),s=function(){function e(e){this.data=e,this.navigateArray=["traveler-detail-modify/traveler-detail-modify","address-detail-modify/address-detail-modify","invoice-detail-modify/invoice-detail-modify"]}var t=e.prototype;return t.onLoad=function(){},t.onShow=function(){},t.handleChangeTab=function(e){var t=e.currentTarget.dataset.index;this.setData({selectedIndex:t})},t.toAddPage=function(){var e=this.navigateArray[this.data.selectedIndex];wx.navigateTo({url:"/app/package-mine/pages/"+e})},e}();s=i([a.injectable(),n("design:paramtypes",[function(){this.selectedIndex=0,this.addBtnUrl=o.OSSPrefix+"/common/fill-add.png"}])],s),Page(a.container.resolve(s))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(36),l=r(32),u=r(90),p=r(5),f=r(22),d=r(0),h=r(765),v=r(766),g=function(){function e(e,t,r,i,n,a){this.data=e,this.toastService=t,this.handleErrorService=r,this.validateService=i,this.frequentTravellerHttpService=n,this.travellerDetailModifyService=a}var t=e.prototype;return t.onLoad=function(e){this.travelerId=e.id,this.form=h.createTravelerForm(),this.attachValueChanges(),this.travelerId&&(wx.setNavigationBarTitle({title:"编辑常用旅客"}),this.getTravelerDetail())},t.getTravelerDetail=function(){var e=this;this.showLoading("请求中···"),this.frequentTravellerHttpService.get(this.travelerId).pipe(p.finalize(function(){return e.hideLoading()}),p.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.setTravelerDetail(t)})},t.setTravelerDetail=function(e){var t=e.surnameCn,r=e.givenNameCn,i=e.docs,n=""+(t||"")+(r||""),a=i?i.map(function(){return h.createTravelerDocForm()}):[h.createTravelerDocForm()];this.form.controls.docs=c.fb.array(a),this.form.patchValue({nameAll:n}),this.form.patchValue(Object.assign({},e))},t.attachValueChanges=function(){var e=this,t=this.form.controls.nameAll;this.form.valueChanges.pipe(p.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;s.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(p.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;s.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})}),t.valueChanges.pipe(p.distinctUntilChanged(),p.filter(function(e){return!!e})).subscribe(function(r){if(t.valid){var i=r[0],n=s.PinYinUtils.toPinyin(i).toUpperCase(),a=r.slice(1),o=s.PinYinUtils.toPinyin(a).toUpperCase();e.form.patchValue({surnameCn:i,givenNameCn:a,surnameEn:n,givenNameEn:o})}})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.handleDocNoInput=function(e){var t=e.currentTarget.dataset.index,r=e.detail.value;this.form.controls.docs.at(t).patchValue({docNo:r}),this.form.updateValueAndValidity()},t.handleRemoveDoc=function(e){var t=e.currentTarget.dataset.index;this.form.controls.docs.removeAt(t),this.form.updateValueAndValidity()},t.handleAddDoc=function(){this.form.controls.docs.push(h.createTravelerDocForm()),this.form.updateValueAndValidity()},t.showPicker=function(e){var t=e.currentTarget.dataset.key;switch(this.pickerIndex=e.currentTarget.dataset.index||0,t){case"doctype":this.setData({showDocTypePicker:!0});break;case"nationality":this.setData({showNationalityPicker:!0});break;case"birthday":this.setData({showBirthdayPicker:!0});break;case"expired":this.setData({showExpiredDatePicker:!0})}},t.handleClosePicker=function(){this.setData({showDocTypePicker:!1,showNationalityPicker:!1,showBirthdayPicker:!1,showExpiredDatePicker:!1})},t.handleChangeGender=function(e){var t=e.currentTarget.dataset.gender;this.form.patchValue({gender:t})},t.handleConfirmBirthday=function(e){var t=e.detail,r=s.DateUtils.format(t,"yyyy-MM-dd");this.form.patchValue({birthday:r}),this.handleClosePicker()},t.handleConfirmExpiredDate=function(e){var t=e.detail,r=s.DateUtils.format(t,"yyyy-MM-dd");this.updateDocFormArray({expiredDate:r}),this.handleClosePicker()},t.handleConfirmDocType=function(e){var t=e.detail;this.updateDocFormArray({docType:t.code}),this.handleClosePicker()},t.handleConfirmNationality=function(e){var t=e.detail;this.form.patchValue({nationality:t.code}),this.handleClosePicker()},t.updateDocFormArray=function(e){var t=this.form.controls.docs,r=this.pickerIndex;t.at(r).patchValue(Object.assign({},e)),this.form.updateValueAndValidity()},t.handleSubmit=function(){var e=this;if(!s.FormUtils.validate(this.form))return this.form.updateValueAndValidity(),void this.toastService.error("请检查表单内容");u.default.confirm({message:"是否保存本次编辑结果？"}).then(function(){e.travelerId?e.updateTraveler():e.addTraveler()}).catch(function(){})},t.addTraveler=function(){var e=this,t=h.getTravelerFormValue(this.form);this.showLoading("添加中···"),this.frequentTravellerHttpService.create(t).pipe(p.finalize(function(){e.hideLoading()}),p.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(r){e.toastService.success("添加成功"),setTimeout(function(){e.travellerDetailModifyService.confirm(Object.assign({},t,{id:r}))},1e3)})},t.updateTraveler=function(){var e=this,t=h.getTravelerFormValue(this.form);this.showLoading("更新中···"),this.frequentTravellerHttpService.update(t).pipe(p.finalize(function(){e.hideLoading()}),p.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("更新成功"),setTimeout(function(){e.travellerDetailModifyService.confirm(t)},1e3)})},e}();g=i([d.injectable(),s.loading,n("design:paramtypes",[function(){this.Gender=f.Gender,this.birthdayPickerOptions={currentDate:new Date(s.DateUtils.addYears(new Date,-18)).getTime(),maxDate:(new Date).getTime(),minDate:new Date(s.DateUtils.addYears(new Date,-100)).getTime()},this.expiredDatePickerOptions={currentDate:(new Date).getTime(),maxDate:new Date(s.DateUtils.addYears(new Date,10)).getTime(),minDate:(new Date).getTime()}},o.ToastService,o.HandleErrorService,l.ValidateService,a.FrequentTravellerHttpService,v.TravellerDetailModifyService])],g),Page(d.container.resolve(g))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(32),l=r(90),u=r(5),p=r(0),f=r(767),d=function(){function e(e,t,r,i,n,a){this.data=e,this.toastService=t,this.routerService=r,this.validateService=i,this.handleErrorService=n,this.customerAddressHttpService=a}var t=e.prototype;return t.onLoad=function(e){this.form=f.createAddressForm(),this.attachValueChanges(),e.address&&(this.addressDetail=JSON.parse(e.address),wx.setNavigationBarTitle({title:"编辑配送地址"}),this.form.patchValue(Object.assign({},this.addressDetail)))},t.onShow=function(){},t.attachValueChanges=function(){var e=this;this.form.valueChanges.pipe(u.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;s.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(u.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;s.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.handleSwitchDefaulted=function(){var e=this.form.value.defaulted;this.form.patchValue({defaulted:!e})},t.handleShowPicker=function(){this.setData({showAreaPicker:!0})},t.handleClosePicker=function(){this.setData({showAreaPicker:!1})},t.handleConfirmArea=function(e){var t=e.detail[0].name,r=e.detail[1].name,i=e.detail[2].name;this.form.patchValue({province:t,city:r,area:i}),this.handleClosePicker()},t.handleSubmit=function(){var e=this;if(!s.FormUtils.validate(this.form))return this.form.updateValueAndValidity(),void this.toastService.error("请检查表单内容");l.default.confirm({message:"是否保存本次编辑结果？"}).then(function(){e.addressDetail?e.updateAddress():e.addAddress()}).catch(function(){})},t.updateAddress=function(){var e=this,t=Object.assign({},this.addressDetail,f.getAddressFormValue(this.form));this.showLoading("更新中···"),this.customerAddressHttpService.update(t).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("更新成功"),setTimeout(function(){e.routerService.toBack()},1e3)})},t.addAddress=function(){var e=this,t=f.getAddressFormValue(this.form);this.showLoading("添加中···"),this.customerAddressHttpService.create(t).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("添加成功"),setTimeout(function(){e.routerService.toBack()},1e3)})},e}();d=i([p.injectable(),s.loading,n("design:paramtypes",[function(){},o.ToastService,o.RouterService,c.ValidateService,o.HandleErrorService,a.CustomerAddressHttpService])],d),Page(p.container.resolve(d))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(32),l=r(90),u=r(5),p=r(22),f=r(0),d=r(768),h=r(306),v=function(){function e(e,t,r,i,n,a){this.data=e,this.toastService=t,this.validateService=r,this.handleErrorService=i,this.customerInvoiceHttpService=n,this.invoiceDetailModifyService=a}var t=e.prototype;return t.onLoad=function(e){this.form=d.createInvoiceForm(),this.attachValueChanges(),e.invoice&&(this.invoiceDetail=JSON.parse(e.invoice),wx.setNavigationBarTitle({title:"编辑发票"}),this.form.patchValue(Object.assign({},this.invoiceDetail)))},t.onShow=function(){},t.attachValueChanges=function(){var e=this,t=this.form.controls,r=t.type,i=t.registrationNo;this.form.valueChanges.pipe(u.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;s.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(u.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;s.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})}),r.valueChanges.pipe(u.distinctUntilChanged()).subscribe(function(e){e===p.InvoiceType.Corporation?(i.setValidators([c.ThValidators.required]),i.enable()):(i.clearValidators(),i.disable()),i.updateValueAndValidity()})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.handleChangeType=function(e){var t=e.currentTarget.dataset.type;this.form.patchValue({type:t})},t.handleSwitchDefaulted=function(){var e=this.form.value.defaulted;this.form.patchValue({defaulted:!e})},t.handleSubmit=function(){var e=this;if(!s.FormUtils.validate(this.form))return this.form.updateValueAndValidity(),void this.toastService.error("请检查表单内容");l.default.confirm({message:"是否保存本次编辑结果？"}).then(function(){e.invoiceDetail?e.updateInvoice():e.addInvoice()}).catch(function(){})},t.addInvoice=function(){var e=this,t=Object.assign({},d.getInvoiceFormValue(this.form));this.showLoading("提交中···"),this.customerInvoiceHttpService.create(t).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("新增成功"),setTimeout(function(){e.invoiceDetailModifyService.confirm(t)},1e3)})},t.updateInvoice=function(){var e=this,t=Object.assign({},d.getInvoiceFormValue(this.form));this.showLoading("提交中···"),this.customerInvoiceHttpService.update(t).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("保存成功"),setTimeout(function(){e.invoiceDetailModifyService.confirm(t)},1e3)})},e}();v=i([f.injectable(),s.loading,n("design:paramtypes",[function(){this.InvoiceType=p.InvoiceType},o.ToastService,c.ValidateService,o.HandleErrorService,a.CustomerInvoiceHttpService,h.InvoiceDetailModifyService])],v),Page(f.container.resolve(v))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),s=r(6),c=r(16),l=r(5),u=r(22),p=r(0),f=r(307),d=r(111),h=function(){function e(){this.travelTypeEnum=u.TravelType,this.flightCitySwitchIcon=s.OSSPrefix+"/flight/flight-round.svg",this.flightBanner=s.OSSPrefix+"/flight/flight-search-banner.png",this.checkboxIcons={checked:s.OSSPrefix+"/common/checked.svg",unchecked:s.OSSPrefix+"/common/unchecked.svg"},this.maxDate=s.DateUtils.addYears(new Date,1).valueOf(),this.pickedDays=[],this.bunkFilter=d.FlightBunkOptions[0],this.bunkOptions=d.FlightBunkOptions}var t,r,n;return t=e,(r=[{key:"calendarDefaultDate",get:function(){var e=this.pickedDays,t=this.isRoundTrip;if(!e)return null;var r=e[0],i=e[1],n=r?new Date(s.DateUtils.format(r)).valueOf():(new Date).valueOf(),a=new Date(s.DateUtils.format(i)).valueOf();return t?[n,a]:n}},{key:"totalDays",get:function(){var e=this.pickedDays,t=this.isRoundTrip,r=e[0],i=e[1];return t&&r&&i?s.DateUtils.differenceInDays(i,r):0}}])&&i(t.prototype,r),n&&i(t,n),e}(),v=function(){function e(e,t,r,i,n){this.data=e,this.locationService=t,this.routerService=r,this.airportsService=i,this.globalDataService=n}var t=e.prototype;return t.onLoad=function(){var e=wx.getStorageSync(d.FLIGHT_SEARCH_PARAMS_CACHE);e?this.initFlightParamsByCache(e):(this.setDefaultCity(),this.setDefaultDate(),this.setDefaultTravelType())},t.setDefaultTravelType=function(){var e=this.globalDataService,t=e.defaultTravelType,r=e.travelTypeChangeable;this.setData({isOnBusiness:t===u.TravelType.OnBusiness,travelTypeChangeable:r})},t.setDefaultDate=function(){var e=s.DateUtils.addDays(new Date,2),t=s.DateUtils.addDays(new Date,4);this.setData({pickedDays:[s.DateUtils.format(e),s.DateUtils.format(t)]})},t.setDefaultCity=function(){var e=this;wx.showLoading({title:"定位中"}),this.locationService.getCurrentAddressWithBaiDuCoords().pipe(l.catchError(function(e){return c.of({address_component:{city:"深圳"}})}),l.switchMap(function(t){return e.processWithCityInfo(t)})).subscribe(function(t){var r=d.DEFAULT_CITY_LIST[0],i=d.DEFAULT_CITY_LIST[1];t.cityInfo&&(r=Object.assign({},t.cityInfo,{isCity:!0}),i=d.DEFAULT_CITY_LIST.find(function(e){return e.cityName!==t.cityInfo.cityName})),e.setData({arrivalAirport:i,departureAirport:r}),wx.hideLoading()})},t.processWithCityInfo=function(e){var t=e.address_component.city.replace(/市/,"");return this.airportsService.getAirportsByKeyword({keyword:t}).pipe(l.map(function(r){return{cityInfo:(r||[]).find(function(e){return e.cityName===t}),address:e}}))},t.handleChangeRoundTrip=function(e){var t=e.currentTarget.dataset.roundtrip;this.setData({isRoundTrip:t})},t.handleChangeTravelType=function(e){var t=e.currentTarget.dataset.type;this.setData({isOnBusiness:t===u.TravelType.OnBusiness})},t.handleSwitchCity=function(){var e=this.data,t=e.departureAirport,r=e.arrivalAirport;this.setData({departureAirport:r,arrivalAirport:t})},t.handleSelectBunk=function(e){var t=e.currentTarget.dataset.index;this.setData({bunkFilter:d.FlightBunkOptions[t]}),this.handleCloseBunkSheet()},t.handleShowBunkSheet=function(){this.setData({showBunkSheet:!0})},t.handleCloseBunkSheet=function(){this.setData({showBunkSheet:!1})},t.handleChooseDate=function(){this.setData({calenderVisible:!0})},t.handleDateClose=function(){this.setData({calenderVisible:!1})},t.handleDateSelect=function(e){var t=[];if(this.data.isRoundTrip){var r=e.detail,i=r[0],n=r[1];t=[s.DateUtils.format(i),s.DateUtils.format(n)]}else{var a=e.detail;t=[s.DateUtils.format(a)]}this.setData({pickedDays:t}),this.handleConfirmSelected()},t.handleConfirmSelected=function(){var e=this.data,t=e.pickedDays,r=e.isRoundTrip,i=t[0],n=t[1];r?i&&n&&this.handleDateClose():this.handleDateClose()},t.handleToCityPage=function(e){var t=e.currentTarget.dataset.type;wx.navigateTo({url:"/app/package-flight/pages/airports/airports?type="+t})},t.handleToFlightList=function(){var e=this.data,t=e.isOnBusiness,r=e.arrivalAirport,i=e.departureAirport,n=e.pickedDays,a=e.bunkFilter,o=e.isRoundTrip;if(!o||n[1]){var s={isOnBusiness:!!t,arrivalAirport:r,departureAirport:i,pickedDays:n,bunkFilter:a,isRoundTrip:o};this.cacheFlightSearchParams(s),this.routerService.flight.toSearchList(s)}else wx.showToast({title:"请选择返程日期"})},t.cacheFlightSearchParams=function(e){wx.setStorageSync(d.FLIGHT_SEARCH_PARAMS_CACHE,e)},t.initFlightParamsByCache=function(e){var t=e.isOnBusiness,r=e.arrivalAirport,i=e.departureAirport,n=e.pickedDays,a=e.bunkFilter,o=e.isRoundTrip,s=this.globalDataService.travelTypeChangeable;this.setData({isOnBusiness:!!s&&t,travelTypeChangeable:s,arrivalAirport:r,departureAirport:i,pickedDays:n,bunkFilter:a,isRoundTrip:o}),new Date>new Date(n[0])&&this.setDefaultDate()},e}();v=n([p.injectable(),a("design:paramtypes",[h,o.LocationService,o.RouterService,f.AirportsService,o.GlobalDataService])],v),Page(p.container.resolve(v))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),s=r(6),c=r(16),l=r(5),u=r(22),p=r(0),f=r(307),d=function(){function e(e,t,r){this.data=e,this.airportsService=t,this.handleErrorService=r,this.scrollTop=0,this.keyword$=new c.ReplaySubject(1)}var t=e.prototype;return t.onLoad=function(e){this.cityType=e.type,this.citySelectedHistoryByCache(),this.getAirportsList(),this.subscribeInputValue()},t.onPageScroll=function(e){this.scrollTop=e.scrollTop},t.getLayoutNode=function(){var e=this,t=wx.createSelectorQuery();t.select("#keyword-search").boundingClientRect(),t.select("#city-letter-container").boundingClientRect().exec(function(t){e.setData({keywordSearchNodeHeight:t[0].height,cityLetterNodeHeight:t[1].height})})},t.getAirportsList=function(){var e=this;this.showLoading("数据加载中"),this.airportsService.getAirports().pipe(l.finalize(function(){return e.hideLoading()}),l.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){var r=new Map;t.forEach(function(e){if(!r.has(e.cityCode)){e.name;var t=a(e,["name"]);t.cityFirstLetter=t.cityFirstLetter||"a",r.set(e.cityCode,Object.assign({},t,{isCity:!0}))}});var i=Array.from(r.values()).sort(function(e,t){return u.sortByLetter(e.cityFirstLetter,t.cityFirstLetter)});e.handleSortCityByFirstLetter(i),e.handleHotCity(i),e.getLayoutNode()})},t.handleSortCityByFirstLetter=function(e){var t=new Map;e.forEach(function(e){var r=e.cityFirstLetter?e.cityFirstLetter.toString().toUpperCase():"";t.has(r)?t.get(r).push(e):t.set(r,[e])});var r=Array.from(t.keys()),i=Array.from(t);this.setData({letterList:r,sortCityList:i})},t.handleHotCity=function(e){var t=this.airportsService.getHotAirportCity(e);this.setData({hotCityList:t})},t.handleSelectedLetter=function(e){var t=this,r=e.currentTarget.dataset.anchor;wx.createSelectorQuery().select("#anchor-"+r).boundingClientRect().exec(function(e){var r=t.data,i=r.cityLetterNodeHeight+r.keywordSearchNodeHeight;wx.pageScrollTo({scrollTop:t.scrollTop+e[0].top-i,duration:300})})},t.handleSelectSearchCity=function(e){var t=e.currentTarget.dataset.index,r=this.data.searchResultList[t];this.handleSetDataSelected(r)},t.handleSelectHistoryCity=function(e){var t=e.currentTarget.dataset.index,r=this.data.historyList[t];this.handleSetDataSelected(r)},t.handleSelectHotCity=function(e){var t=e.currentTarget.dataset.index,r=this.data.hotCityList[t];this.handleSetDataSelected(r)},t.handleSelectSortCity=function(e){var t=e.currentTarget.dataset.current,r=t[0],i=t[1],n=this.data.sortCityList[r][1][i];this.handleSetDataSelected(n)},t.handleSetDataSelected=function(e){var t=getCurrentPages(),r=t[t.length-2];"departure"===this.cityType?r.setData({departureAirport:e}):"arrival"===this.cityType&&r.setData({arrivalAirport:e}),this.citySelectedCache(e),wx.navigateBack({delta:1})},t.handleKeywordInput=function(e){var t=e.detail;t?(this.keyword$.next(t),this.setData({isSearchMode:!0})):this.setData({isSearchMode:!1})},t.subscribeInputValue=function(){var e=this;this.keyword$.pipe(l.debounceTime(300),l.map(function(e){return e.trim()}),l.distinctUntilChanged(),l.switchMap(function(t){return e.showLoading("搜索中···"),e.airportsService.getAirportsByKeyword({keyword:t})}),l.catchError(function(t){return e.hideLoading(),e.handleErrorService.handle(t)})).subscribe(function(t){e.hideLoading(),e.setData({searchResultList:t})})},t.handleSearchCity=function(e){var t=e.currentTarget.dataset.keyword;t?(this.setData({keyword:t}),this.keyword$.next(t),this.setData({isSearchMode:!0})):this.setData({isSearchMode:!1})},t.citySelectedCache=function(e){var t=this.data.historyList,r=t.findIndex(function(t){return t.cityCode===e.cityCode}),i=[];r>0&&t.splice(r,1),(i=[e].concat(t)).length>8&&i.pop(),wx.setStorageSync("city-selected-history",i)},t.citySelectedHistoryByCache=function(){var e=wx.getStorageSync("city-selected-history");e&&this.setData({historyList:e})},e}();d=i([p.injectable(),s.loading,n("design:paramtypes",[function(){this.letterList="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),this.keyword="",this.historyList=[],this.sortCityList=[]},f.AirportsService,o.HandleErrorService])],d),Page(p.container.resolve(d))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var o=r(110),s=r(14),c=r(8),l=r(6),u=r(5),p=r(308),f=r(0),d=r(111),h=r(800),v=r(309),g=function(){function e(e,t,r,i,n,a,o){this.data=e,this.flightSearchHttpService=t,this.flightAttentionHttpService=r,this.flightSortService=i,this.flightFilterService=n,this.handleErrorService=a,this.planeTypeService=o,this.orderBy=v.FlightOrderBy.TimeAsc}var t=e.prototype;return t.onLoad=function(e){this.pageProps=JSON.parse(e.props),this.processProps()},t.processProps=function(){this.setPageBarTitle(),this.setBunkFilter(),this.setFlightRouteDetail(),this.getAttentionList(),this.pageProps.isChange||this.getFlightList()},t.setPageBarTitle=function(){var e=this.pageProps,t=e.arrivalAirport,r=e.departureAirport,i=e.isRoundTrip,n=e.isReturn,a=(e.isChange?"改签查询":"")+" "+(i?n?"返程":"去程":"单程")+" "+r.cityName+" "+(i?"⇌":"⇀")+" "+t.cityName;wx.setNavigationBarTitle({title:a})},t.setBunkFilter=function(){var e=this.pageProps.bunkFilter;if("Y"===e.key||"C,F"===e.key){var t=this.data.filterParams;t.bunkType=[e.key],this.setData({filterParams:t})}},t.setFlightRouteDetail=function(){var e=this.pageProps,t=e.isReturn,r=e.pickedDays;this.setData({isShowFlightRoute:t,flightDate:t?r[1]:r[0]})},t.getAttentionList=function(){var e=this,t=this.getAttentionParams();this.flightAttentionHttpService.queryForAirports(t).pipe(u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({attentionList:t})})},t.getFlightList=function(){var e=this;this.showLoading("查询中···"),this.getFlightSearchRequest().pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.flightResult=e.processFlightResult(t);var r=e.flightFilterService.createFilterSource(t);e.setShowFlightList(e.flightResult),e.setData({filterSource:r})})},t.getFlightSearchRequest=function(){var e=this,t=this.getFlightSearchParams();return this.flightSearchHttpService.searchFlights(t).pipe(u.map(function(e){var t=e.flights,r=e.id;return t.map(function(e){return Object.assign({},e,{flightsId:r})})}),u.switchMap(function(t){return e.transferPlaneType(t).pipe(u.take(1))}))},t.setShowFlightList=function(e){var t=this.flightFilterService.flightFilter(e,this.data.filterParams).map(function(e){var t=e.bunks,r=a(e,["bunks"]);return Object.assign({},r,{bunks:[t[0]]})}),r=this.flightSortService.sortFlights(t,this.orderBy);this.setData({showFlightList:r})},t.transferPlaneType=function(e){return this.planeTypeService.getAllPlaneTypes().pipe(u.map(function(t){return e.map(function(e){var r=e.planeType,i=t.find(function(e){return e.code===r}),n=i?i.type:"";return Object.assign({},e,{planeTypeCategory:n})})}))},t.processFlightResult=function(e){var t=e.filter(function(e){return!e.codeShare});return t.forEach(function(e){e.bunks=e.bunks.sort(function(e,t){return e.adultPrice.factBunkPrice-t.adultPrice.factBunkPrice})}),t},t.handleFilterFlights=function(e){var t=e.detail.filterParams;this.setData({filterParams:t}),this.setShowFlightList(this.flightResult)},t.handleSortFlights=function(e){this.orderBy=e.detail.orderBy;var t=this.data.showFlightList,r=this.flightSortService.sortFlights(t,this.orderBy);this.setData({showFlightList:r})},t.handleFlightDateChange=function(e){var t=e.detail.pickerDate,r=this.pageProps,i=r.pickedDays;r.isReturn?i[1]=t:i[0]=t,this.setData({flightDate:t}),this.getAttentionList(),this.getFlightList()},t.toFlightBunkPage=function(e){var t=e.currentTarget.dataset.index,r=this.data,i=r.showFlightList,n=r.filterParams,a=this.pageProps.isReturn,o=this.flightResult.find(function(e){return e.id===i[t].id}),s=Object.assign({},o);if(n.bunkType.length){var c=s.bunks;s.bunks=c.filter(function(e){return n.bunkType.toString().includes(e.bunkType)})}if(a){var l=wx.getStorageSync(d.FLIGHT_SELECTED_DATA);l.push(s),wx.setStorageSync(d.FLIGHT_SELECTED_DATA,l)}else wx.setStorageSync(d.FLIGHT_SELECTED_DATA,[s]);var u=JSON.stringify(this.pageProps);wx.navigateTo({url:"/app/package-flight/pages/flight-bunk-list/flight-bunk-list?props="+u})},t.getFlightSearchParams=function(){var e=this.pageProps,t=e.arrivalAirport,r=e.departureAirport,i=e.pickedDays,n=e.isReturn,a=t.isCity?t.cityCode:t.code,o=t.isCity,s=r.isCity?r.cityCode:r.code,c=r.isCity;return{flightDate:n?i[1]:i[0],arrivalCode:n?s:a,arrivalCodeIsCity:n?c:o,departureCode:n?a:s,departureCodeIsCity:n?o:c,useGpPrice:!1}},t.getAttentionParams=function(){var e=this.pageProps,t=e.arrivalAirport,r=e.departureAirport,i=e.pickedDays,n=e.isRoundTrip,a=t.isCity?t.cityCode:t.code,o=t.isCity,s=r.isCity?r.cityCode:r.code,c=r.isCity,l=[{arrivalCode:a,arrivalCodeIsCity:o,departureCode:s,departureCodeIsCity:c,bizType:"Flight",flightDate:i[0]}];return n&&l.push({arrivalCode:s,arrivalCodeIsCity:c,departureCode:a,departureCodeIsCity:o,bizType:"Flight",flightDate:i[1]}),l},t.setStickyZIndex=function(e){var t=[99,99,99];t[e.currentTarget.dataset.index]=100,this.setData({stickyZIndex:t})},e}();g=i([f.injectable(),l.loading,n("design:paramtypes",[function(){this.attentionList=[],this.isShowFlightRoute=!1,this.filterParams=h.DefaultFilterParams,this.stickyZIndex=[99,99,99]},s.FlightSearchHttpService,o.FlightAttentionHttpService,v.FlightSortService,h.FlightFilterService,c.HandleErrorService,p.PlaneTypeService])],g),Page(f.container.resolve(g))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(90),c=r(0),l=r(111),u=function(){function e(e,t){this.data=e,this.routerService=t}var t=e.prototype;return t.onLoad=function(e){var t=JSON.parse(e.props);this.processProps(t)},t.processProps=function(e){var t=e.isRoundTrip,r=e.isReturn,i=e.isOnBusiness,n=e.isChange;this.pageProps=e;var a=wx.getStorageSync(l.FLIGHT_SELECTED_DATA);if(a){var o=r?a[1]:a[0],s=t?r?"返程":"去程":"单程";this.setData({routePre:s,isOnBusiness:i,isChange:n,flightDetail:o}),this.setPageBarTitle(t),this.sortBankByBunkType()}else wx.showToast({title:"航班获取异常"}),wx.navigateBack()},t.setPageBarTitle=function(e){var t=this.data,r=t.routePre,i=t.flightDetail,n=i.arrival,a=r+" "+i.departure.cityName+" "+(e?"⇌":"⇀")+" "+n.cityName;wx.setNavigationBarTitle({title:a})},t.sortBankByBunkType=function(){var e=this.data.flightDetail.bunks.filter(function(e){return e.remainNum>0}),t=e.filter(function(e){return"Y"===e.bunkType}),r=e.filter(function(e){return"F"===e.bunkType||"C"===e.bunkType});this.setData({economyCabins:t,businessCabins:r})},t.showPurchasingModal=function(){s.default.alert({message:"代购机票按代购净价+服务费的方式合作，代购渠道主要有去哪儿、携程、淘宝、航空公司官网等。"}).then(function(){})},t.showPoliciesAndBaggage=function(e){var t=e.detail.bunkId,r=this.data.flightDetail,i=r.airline,n=r.departure,a=r.bunks,s=r.airlineName,c=r.flightNo,l=r.planeType,u=a.find(function(e){return e.id===t}),p=u.bunkCode,f=u.adultPrice.extraInfo,d={airlineName:s,flightNo:c,planeType:l,airlineCode:i,bunkCode:p,departureDate:o.DateUtils.format(n.dateTime),psgType:"Adult",extraInfo:f};this.setData({policiesParamsList:[d]})},t.selectedBunk=function(e){var t=e.detail.bunkId,r=this.pageProps.isChange;this.setFlightDetailCache(t),r?this.isChangeOperate():this.normalRoute()},t.normalRoute=function(){var e=this.pageProps,t=e.isRoundTrip,r=e.isReturn;t&&!r?this.toFlightSearchPage():this.toFlightPlaceOrderPage()},t.isChangeOperate=function(){},t.setFlightDetailCache=function(e){var t=this.pageProps.isReturn,r=this.data.flightDetail,i=wx.getStorageSync(l.FLIGHT_SELECTED_DATA),n=r.bunks.find(function(t){return t.id===e}),a=Object.assign({},r,{bunks:[n]});t?(i[1]=a,wx.setStorageSync(l.FLIGHT_SELECTED_DATA,i)):(i[0]=a,wx.setStorageSync(l.FLIGHT_SELECTED_DATA,i))},t.toFlightSearchPage=function(){var e=Object.assign({},this.pageProps,{isReturn:!0});this.routerService.flight.toSearchList(e)},t.toFlightPlaceOrderPage=function(){var e=Object.assign({},this.pageProps);this.routerService.flight.toPlaceOrderPage(e)},e}();u=i([c.injectable(),n("design:paramtypes",[function(){this.flightRouteArrowSrc=o.OSSPrefix+"/flight/route-arrow.svg",this.flightBookingAd=o.OSSPrefix+"/flight/flight-ad.svg",this.economyCabins=[],this.businessCabins=[],this.active=0},a.RouterService])],u),Page(c.container.resolve(u))},,function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(50),l=r(6),u=r(5),p=r(22),f=r(0),d=r(310),h=r(311),v=r(112),g=function(){function e(){this.orderTravelTypeImage={[p.TravelType.OnBusiness]:l.OSSPrefix+"/common/order-business.png",[p.TravelType.OnPrivate]:l.OSSPrefix+"/common/order-private.png"},this.feeDetailVisible=!1,this.policyAndBaggageVis=!1,this.psgDetailUnfolded=!1,this.routeDetailUnfolded=!1,this.canCheckIn=!1}var t,r,n;return t=e,(r=[{key:"flightOrderOperation",get:function(){var e=this.orderDetail;return e?e.flightOrderOperation:null}},{key:"insurances",get:function(){var e=this.orderDetail;return e?e.passengers[0].flightOrderTicketBos[0].insurance||[]:null}},{key:"isRoundTrip",get:function(){var e=this.orderDetail;return e?e.routes.length>1:null}},{key:"isNormalOrder",get:function(){var e=this.orderDetail;return!!e&&"Normal"===e.orderFlag}},{key:"isChangeOrder",get:function(){var e=this.orderDetail;return!!e&&"Change"===e.orderFlag}},{key:"isReturnOrder",get:function(){var e=this.orderDetail;return!!e&&"Return"===e.orderFlag}},{key:"passengerCount",get:function(){var e=this.orderDetail;return e?e.passengers.length:0}},{key:"serviceFee",get:function(){var e=this.orderDetail;return e?e.passengers[0].flightOrderTicketBos[0].feeInfo.serviceFee:0}},{key:"insuranceFee",get:function(){var e=this.orderDetail;return e?e.passengers[0].flightOrderTicketBos[0].feeInfo.insuranceFee:0}},{key:"insuranceFeeVis",get:function(){var e=this.isChangeOrder,t=this.insuranceFee;return!e||t>0}},{key:"totalDiscount",get:function(){var e=this.orderDetail;return e?e.routes.map(function(e){var t=e.segments[0].bunkPrice,r=t.factBunkPrice;return t.bunkPrice-r}).reduce(function(e,t){return e+t},0):0}},{key:"isGpProtocol",get:function(){var e=this.orderDetail;return!!e&&"GP"===e.routes[0].segments[0].bunkPrice.protocolCode}}])&&i(t.prototype,r),n&&i(t,n),e}(),m=function(){function e(e,t,r,i,n,a,o,s,c,l){this.data=e,this.toastService=t,this.handleErrorService=r,this.flightOrderQueryHttpService=i,this.globalDataService=n,this.flightOrderReturnService=a,this.orderInsuranceDetailService=o,this.flightOrderOperationHttpService=s,this.routerService=c,this.flightOrderNetCheckInHttpService=l}var t=e.prototype;return t.onLoad=function(e){var t=e.backToFirstPage;this.id=e.id,this.getDetail(),console.log(typeof t,"backToFirstPage"),this.setData({isSK:this.globalDataService.getGlobalData().isSK,backToFirstPage:!!+t}),this.getCanCheckIn()},t.getDetail=function(){var e=this;this.showLoading(),this.flightOrderQueryHttpService.getFlightOrderDetail(this.id).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){var r=e.getUniqueInsurancesInOneRoute(t),i=e.getUniqueFeeWithCount(t);e.setData({orderDetail:t,insurancesInOneRoute:r,feeGroupedByPsgType:i})})},t.getCanCheckIn=function(){var e=this;this.flightOrderNetCheckInHttpService.getNetCheckInStatus(this.id).pipe(u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){var r=t.goingTripNetCheckInStatus,i=t.returnTripNetCheckInStatus,n=h.getCanCheckIn(r)||i&&h.getCanCheckIn(i);e.setData({canCheckIn:n})})},t.getUniqueFeeWithCount=function(e){var t=e.passengers,r=e.routes,i=p.FlightPassengerType,n=i.Adult,a=i.Child,o=i.Infant,s=t.filter(function(e){return e.passengerType===n}),c=t.filter(function(e){return e.passengerType===a}),l=t.filter(function(e){return e.passengerType===o}),u=s.length,f=c.length,d=l.length;return r.map(function(e,t){var r=[];return u&&r.push({passengerType:n,count:u,fee:s[0].flightOrderTicketBos[t].feeInfo}),f&&r.push({passengerType:a,count:u,fee:c[0].flightOrderTicketBos[t].feeInfo}),d&&r.push({passengerType:o,count:u,fee:l[0].flightOrderTicketBos[t].feeInfo}),r})},t.getUniqueInsurancesInOneRoute=function(e){return e.passengers.reduce(function(e,t){var r=t.flightOrderTicketBos;return e.concat(r[0].insurance)},[]).map(function(e){return Object.assign({},e)}).reduce(function(e,t){var r=t.insuranceCount,i=t.insuranceProductCode,n=e.find(function(e){return e.insuranceProductCode===i});return n?n.insuranceCount+=r:e.push(t),e},[])},t.handleToggleGuestList=function(){this.setData({psgDetailUnfolded:!this.data.psgDetailUnfolded})},t.handleToggleRouteDetail=function(){var e=this.data.routeDetailUnfolded;this.setData({routeDetailUnfolded:!e})},t.handleShowFeeDetail=function(){this.setData({feeDetailVisible:!0})},t.throttleCloseFeeDetail=function(){this.setData({feeDetailVisible:!1})},t.onPullDownRefresh=function(){var e=this;this.showLoading(),this.flightOrderQueryHttpService.getFlightOrderDetail(this.id).pipe(u.finalize(function(){e.hideLoading(),wx.stopPullDownRefresh()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({orderDetail:t})})},t.handleCancel=function(){var e=this;wx.showModal({content:"取消订单后，下次预订价格可能发生变动，是否确定取消？",cancelText:"放弃",cancelColor:"#007AFF",confirmText:"继续取消",confirmColor:"#007AFF",success:function(t){t.confirm&&e.cancelOrder()}})},t.cancelOrder=function(){var e=this;this.showLoading("取消中");var t=this.data.orderDetail.id;this.flightOrderOperationHttpService.cancelApply(t).pipe(u.catchError(function(t){return e.handleErrorService.handle(t)}),u.finalize(function(){e.hideLoading()})).subscribe(function(){e.toastService.success("取消成功"),e.getDetail()})},t.handleReturn=function(){var e=this;this.showLoading(),this.flightOrderReturnService.toReturn(this.data.orderDetail).pipe(u.catchError(function(t){return e.handleErrorService.handle(t)}),u.finalize(function(){e.hideLoading()})).subscribe(function(t){e.flightOrderReturnService.toNextPage()})},t.throttleShowPolicyAndBaggage=function(){this.setData({policyAndBaggageVis:!0})},t.handleGuestDetail=function(e){var t=e.currentTarget.dataset.psg.passengerId,r=this.data.orderDetail.passengers.find(function(e){return e.passengerId===t}),i={guestName:r.passengerName,docType:r.docType,docNo:r.docNo,approvalNo:r.approvalNo,approvalStatus:r.approvalStatus,belongedDeptName:r.belongedDeptName,projectName:r.projectName,birthday:r.birthday,mobile:r.mobile,flightTickets:r.flightOrderTicketBos};wx.navigateTo({url:"/app/pages/common/guest-detail/guest-detail?guest="+JSON.stringify(i)})},t.throttleToInvoice=function(){var e=this.data.orderDetail.distributionSummary;wx.navigateTo({url:"/app/pages/common/invoice-detail/invoice-detail?distributionSummary="+JSON.stringify(e)})},t.handleToInsurance=function(){var e=this.data.orderDetail,t=e.passengers,r=e.routes;this.orderInsuranceDetailService.toDetail(t,r)},t.throttleCheckIn=function(){var e=this.data.orderDetail.id;this.routerService.flight.toCheckIn(e)},e}();m=n([f.injectable(),l.loading,a("design:paramtypes",[g,s.ToastService,s.HandleErrorService,o.FlightOrderQueryHttpService,c.GlobalDataService,v.FlightOrderReturnService,d.OrderInsuranceDetailService,o.FlightOrderOperationHttpService,s.RouterService,o.FlightOrderNetCheckInHttpService])],m),Page(f.container.resolve(m))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=r(310),s=function(){function e(e,t){this.data=e,this.orderInsuranceDetailService=t}var t=e.prototype;return t.onLoad=function(){var e=this.orderInsuranceDetailService.getPassengers();this.setData({passengers:e})},t.throttleShowDesc=function(e){var t=e.currentTarget.dataset.insur.description;this.setData({description:t,descPopupVis:!0})},t.throttleCloseDesc=function(){this.setData({descPopupVis:!1})},e}();s=i([a.injectable(),n("design:paramtypes",[function(){this.descPopupVis=!1},o.OrderInsuranceDetailService])],s),Page(a.container.resolve(s))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(5),c=r(0),l=r(112),u=function(){function e(e,t,r,i){this.data=e,this.flightOrderReturnService=t,this.toast=r,this.handleErrorService=i}var t=e.prototype;return t.onLoad=function(){var e=this.flightOrderReturnService.getOrder(),t=e.routes,r=e.passengers,i=!1,n=t.map(function(e,t){var n=r.some(function(e){return e.flightOrderTicketBos[t].ticketOperation.canBeReturned}),a=!i&&n;return a&&(i=!0),Object.assign({},e,{selected:a,canBeReturned:n})});this.setData({routes:n})},t.handleSelect=function(e){var t=e.currentTarget.dataset.index,r=this.data.routes;r[t].canBeReturned&&(r.forEach(function(e,r){e.selected=r===t}),this.setData({routes:r}))},t.throttleConfirm=function(){var e=this,t=this.data.routes.findIndex(function(e){return e.selected});null!=t?this.flightOrderReturnService.routeConfirm([t]).pipe(s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.flightOrderReturnService.toNextPage()}):this.toast.error("请选择退票的行程")},t.throttleShowPolicyAndBaggage=function(){this.setData({policyAndBaggageVis:!0})},e}();u=i([c.injectable(),n("design:paramtypes",[function(){this.flightRouteArrowSrc=o.OSSPrefix+"/flight/route-arrow.svg",this.policyAndBaggageVis=!1},l.FlightOrderReturnService,a.ToastService,a.HandleErrorService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(5),c=r(0),l=r(112),u=function(){function e(e,t,r,i){this.data=e,this.flightOrderReturnService=t,this.toast=r,this.handleErrorService=i}var t=e.prototype;return t.onLoad=function(){var e=this.flightOrderReturnService.getRouteSelected(),t=this.flightOrderReturnService.getOrder().routes,r=t.length>1?null:t[e[0]],i=this.flightOrderReturnService.getOrder().passengers.map(function(t){var r=t.flightOrderTicketBos[e[0]].ticketOperation.canBeReturned;return Object.assign({},t,{selected:!1,canBeReturned:r})});this.setData({passengers:i,route:r})},t.handleSelect=function(e){var t=e.currentTarget.dataset.item.passengerId,r=this.data.passengers,i=r.find(function(e){return e.passengerId===t});i.canBeReturned&&(i.selected=!i.selected,this.setData({passengers:r}))},t.throttleConfirm=function(){var e=this,t=this.data.passengers.filter(function(e){return e.selected}).map(function(e){return e.passengerId});t.length?this.flightOrderReturnService.passengerConfirm(t).pipe(s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.flightOrderReturnService.toNextPage()}):this.toast.error("请选择退票的乘客")},t.throttleShowPolicyAndBaggage=function(){this.setData({policyAndBaggageVis:!0})},e}();u=i([c.injectable(),n("design:paramtypes",[function(){this.flightRouteArrowSrc=o.OSSPrefix+"/flight/route-arrow.svg",this.policyAndBaggageVis=!1},l.FlightOrderReturnService,a.ToastService,a.HandleErrorService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(5),s=r(0),c=r(112),l=function(){function e(e,t,r,i){this.data=e,this.flightOrderReturnService=t,this.handleErrorService=r,this.toast=i}var t=e.prototype;return t.onLoad=function(){var e=this.flightOrderReturnService.getReasonConfig(),t=e.optionItems,r=e.supportItemOthers;this.setData({options:t,supportItemOthers:r})},t.handleSelectReason=function(e){var t=e.currentTarget.dataset.item;this.setData({reason:t,isOthers:!1})},t.handleSelectOther=function(){this.setData({isOthers:!0,reason:""})},t.handleReasonInput=function(e){var t=e.detail.value;this.setData({reason:t})},t.throttleConfirm=function(){var e=this,t=this.data,r=t.reason,i=t.isOthers;r?this.flightOrderReturnService.reasonConfirm(r).pipe(o.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.flightOrderReturnService.toNextPage()}):this.toast.error("请"+(i?"输入":"选择")+"退票原因")},e}();l=i([s.injectable(),n("design:paramtypes",[function(){this.isOthers=!1},c.FlightOrderReturnService,a.HandleErrorService,a.ToastService])],l),Page(s.container.resolve(l))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(0),c=r(112),l=function(){function e(e,t,r){this.data=e,this.routerService=t,this.flightOrderReturnService=r}var t=e.prototype;return t.throttleToHome=function(){this.routerService.toHome()},t.throttleToOrderDetail=function(){var e=this.flightOrderReturnService.orderId;this.routerService.flight.toOrderDetail(e,!0)},e}();l=i([s.injectable(),n("design:paramtypes",[function(){this.OSSPrefix=o.OSSPrefix},a.RouterService,c.FlightOrderReturnService])],l),Page(s.container.resolve(l))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(16),u=r(5),p=r(0),f=r(311),d=function(){function e(){this.tipIcon=c.OSSPrefix+"/common/tip-icon.svg",this.flightRouteArrowSrc=c.OSSPrefix+"/flight/route-arrow.svg",this.checkInTypeOptions=f.getCheckInTypeOptions()}var t,r,n;return t=e,(r=[{key:"isRoundTrip",get:function(){var e=this.routes;return e&&e.length>1}},{key:"orderCanCheckIn",get:function(){var e=this.requirements;return e&&!!e.length}},{key:"checkInType",get:function(){return this.checkInTypeOptions.find(function(e){return e.selected}).type}},{key:"isTogether",get:function(){return this.checkInType===f.CheckInType.together}}])&&i(t.prototype,r),n&&i(t,n),e}(),h=function(){function e(e,t,r,i,n){this.data=e,this.flightOrderQueryHttpService=t,this.handleErrorService=r,this.flightOrderNetCheckInHttpService=i,this.toastService=n}var t=e.prototype;return t.onLoad=function(e){var t=e.id;this.id=t,this.getDetail()},t.handleChangeCheckInType=function(e){var t=this.data.checkInTypeOptions,r=e.currentTarget.dataset.index,i=t.findIndex(function(e){return e.selected});if(t.forEach(function(e,t){return e.selected=r===t}),this.setData({checkInTypeOptions:t}),i!==r){var n=this.getRequirements();this.setData({requirements:n})}},t.handleToggleSeat=function(e){var t=e.currentTarget.dataset,r=t.requirementindex,i=t.index,n=this.data.requirements,a=n[r].seatOptions[i],o=a.selected;a.selected=!o,this.setData({requirements:n})},t.throttleSubmit=function(){var e=this,t=this.id,r=this.getParams();r.ticketRequirements.every(function(e){return e.requirements.length>0})?(this.showLoading("提交中"),this.flightOrderNetCheckInHttpService.netCheckInApply(r).pipe(u.finalize(function(){e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(e){wx.navigateTo({url:"/app/pages/flight-order-checkin/checkin-completed/checkin-completed?id="+t})})):this.toastService.info("请选择值机偏好")},t.getParams=function(){return{orderId:this.id,ticketRequirements:this.data.requirements.reduce(function(e,t){var r=t.tickets,i=t.seatOptions.filter(function(e){return e.selected}).map(function(e){return e.label}),n=r.reduce(function(e,t){return e.concat(t.checkInTicketIds)},[]).map(function(e){return{ticketId:e,requirements:i}});return e.concat(n)},[])}},t.getDetail=function(){var e=this,t=this.id;this.showLoading(),l.combineLatest([this.flightOrderNetCheckInHttpService.getNetCheckInStatus(t),this.flightOrderQueryHttpService.getFlightOrderDetail(t)]).pipe(u.finalize(function(){return e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){var r=t[0],i=t[1],n=e.getRoutes(r,i),a=e.getTicketsGroupByPassenger(r);e.tickets=a;var o=a.filter(function(e){return!e.canApplyNetCheckIn}),s=a.filter(function(e){return e.canApplyNetCheckIn}).length>1,c=e.getRequirements();e.setData({routes:n,uncheckableTickets:o,requirements:c,hasMultiPassenger:s})})},t.getRequirements=function(){var e=this.tickets,t=this.data.checkInType,r=e.filter(function(e){return e.canApplyNetCheckIn});if(0===r.length)return[];switch(t){case f.CheckInType.together:return[{tickets:r,seatOptions:f.getSeatOptions()}];case f.CheckInType.divided:return r.map(function(e){return{tickets:[e],seatOptions:f.getSeatOptions()}});default:return[]}},t.getRoutes=function(e,t){var r=e.goingTripNetCheckInStatus,i=e.returnTripNetCheckInStatus;return t.routes.map(function(e,t){var n=0===t?r:i,a=f.getCanCheckIn(n),o=f.getCannotCheckInReason(n);return Object.assign({},e,{canCheckIn:a,cannotCheckInReason:o})})},t.getTicketsGroupByPassenger=function(e){var t=e.goingTripNetCheckInStatus,r=e.returnTripNetCheckInStatus,i=t.ticketNetCheckInStatus.map(function(e){var t=[];return e.canApplyNetCheckIn&&t.push(e.ticketId),Object.assign({},e,{checkInTicketIds:t,netCheckInStatuses:[e.netCheckInStatus]})});r&&r.ticketNetCheckInStatus.forEach(function(e){var t=i.find(function(t){return t.passengerId===e.passengerId}),r=t.canApplyNetCheckIn,n=t.checkInTicketIds,a=t.netCheckInStatuses,o=e.ticketId,s=e.netCheckInStatus,c=e.canApplyNetCheckIn;r||(t.canApplyNetCheckIn=c),c&&n.push(o),a.push(s)});return i},e}();h=n([p.injectable(),c.loading,a("design:paramtypes",[d,o.FlightOrderQueryHttpService,s.HandleErrorService,o.FlightOrderNetCheckInHttpService,s.ToastService])],h),Page(p.container.resolve(h))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(0),c=function(){function e(e,t){this.data=e,this.routerService=t}var t=e.prototype;return t.onLoad=function(e){var t=e.id;this.orderId=t},t.throttleToHome=function(){this.routerService.toHome()},t.throttleToOrderDetail=function(){this.routerService.flight.toOrderDetail(this.orderId,!0)},e}();c=i([s.injectable(),n("design:paramtypes",[function(){this.OSSPrefix=o.OSSPrefix},a.RouterService])],c),Page(s.container.resolve(c))},,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(5),c=r(0),l=r(72),u=function(){function e(e,t,r,i,n,a){this.data=e,this.toastService=t,this.routerService=r,this.handleErrorService=i,this.loginService=n,this.tokenService=a}var t=e.prototype;return t.onLoad=function(){},t.onShow=function(){this.checkWechatAccount()},t.checkWechatAccount=function(){var e=this;wx.showLoading({title:"加载中"}),this.loginService.getWechatAccount().pipe(s.finalize(function(){wx.hideLoading()}),s.catchError(function(t){throw e.getWechatLoginCode(),t})).subscribe(function(t){var r=t.userBound;r||e.getWechatLoginCode(),e.setData({hasWechatBind:r})})},t.getWechatLoginCode=function(){var e=this;wx.login({success:function(t){"login:ok"===t.errMsg&&(e.code=t.code)}})},t.loginByWechatCode=function(){this.loginService.wechatLogin()},t.bindGetPhoneNumber=function(e){var t=this.code;if(!t)return this.toastService.info("微信登录已过期，请重新进行授权登录"),void this.getWechatLoginCode();var r=e.detail,i=r.errMsg,n=r.encryptedData,a=r.iv;if("getPhoneNumber:ok"===i){var o={iv:a,encryptedData:n,code:t};this.loginByWechatPhone(o)}},t.loginByWechatPhone=function(e){var t=this;this.showLoading("登录中"),this.loginService.loginByWechatPhone(e).pipe(s.finalize(function(){t.code=null,t.hideLoading()}),s.catchError(function(e){return t.handleErrorService.handle(e)})).subscribe(function(e){e&&(t.toastService.success("登陆成功"),t.routerService.toHome())})},t.toLoginBySMS=function(){var e=this;this.tokenService.getOpenId()?this.routerService.toLogin():(this.showLoading(),this.loginService.getWechatAccount().pipe(s.finalize(function(){e.hideLoading()}),s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.routerService.toLogin()}))},t.toLoginByPwd=function(){var e=this;this.tokenService.getOpenId()?this.routerService.toPwdLogin():(this.showLoading(),this.loginService.getWechatAccount().pipe(s.finalize(function(){e.hideLoading()}),s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.routerService.toLogin()}))},t.throttleViewServiceTel=function(){this.setData({serviceTelModalVisible:!0})},t.throttleHideServiceTel=function(){this.setData({serviceTelModalVisible:!1})},t.throttleMakePhoneCall=function(e){var t=e.currentTarget.dataset.tel;wx.makePhoneCall({phoneNumber:t})},t.throttleViewProtocol=function(){this.routerService.common.toProtocol()},t.throttleViewPrivacy=function(){this.routerService.common.toPrivacy()},e}();u=i([c.injectable(),o.loading,n("design:paramtypes",[function(){this.tehangIcon=o.OSSPrefix+"/login/tehang-logo.png",this.serviceTelModalVisible=!1,this.tmcServiceTel="400-0900-737",this.serviceTel="400-8840-055",this.hasWechatBind=!1},a.ToastService,a.RouterService,a.HandleErrorService,l.LoginService,a.TokenService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(109),s=r(8),c=r(5),l=r(0),u=r(318),p=function(){function e(){this.serviceTelModalVisible=!1,this.pwdVisible=!1}var t,r,n;return t=e,(r=[{key:"tmcServiceTel",get:function(){return"400-0900-737"}},{key:"serviceTel",get:function(){return"400-8840-055"}}])&&i(t.prototype,r),n&&i(t,n),e}();p=n([l.injectable(),a("design:paramtypes",[])],p);var f=function(){function e(e,t,r,i,n){this.data=e,this.handleErrorService=t,this.verificationCodeHttpService=r,this.toastService=i,this.routerService=n}var t=e.prototype;return t.onLoad=function(){var e=this;this.form=u.createAccountLoginForm();var t=this.form;t.valueChanges.pipe(c.startWith(t.value)).subscribe(function(t){e.setData({formData:t})})},t.handleNameInput=function(e){var t=e.detail.value;this.form.controls.mobile.setValue(t)},t.throttleSendSmscode=function(){var e=this,t=this.form.controls.mobile;if(this.validateMobile()){var r={mobile:t.value,scene:"Login"};this.showLoading("发送中"),this.verificationCodeHttpService.sendVerificationCode(r).pipe(c.catchError(function(t){return e.handleErrorService.handle(t)}),c.finalize(function(){e.hideLoading()})).subscribe(function(r){e.routerService.login.toSmsCodeInput(t.value,r.coolDownTime)})}},t.validateMobile=function(){var e=this.form.controls.mobile,t=e.errors,r=e.valid;if(t){var i=t.required,n=t.mobile;i&&this.toastService.info("手机号不能为空"),n&&this.toastService.info("手机号格式不正确")}return r},t.throttleClearMobile=function(){var e=this;setTimeout(function(){e.form.patchValue({mobile:""})},100)},t.throttleViewServiceTel=function(){this.setData({serviceTelModalVisible:!0})},t.throttleHideServiceTel=function(){this.setData({serviceTelModalVisible:!1})},t.throttleMakePhoneCall=function(e){var t=e.currentTarget.dataset.tel;wx.makePhoneCall({phoneNumber:t})},t.throttleViewProtocol=function(){this.routerService.common.toProtocol()},t.throttleViewPrivacy=function(){this.routerService.common.toPrivacy()},t.showLoading=function(e){this.setData({isLoading:!0,loadingTitle:e})},t.hideLoading=function(){this.setData({isLoading:!1})},e}();f=n([l.injectable(),a("design:paramtypes",[p,s.HandleErrorService,o.FrontVerificationCodeHttpService,s.ToastService,s.RouterService])],f);var d=l.container.resolve(f);Page(d)},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(8),s=r(5),c=r(0),l=r(318),u=r(72),p=function(){function e(){this.serviceTelModalVisible=!1,this.pwdVisible=!1}var t,r,n;return t=e,(r=[{key:"tmcServiceTel",get:function(){return"400-0900-737"}},{key:"serviceTel",get:function(){return"400-8840-055"}}])&&i(t.prototype,r),n&&i(t,n),e}();p=n([c.injectable(),a("design:paramtypes",[])],p);var f=function(){function e(e,t,r,i,n){this.data=e,this.handleErrorService=t,this.loginService=r,this.toastService=i,this.routerService=n}var t=e.prototype;return t.onLoad=function(){var e=this;this.form=l.createAccountLoginForm();var t=this.form;t.valueChanges.pipe(s.startWith(t.value)).subscribe(function(t){e.setData({formData:t})})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.throttleLogin=function(){var e=this;if(this.validateMobile()){var t=this.form.value;this.showLoading("登录中"),this.loginService.loginByPwd(t).pipe(s.finalize(function(){e.hideLoading()}),s.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){t&&e.routerService.toHome()})}},t.throttlePwdVisible=function(){this.setData({pwdVisible:!this.data.pwdVisible})},t.validateMobile=function(){var e=this.form.controls.mobile,t=e.errors,r=e.valid;if(t){var i=t.required,n=t.mobile;i&&this.toastService.info("手机号不能为空"),n&&this.toastService.info("手机号格式不正确")}return r},t.throttleClearMobile=function(){var e=this;setTimeout(function(){e.form.patchValue({mobile:""})},100)},t.throttleViewServiceTel=function(){this.setData({serviceTelModalVisible:!0})},t.throttleHideServiceTel=function(){this.setData({serviceTelModalVisible:!1})},t.throttleMakePhoneCall=function(e){var t=e.currentTarget.dataset.tel;wx.makePhoneCall({phoneNumber:t})},t.throttleViewProtocol=function(){this.routerService.common.toProtocol()},t.throttleViewPrivacy=function(){this.routerService.common.toPrivacy()},t.showLoading=function(e){this.setData({isLoading:!0,loadingTitle:e})},t.hideLoading=function(){this.setData({isLoading:!1})},e}();f=n([c.injectable(),a("design:paramtypes",[p,o.HandleErrorService,u.LoginService,o.ToastService,o.RouterService])],f);var d=c.container.resolve(f);Page(d)},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(109),s=r(8),c=r(5),l=r(0),u=r(72),p=r(808),f=function(){function e(){this.smsCodes=[],this.smsCodeInputFocused=!0}var t,r,n;return t=e,(r=[{key:"reformatNumber",get:function(){return this.formData?this.formData.mobile.replace(/^(.{3})(.*)(.{4})/,"$1 $2 $3"):""}}])&&i(t.prototype,r),n&&i(t,n),e}(),d=function(){function e(e,t,r,i,n,a,o){this.data=e,this.loadingService=t,this.handleErrorService=r,this.routerService=i,this.verificationCodeHttpService=n,this.toastService=a,this.loginService=o,this.isLogin=!1}var t=e.prototype;return t.onLoad=function(e){var t=this,r=e.cdtime,i=e.mobile;this.setData({cdtime:r}),this.countdown(),this.toastService.success("验证码已发送"),this.form=p.createSmsCodeLoginForm();var n=this.form;n.patchValue({mobile:i}),n.valueChanges.pipe(c.startWith(n.value)).subscribe(function(e){t.setData({formData:e})});var a=n.controls.verificationCode;a.valueChanges.pipe(c.startWith(a.value)).subscribe(function(e){var r=e.split("").concat(Array(6).fill("")).slice(0,6);t.setData({smsCodes:r}),6===e.length&&t.smsCodeLogin(e)})},t.countdown=function(){var e=this;setTimeout(function(){var t=e.data.cdtime;(t-=1)>=0&&e.setData({cdtime:t}),t>0&&e.countdown()},1e3)},t.smsCodeLogin=function(e){var t=this;if(!this.isLogin){this.isLogin=!0;var r=Object.assign({},this.form.value,{verificationCode:e});this.showLoading("登录中"),this.loginService.loginBySMS(r).pipe(c.finalize(function(){t.isLogin=!1,t.hideLoading()}),c.catchError(function(e){return t.handleErrorService.handle(e)})).subscribe(function(e){e&&t.routerService.toHome()})}},t.handleSetFocus=function(){var e=this;this.setData({smsCodeInputFocused:!0}),wx.getClipboardData({success:function(t){var r=t.data;6===r.length&&Number(r)&&e.form.controls.verificationCode.setValue(r)}})},t.handleSmsCodeBlur=function(){this.setData({smsCodeInputFocused:!1})},t.handleSmsCodeInput=function(e){var t=e.detail.value;this.form.controls.verificationCode.setValue(t)},t.handleResendSmsCode=function(){var e=this,t={mobile:this.form.controls.mobile.value,scene:"Login"};this.loadingService.showLoading("发送中"),this.verificationCodeHttpService.sendVerificationCode(t).pipe(c.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(t){e.loadingService.hideLoading(),e.toastService.success("验证码已发送"),e.setData({cdtime:t.coolDownTime}),e.countdown(),e.handleSetFocus()})},t.showLoading=function(e){var t=this.data.loadingTriggerTimes,r=void 0===t?0:t;r++,this.setData({isLoading:!0,loadingTitle:e,loadingTriggerTimes:r})},t.hideLoading=function(){var e=this.data.loadingTriggerTimes;e--,this.setData({isLoading:e>0,loadingTriggerTimes:e})},e}();d=n([l.injectable(),a("design:paramtypes",[f,s.LoadingService,s.HandleErrorService,s.RouterService,o.FrontVerificationCodeHttpService,s.ToastService,u.LoginService])],d);var h=l.container.resolve(d);Page(h)},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(297),s=r(6),c=r(5),l=r(0),u=r(72),p=function(){function e(e,t,r,i,n,a,o){this.data=e,this.toastService=t,this.handleErrorService=r,this.routerService=i,this.loginService=n,this.invitationsService=a,this.tokenService=o}var t=e.prototype;return t.onLoad=function(){this.getAllInvitationsCount()},t.getAllInvitationsCount=function(){var e=this;this.showLoading(),this.invitationsService.getAllInvitationsCount().pipe(c.finalize(function(){e.hideLoading()}),c.catchError(function(t){throw e.handleErrorService.handle(t)})).subscribe(function(t){e.setData({invitationCount:t})})},t.checkCurrentRole=function(){this.tokenService.getToken()?this.loginService.loginByLastToken():this.getAllInvitationsCount()},t.toRegister=function(e){var t=this,r=e.currentTarget.dataset.scene;this.showLoading("登录中"),this.loginService.loginByRegisterScene(r).pipe(c.finalize(function(){t.hideLoading()}),c.catchError(function(e){return t.handleErrorService.handle(e)})).subscribe(function(e){e&&(t.toastService.success("登陆成功"),t.routerService.toHome())})},e}();p=i([l.injectable(),s.loading,n("design:paramtypes",[function(){this.showInvitations=!0,this.modalHeaderIconUrl=s.OSSPrefix+"/common/modal-icon-message.png"},a.ToastService,a.HandleErrorService,a.RouterService,u.LoginService,o.InvitationsService,a.TokenService])],p),Page(l.container.resolve(p))},,,,,,,,,,,,function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(6),s=r(0),c=r(113),l=function(){function e(e,t){this.data=e,this.approvalHttpService=t}var t=e.prototype;return t.onLoad=function(){this.getApprovalToAuditNumber()},t.onShow=function(){},t.handleSwitchNav=function(e){var t=e.currentTarget.dataset.source;this.setData({selectedSource:t})},t.toCreateApprovalPage=function(){wx.navigateTo({url:"/app/pages/approval-created/approval-created"})},t.getApprovalToAuditNumber=function(){var e=this;this.approvalHttpService.getApprovalAndAuthorizeToAuditNumber().subscribe(function(t){var r=t.approvalToAuditNum,i=t.authorizeToAuditNum,n=(r||0)+(i||0);e.setData({allToAuditNum:n,approvalToAuditNum:r,authorizeToAuditNum:i})})},e}();l=i([s.injectable(),n("design:paramtypes",[function(){this.addIconUrl=o.OSSPrefix+"/approval/add-icon.png",this.approvalSource=c.ApprovalSource,this.selectedSource=c.ApprovalSource.Mine},a.ApprovalHttpService])],l),Page(s.container.resolve(l))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(5),l=r(0),u=r(113),p=function(){function e(e,t,r){this.data=e,this.handleErrorService=t,this.approvalHttpService=r,this.opinion=""}var t=e.prototype;return t.onLoad=function(e){this.approvalId=e.approvalId,this.setData({approvalSource:e.source}),this.getApprovalDetail()},t.getApprovalDetail=function(){var e=this;this.showLoading("请求中"),this.getApprovalDetailRequest().pipe(c.finalize(function(){return e.hideLoading()})).subscribe(function(t){e.setData({approvalDetail:t})})},t.getApprovalDetailRequest=function(){var e=this;return this.approvalHttpService.getApprovalDetail(this.approvalId).pipe(c.map(function(e){var t=e.routes,r=e.employees.map(function(e){return e.name}).join("、"),i=t.map(function(e){return e.travelFrom+"-"+e.travelDestination}),n=t.map(function(e){return e.travelDateStart+"至"+e.travelDateEnd}),a=t.map(function(e){return e.transport});return Object.assign({},e,{employeeNamesStr:r,travelPlaces:i,travelDates:n,transports:a})}),c.catchError(function(t){return e.handleErrorService.handle(t)}))},t.handleCancel=function(){var e=this,t=this.data.approvalDetail.id;this.showLoading("撤销中"),this.approvalHttpService.cancelApproval(t).pipe(c.switchMap(function(){return wx.showToast({title:"操作成功"}),e.getApprovalDetailRequest()}),c.finalize(function(){return e.hideLoading()})).subscribe(function(t){e.setData({approvalDetail:t})})},t.handleShowRejectReason=function(){this.setData({showRejectReason:!0})},t.handleCloseRejectReason=function(){this.setData({showRejectReason:!1})},t.handleAgree=function(){var e=this,t={approvalId:this.approvalId,auditPassed:!0,auditSource:"WechatMiniprogram",opinion:""};this.showLoading("提交中"),this.getAuditApprovalRequest(t).pipe(c.finalize(function(){return e.hideLoading()})).subscribe(function(t){e.setData({approvalDetail:t})})},t.handleReject=function(){var e=this,t={approvalId:this.approvalId,auditPassed:!1,auditSource:"WechatMiniprogram",opinion:this.opinion||""};this.showLoading("提交中"),this.getAuditApprovalRequest(t).pipe(c.finalize(function(){return e.hideLoading()})).subscribe(function(t){e.setData({approvalDetail:t}),e.handleCloseRejectReason()})},t.getAuditApprovalRequest=function(e){var t=this;return this.approvalHttpService.auditApproval(Object.assign({},e)).pipe(c.switchMap(function(){return wx.showToast({title:"操作成功"}),t.getApprovalDetailRequest()}),c.catchError(function(e){return t.handleErrorService.handle(e)}))},t.bindTextChange=function(e){this.opinion=e.detail.value||""},t.onPullDownRefresh=function(){var e=this;this.getApprovalDetailRequest().pipe(c.finalize(function(){wx.stopPullDownRefresh()})).subscribe(function(t){e.setData({approvalDetail:t})})},e}();p=i([l.injectable(),s.loading,n("design:paramtypes",[function(){this.approvalStatusOps=u.ApprovalStatusConstant,this.showRejectReason=!1},o.HandleErrorService,a.ApprovalHttpService])],p),Page(l.container.resolve(p))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(5),c=r(0),l=r(113),u=function(){function e(e,t,r,i){this.data=e,this.loadingService=t,this.handleErrorService=r,this.authorizeHttpService=i,this.opinion=""}var t=e.prototype;return t.onLoad=function(e){this.authorizeId=e.authorizeId,this.setData({approvalSource:e.source}),this.getAuthorizeDetail()},t.handleChange=function(e){var t=e.currentTarget.dataset.index;this.setData({current:t})},t.getAuthorizeDetail=function(){var e=this;this.loadingService.showLoading("请求中"),this.getAuthorizeDetailRequest().pipe(s.finalize(function(){return e.loadingService.hideLoading()})).subscribe(function(t){e.setData({authorizeDetail:t})})},t.getAuthorizeDetailRequest=function(){var e=this;return this.authorizeHttpService.getAuthorizeSheet(this.authorizeId).pipe(s.map(function(e){var t=e.authorizeHis.map(function(e){var t=e.submitEmployee,r=e.auditEmployee,i=e.toAuditEmployees,n=t?t.name:"",a=r?r.name:"",o=i.map(function(e){return e?e.name:""}).join(",");return Object.assign({},e,{submitEmployeeName:n,auditEmployeeName:a,toAuditEmployeesNames:o})});return Object.assign({},e,{authorizeHis:t})}),s.catchError(function(t){return e.handleErrorService.handle(t)}))},t.handleShowRejectReason=function(){this.setData({showRejectReason:!0})},t.handleCloseRejectReason=function(){this.setData({showRejectReason:!1})},t.handleAgree=function(){var e=this,t={authorizeSheetId:this.authorizeId,auditPassed:!0,auditSource:"WechatMiniprogram",opinion:""};this.loadingService.showLoading("提交中"),this.getAuditAuthorizeRequest(t).pipe(s.finalize(function(){return e.loadingService.hideLoading()})).subscribe(function(t){e.setData({authorizeDetail:t})})},t.handleReject=function(){var e=this,t={authorizeSheetId:this.authorizeId,auditPassed:!1,auditSource:"WechatMiniprogram",opinion:this.opinion||""};this.loadingService.showLoading("提交中"),this.getAuditAuthorizeRequest(t).pipe(s.finalize(function(){return e.loadingService.hideLoading()})).subscribe(function(t){e.setData({authorizeDetail:t}),e.handleCloseRejectReason()})},t.getAuditAuthorizeRequest=function(e){var t=this;return this.authorizeHttpService.auditAuthorizeSheet(Object.assign({},e)).pipe(s.switchMap(function(){return wx.showToast({title:"操作成功"}),t.getAuthorizeDetailRequest()}),s.catchError(function(e){return t.handleErrorService.handle(e)}))},t.bindTextChange=function(e){this.opinion=e.detail.value||""},t.onPullDownRefresh=function(){var e=this;this.getAuthorizeDetailRequest().pipe(s.finalize(function(){wx.stopPullDownRefresh()})).subscribe(function(t){e.setData({authorizeDetail:t})})},e}();u=i([c.injectable(),n("design:paramtypes",[function(){this.authorizeStatusOps=l.AuthorizeStatusConstant,this.showRejectReason=!1,this.current=0},o.LoadingService,o.HandleErrorService,a.AuthorizeHttpService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(305),l=r(16),u=r(5),p=r(0),f=r(172),d=r(814),h=function(){function e(e,t,r,i,n,a,o){this.data=e,this.toastService=t,this.routerService=r,this.handleErrorService=i,this.validateService=n,this.employeeSelectService=a,this.approvalHttpService=o,this.unsubscribe$=new l.Subject}var t=e.prototype;return t.onLoad=function(){this.form=d.createApprovalForm(),this.attachValueChanges()},t.onShow=function(){},t.onUnload=function(){this.unsubscribe$.next()},t.attachValueChanges=function(){var e=this;this.form.valueChanges.pipe(u.startWith(this.form.value)).subscribe(function(t){var r=e.data.formData;s.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),this.form.statusChanges.pipe(u.startWith(this.form.status)).subscribe(function(t){var r=e.validateService.getErrorMsgs(e.form),i=e.data.errMsgs;s.ObjectUtils.deepCompare(i,r)||e.setData({errMsgs:r})})},t.handleChooseDate=function(){this.setData({calenderVisible:!0})},t.handleDateClose=function(){this.setData({calenderVisible:!1})},t.handleDateConfirm=function(e){var t=e.detail,r=t[0],i=t[1];r=s.DateUtils.format(r),i=s.DateUtils.format(i),this.form.patchValue({travelDateStart:r,travelDateEnd:i}),this.handleDateClose()},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value;this.form.controls[t].markAsDirty(),this.form.patchValue({[t]:r})},t.handleSelectEmployee=function(){var e=this,t=this.data.formData.employees;this.employeeSelectService.select(0,t.filter(function(e){return!!e})).subscribe(function(t){var r=e.form.controls.employees;s.FormUtils.clearFormArray(r),t.forEach(function(e){var t=Object.assign({},e),i=d.createApprovalTravelerForm(Object.assign({},t));r.push(i)})})},t.handleRemoveTraveler=function(e){var t=e.currentTarget.dataset.index;this.form.controls.employees.removeAt(t)},t.handleAddApproval=function(){var e=this;if(!s.FormUtils.validate(this.form))return this.form.updateValueAndValidity(),void this.toastService.error("请检查表单内容");if(this.form.value.employees.length){var t=d.getApprovalFormValue(this.form);this.showLoading("创建中"),this.approvalHttpService.createApprovalRequest(t).pipe(u.finalize(function(){e.hideLoading()}),u.catchError(function(t){return e.handleErrorService.handle(t)})).subscribe(function(){e.toastService.success("创建成功"),setTimeout(function(){e.routerService.toBack()},1e3)})}else this.toastService.error("出差员工不能为空")},e}();h=i([p.injectable(),s.loading,n("design:paramtypes",[function(){this.currentDate=new Date(s.DateUtils.addYears(new Date,-18)).getTime(),this.maxDate=s.DateUtils.addYears(new Date,1).valueOf()},o.ToastService,o.RouterService,o.HandleErrorService,c.ValidateService,f.EmployeeSelectService,a.ApprovalHttpService])],h),Page(p.container.resolve(h))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(79),o=r(8),s=r(6),c=r(5),l=r(0),u=r(171),p=function(){function e(e,t,r,i,n){this.data=e,this.chooseCityService=t,this.frontHotelCityHttpService=r,this.loadingService=i,this.locationService=n}var t=e.prototype;return t.onLoad=function(){var e=this;this.frontHotelCityHttpService.getAllCity().subscribe(function(t){e.groupCities(t.cities)}),this.getCurrentCity(),wx.getSystemInfo().then(function(t){e.setData({screenHeight:t.screenHeight})})},t.getCurrentCity=function(){var e=this;this.showLoading(),this.locationService.getCurrentAddress().pipe(c.switchMap(function(t){var r=t.address_component.city.replace(/市/,"");return e.frontHotelCityHttpService.getAllCity().pipe(c.map(function(e){return e.cities.find(function(e){return e.name===r})}))}),c.finalize(function(){e.hideLoading()})).subscribe(function(t){e.loadingService.hideLoading(),e.setData({currentCity:t})})},t.groupCities=function(e){var t=e.filter(function(e,t){return t<15}),r=e.sort(function(e,t){return e.pinyinName.localeCompare(t.pinyinName)}).map(function(e){var t=e.pinyinName,r=t?t.charAt(0).toLocaleUpperCase():"";return Object.assign({letter:r},e)}),i=Array.from(new Set(r.map(function(e){return e.letter}))),n=r.reduce(function(e,t){var r=t.letter;return e[r]?e[r].push(t):e[r]=[t],e},{});this.setData({hotCities:t,letters:i,groupByLetter:n})},t.throttleChoose=function(e){var t=e.currentTarget.dataset.city;this.chooseCityService.choose(t)},t.throttleScrollToLetter=function(e){var t=e.currentTarget.dataset.id,r=wx.createSelectorQuery();r.select("#letter_index").boundingClientRect(),r.exec(function(e){var r=e[0].height,i=wx.createSelectorQuery();i.select(t).boundingClientRect(),i.selectViewport().scrollOffset(),i.exec(function(e){var t=e[0].top,i=e[1].scrollTop;wx.pageScrollTo({scrollTop:t+i-r})})})},t.onPageScroll=function(e){var t=this.data.screenHeight;if(t){var r=e.scrollTop;this.setData({goTopBtnVisible:r>t})}},t.throttleGoTop=function(){wx.pageScrollTo({scrollTop:0})},e}();p=i([l.injectable(),s.loading,n("design:paramtypes",[function(){this.goTopBtnVisible=!1},u.ChooseCityService,a.FrontHotelCityHttpService,o.LoadingService,o.LocationService])],p);var f=l.container.resolve(p);Page(f)},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(79),s=r(8),c=r(16),l=r(5),u=r(0),p=r(312),f=r(319),d=r(324),h=function(){function e(){this.brands=[],this.hotPortName=f.getHotPortNames(),this.counties=[],this.businessZones=[],this.metros=[],this.expanded={brands:!1,counties:!1,businessZones:!1,metros:!1},this.min_expand=8,this.expandable_hotPorts={}}var t,r,n;return t=e,(r=[{key:"expandable_brands",get:function(){return this.brands.length>this.min_expand}},{key:"expandable_counties",get:function(){return this.counties.length>this.min_expand}},{key:"expandable_businessZones",get:function(){return this.businessZones.length>this.min_expand}},{key:"expandable_metros",get:function(){return this.metros.length>this.min_expand}}])&&i(t.prototype,r),n&&i(t,n),e}(),v=function(){function e(e,t,r,i,n,a){this.data=e,this.conditionService=t,this.metrosService=r,this.frontTipWordHttpService=i,this.handleErrorService=n,this.routerService=a,this.keyword$=new c.Subject,this.unload$=new c.Subject}var t=e.prototype;return t.onLoad=function(e){var t=this,r=e.citycode;this.cityCode=r,this.conditionService.getCityBaseInfo(r).subscribe(function(e){var r=e.counties,i=e.businessZones,n=e.hotPorts,a=e.metros,o=t.data,s=o.expanded,c=o.expandable_hotPorts,l=o.min_expand;n.forEach(function(e){var t=e.typeName,r=e.hotPorts;s[t]=!1,c[t]=r.length>l}),t.setData({counties:r,businessZones:i,hotPorts:n,metros:a,expanded:s,expandable_hotPorts:c})}),this.conditionService.getBrands().subscribe(function(e){return t.setData({brands:e})}),this.initKeywordSearch(),this.getHistory()},t.onUnload=function(){this.unload$.next()},t.initKeywordSearch=function(){var e=this,t=this.cityCode;this.keyword$.pipe(l.takeUntil(this.unload$),l.debounceTime(100),l.distinctUntilChanged(),l.filter(function(e){return!!e}),l.switchMap(function(r){return e.frontTipWordHttpService.searchTipWords({cityCode:t,keyword:r}).pipe(l.catchError(function(t){return e.handleErrorService.handle(t)}),l.map(function(e){var t=new RegExp(r,"g");return e.map(function(e){var i=e.name.replace(t,"%%"+r+"%%").split("%%").filter(function(e){return!!e}).map(function(e){return{isHighLight:e===r,text:e}});return Object.assign({},e,{words:i})})}))})).subscribe(function(t){e.setData({searchResults:Object.assign({},t)})})},t.getHistory=function(){var e=this;this.frontTipWordHttpService.searchHistoryTipWords(this.cityCode).subscribe(function(t){e.setData({history:t})})},t.handleKeywordInput=function(e){var t=e.detail.value;this.setData({keyword:t}),this.keyword$.next(t)},t.throttleKeywordConfirm=function(){var e=this.data.keyword,t=p.getEmptyConditions();t.keyWord=e,this.conditionService.choose(t,e)},t.throttleHistoryKeywordTap=function(e){var t=e.currentTarget.dataset.item;this.handleTipItem(t)},t.throttleClearHistoryKeywords=function(){var e=this;this.frontTipWordHttpService.deleteHistoryTipWords().subscribe(function(t){e.getHistory()})},t.throttleBrandTap=function(e){var t=e.currentTarget.dataset.brand,r=p.getEmptyConditions();r.condition.brands=[t],this.conditionService.choose(r,t)},t.throttleCountyTap=function(e){var t=e.currentTarget.dataset.name,r=p.getEmptyConditions();r.condition.position=t,r.condition.tipWordType="District",this.conditionService.choose(r,t)},t.throttleBizZoneTap=function(e){var t=e.currentTarget.dataset.namecn,r=p.getEmptyConditions();r.condition.position=t,r.condition.tipWordType="BusinessZone",this.conditionService.choose(r,t)},t.throttleHotPortTap=function(e){var t=e.currentTarget.dataset,r=t.name,i=t.type,n=p.getEmptyConditions();n.condition.position=r,n.condition.tipWordType=i,this.conditionService.choose(n,r)},t.throttleMetroLineTap=function(e){var t=this,r=e.currentTarget.dataset.code;this.metrosService.getMetro(this.data.metros,r).subscribe(function(e){var r=p.getEmptyConditions(),i=e.name;r.condition.position=i,r.condition.tipWordType="MetroStation",t.conditionService.choose(r,i,2)})},t.throttleSearchResultTap=function(e){var t=e.currentTarget.dataset.item;this.handleTipItem(t)},t.handleTipItem=function(e){var t=e.tipWordType,r=e.name,i=e.hotelId,n=e.latitude,a=e.longitude;if(i){var o=this.conditionService.getDetailRequestParams();this.routerService.hotel.redirectToHotelDetail(Object.assign({},o,{hotelId:i}))}else{var s=p.getEmptyConditions();t?"Brand"===t?s.condition.brands=[r]:(s.condition.position=r,s.condition.tipWordType=t,n&&(s.condition.coordinates={lat:n,lon:a})):s.keyWord=r,this.conditionService.choose(s,r)}},t.handleToggleExpanded=function(e){var t=e.currentTarget.dataset.type,r=!this.data.expanded[t];this.setData({expanded:{[t]:r}})},e}();v=n([u.injectable(),a("design:paramtypes",[h,p.ConditionService,d.MetrosService,o.FrontTipWordHttpService,s.HandleErrorService,s.RouterService])],v);var g=u.container.resolve(v);Page(g)},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=r(324),c=function(){function e(){}var t,r,n;return t=e,(r=[{key:"stations",get:function(){var e=this;return this.lineCode?this.metros.find(function(t){return t.code===e.lineCode}).stations:null}}])&&i(t.prototype,r),n&&i(t,n),e}(),l=function(){function e(e,t){this.data=e,this.metrosService=t}var t=e.prototype;return t.onLoad=function(){var e=this.metrosService,t=e.code,r=e.metros;this.setData({metros:r,lineCode:t})},t.throttleChangeLine=function(e){var t=e.currentTarget.dataset.code;this.setData({lineCode:t})},t.throttleChooseStation=function(e){var t=e.currentTarget.dataset.item;this.metrosService.chooseMetro(t)},e}();l=n([o.injectable(),a("design:paramtypes",[c,s.MetrosService])],l),Page(o.container.resolve(l))},function(e,t,r){"use strict";Page({})},function(e,t,r){"use strict";Page({})},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(16),u=r(5),p=r(0),f=r(174),d=r(172),h=function(){function e(){this.scrollTop=0,this.list=null,this.selected=[],this.addEmployeePermission=!1}var t,r,n;return t=e,(r=[{key:"remain",get:function(){var e=this.count,t=this.selected;return e&&t?e-t.length:0}}])&&i(t.prototype,r),n&&i(t,n),e}(),v=function(e){var t,r;function i(t,r,i,n,a,o,s){var c;return(c=e.call(this,o)||this).data=t,c.employeeManageHttpService=r,c.localCacheService=i,c.employeeSelectService=n,c.toastService=a,c.employeeModifyService=s,c.keyword="",c.keyword$=new l.Subject,c.httpRequest=c.employeeManageHttpService.getEmployeeInfoForPagination.bind(c.employeeManageHttpService),c}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.onLoad=function(){var e=this,t=this.employeeSelectService.getInfo(),r=t.count,i=t.selected;this.setData({count:r,selected:i}),this.query(),this.keyword$.pipe(u.debounceTime(100)).subscribe(function(t){e.keyword=t,e.query()}),this.localCacheService.getByUser("employeeSelectStorageKey_history").subscribe(function(t){e.setData({history:t})}),this.getAddPermission()},n.getQueryParams=function(){return{name:this.keyword}},n.getAddPermission=function(){var e=this;this.employeeManageHttpService.getAddEmployeePermission().subscribe(function(t){e.setData({addEmployeePermission:t})})},n.throttlescrolltolower=function(){this.loadMore()},n.handleToggleEmployee=function(e){var t=e.currentTarget.dataset.employee,r=this.data,i=r.selected,n=r.count,a=i.findIndex(function(e){return e.id===t.id});-1===a?!n||i.length<n?i.push(t):this.toastService.error("不可选择更多员工"):i.splice(a,1),this.setData({selected:i})},n.handleKeywordInput=function(e){var t=e.detail.value;this.setData({list:[]}),this.keyword$.next(t)},n.throttleConfirm=function(){var e=this.data,t=e.selected,r=e.history,i=e.count-t.length;if(i>0)this.toastService.error("还需选择"+i+"位员工");else{this.employeeSelectService.confirm(t);var n=t.concat(r||[]).reduce(function(e,t){return-1===e.findIndex(function(e){return e.id===t.id})&&e.push(t),e},[]).splice(0,8);this.localCacheService.saveByUser("employeeSelectStorageKey_history",n)}},n.throttleAddEmployee=function(){var e=this;this.employeeModifyService.modify().subscribe(function(t){e.query()})},i}(c.PaginationPage);v=n([p.injectable(),a("design:paramtypes",[h,o.EmployeeManageHttpService,s.LocalCacheService,d.EmployeeSelectService,s.ToastService,s.HandleErrorService,f.EmployeeModifyService])],v),Page(p.container.resolve(v))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(0),s=r(173),c=function(){function e(e,t,r){this.data=e,this.departmentHttpService=t,this.departmentSelectService=r}var t=e.prototype;return t.onLoad=function(){var e=this;this.departmentHttpService.getDeptTreeNodes(!0).subscribe(function(t){e.setData({departments:t})})},t.throttleDepartment=function(e){var t=e.currentTarget.dataset.department,r=this.data.selected;r.push(t),this.setData({selected:r}),t.nodes?this.setData({popupVisible:!0}):this.throttleConfirm()},t.throttleDepartmentNode=function(e){var t=e.currentTarget.dataset.department,r=this.data.selected;r.push(t),this.setData({selected:r,scrollTop:1e4*Math.random()})},t.throttleSelected=function(e){var t=e.currentTarget.dataset.index,r=this.data.selected;r.splice(t+1),this.setData({selected:r})},t.throttleConfirm=function(){var e=this.data.selected,t=e[e.length-1];this.departmentSelectService.confirm(t)},t.throttleClosePopup=function(){this.setData({selected:[],popupVisible:!1})},e}();c=i([o.injectable(),n("design:paramtypes",[function(){this.popupVisible=!1,this.selected=[],this.scrollTop=0},a.DepartmentHttpService,s.DepartmentSelectService])],c),Page(o.container.resolve(c))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(5),c=r(0),l=r(313),u=function(){function e(e,t,r,i){this.data=e,this.projectHttpService=t,this.handleErrorService=r,this.projectSelectService=i,this.pageNumber=1}var t=e.prototype;return t.onLoad=function(){this.request()},t.request=function(){var e=this;this.showLoading(),this.projectHttpService.getProjectPage({pageNumber:this.pageNumber,pageSize:20}).pipe(s.catchError(function(t){return e.handleErrorService.handle(t)}),s.finalize(function(){e.hideLoading()})).subscribe(function(t){var r=t.page,i=t.content,n=t.totalPage;e.pageNumber=r>n?n:r;var a=e.data.list;a=(a||[]).concat(i),e.setData({list:a})})},t.showLoading=function(e){this.setData({isLoading:!0,loadingTitle:e})},t.hideLoading=function(){this.setData({isLoading:!1})},t.throttlescrolltolower=function(){this.pageNumber++,this.request()},t.throttleSelectProject=function(e){var t=e.currentTarget.dataset.project;this.projectSelectService.confirm(t)},e}();u=i([c.injectable(),n("design:paramtypes",[function(){},a.ProjectHttpService,o.HandleErrorService,l.ProjectSelectService])],u),Page(c.container.resolve(u))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(5),l=r(22),u=r(0),p=r(314),f=function(){function e(){this.approvalStatuses=l.ApprovalStatus}var t,r,n;return t=e,(r=[{key:"hasContent",get:function(){var e=this.list;return!e||e.length}}])&&i(t.prototype,r),n&&i(t,n),e}(),d=function(){function e(e,t,r,i){this.data=e,this.approvalHttpService=t,this.handleErrorService=r,this.approvalSelectService=i,this.pageNumber=1}var t=e.prototype;return t.onLoad=function(){this.request()},t.request=function(){var e=this;this.showLoading();var t=this.approvalSelectService.getParams(),r=t.employeeId,i=t.startDate;this.approvalHttpService.getApprovalPageListForOrder({employeeId:r,startDate:i,pageNumber:this.pageNumber,pageSize:20}).pipe(c.catchError(function(t){return e.handleErrorService.handle(t)}),c.finalize(function(){e.hideLoading()})).subscribe(function(t){var r=t.page,i=t.content,n=t.totalPage;e.pageNumber=r>n?n:r;var a=e.data.list;a=(a||[]).concat(i),e.setData({list:e.handleApproval(a)})})},t.throttlescrolltolower=function(){this.pageNumber++,this.request()},t.throttleSelect=function(e){var t=e.currentTarget.dataset.approval;this.approvalSelectService.confirm(t)},t.showLoading=function(e){var t=this.data.loadingTriggerTimes,r=void 0===t?0:t;r++,this.setData({isLoading:!0,loadingTitle:e,loadingTriggerTimes:r})},t.hideLoading=function(){var e=this.data.loadingTriggerTimes;e--,this.setData({isLoading:e>0,loadingTriggerTimes:e})},t.handleApproval=function(e){return e.map(function(e){var t=e.employees.map(function(e){return e.name}).join("、"),r=e.routes.map(function(e){return e.travelFrom+"-"+e.travelDestination}),i=e.routes.map(function(e){return e.travelDateStart+"至"+e.travelDateEnd}),n=e.routes.map(function(e){return e.transport});return Object.assign({},e,{employeeNamesStr:t,travelPlaces:r,travelDates:i,transports:n})})},e}();d=n([u.injectable(),a("design:paramtypes",[f,o.ApprovalHttpService,s.HandleErrorService,p.ApprovalSelectService])],d),Page(u.container.resolve(d))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(36),u=r(32),p=r(90),f=r(5),d=r(306),h=r(0),v=r(315),g=function(){function e(){this.popupVisible=!1}var t,r,n;return t=e,(r=[{key:"invoice",get:function(){var e=this.formData;return e?e.invoice:null}}])&&i(t.prototype,r),n&&i(t,n),e}(),m=function(){function e(e,t,r,i,n,a){this.data=e,this.customerInvoiceHttpService=t,this.handleErrorService=r,this.validateService=i,this.invoiceSelectService=n,this.invoiceDetailModifyService=a}var t=e.prototype;return t.onLoad=function(){var e=this,t=this.createForm();t.valueChanges.pipe(f.startWith(t.value)).subscribe(function(t){var r=e.data.formData;c.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),t.statusChanges.pipe(f.startWith(t.status)).subscribe(function(r){var i=e.validateService.getErrorMsgs(t),n=e.data.errMsgs;c.ObjectUtils.deepCompare(n,i)||e.setData({errMsgs:i})}),this.form=t;var r=this.invoiceSelectService.getInfo().selected;r?t.patchValue(r):this.request().subscribe(function(e){var r=e.find(function(e){return e.defaulted});t.patchValue({invoice:r})})},t.throttleShowNotice=function(){p.default.alert({title:"发票须知",message:"自2017年7月1日起，企业索取的普通发票需填写纳税人识别号，不符合规定的发票，不得作为合法税收凭证。",confirmButtonText:"确定"}).then(function(){})},t.throttleChangeInvoice=function(){var e=this;this.setData({popupVisible:!0}),this.request().subscribe(function(t){e.setData({invoiceList:t})})},t.throttlePopupClose=function(){this.setData({popupVisible:!1,invoiceList:null})},t.request=function(){var e=this;return this.showLoading(),this.customerInvoiceHttpService.getAll().pipe(f.finalize(function(){e.hideLoading()}),f.catchError(function(t){return e.handleErrorService.handle(t)}))},t.createForm=function(){var e=u.ThValidators,t=e.required,r=e.email;return l.fb.group({invoice:[,t],email:[,[t,r]],memo:[]})},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value,i=this.form.get(t);i.markAsDirty(),i.setValue(r)},t.throttleConfirmInvoice=function(e){var t=e.currentTarget.dataset.invoice;this.setData({popupVisible:!1}),this.form.patchValue({invoice:t})},t.throttleConfirm=function(){var e=this.form;c.FormUtils.validate(e)?this.invoiceSelectService.confirm(e.value):e.updateValueAndValidity()},t.throttleToAddInvoice=function(){var e=this;this.setData({popupVisible:!1}),this.invoiceDetailModifyService.toModify().subscribe(function(t){e.form.patchValue({invoice:t})})},t.throttleToEditInvoice=function(e){var t=this;this.setData({popupVisible:!1});var r=e.currentTarget.dataset.invoice;this.invoiceDetailModifyService.toModify(r).subscribe(function(e){t.form.patchValue({invoice:e})})},e}();m=n([h.injectable(),c.loading,a("design:paramtypes",[g,o.CustomerInvoiceHttpService,s.HandleErrorService,u.ValidateService,v.InvoiceSelectService,d.InvoiceDetailModifyService])],m),Page(h.container.resolve(m))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(32),u=r(5),p=r(22),f=r(0),d=r(174),h=r(173),v=r(815),g=function(){function e(){this.docTypePickerVisible=!1,this.Gender=p.Gender,this.birthdayPickerOptions={currentDate:new Date(c.DateUtils.addYears(new Date,-18)).getTime(),maxDate:(new Date).getTime(),minDate:new Date(c.DateUtils.addYears(new Date,-100)).getTime()},this.birthdayPickerVisible=!1}var t,r,n;return t=e,(r=[{key:"isMale",get:function(){var e=this.formData;return!!e&&e.gender===p.Gender.Male}},{key:"isFemale",get:function(){var e=this.formData;return!!e&&e.gender===p.Gender.Female}}])&&i(t.prototype,r),n&&i(t,n),e}(),m=function(){function e(e,t,r,i,n,a){this.data=e,this.employeeManageHttpService=t,this.validateService=r,this.departmentSelectService=i,this.handleErrorService=n,this.employeeModifyService=a}var t=e.prototype;return t.onLoad=function(){var e=this,t=v.createForm();this.form=t,t.valueChanges.pipe(u.startWith(t.value)).subscribe(function(t){var r=e.data.formData;c.ObjectUtils.deepCompare(r,t)||e.setData({formData:t})}),t.statusChanges.pipe(u.startWith(t.status)).subscribe(function(r){var i=e.validateService.getErrorMsgs(t),n=e.data.errMsgs;c.ObjectUtils.deepCompare(n,i)||e.setData({errMsgs:i})})},t.handleSwitchNameType=function(){var e=this.form,t=e.value.isNameCn;e.patchValue({isNameCn:!t})},t.handleNameCnInput=function(e){var t=e.detail.value,r=t[0]||"",i=t.substring(1)||"",n=this.form.get("surnameCn");n.markAsDirty(),n.setValue(r);var a=this.form.get("givenNameCn");a.markAsDirty(),a.setValue(i)},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value,i=this.form.get(t);i.markAsDirty(),i.setValue(r)},t.handleEmployeeDocInput=function(e){var t=e.currentTarget.dataset,r=t.name,i=t.index,n=e.detail.value,a=this.form.get("employeeDocs").at(i).get(r);a.markAsDirty(),a.setValue(n)},t.throttleReselectDept=function(){var e=this;this.departmentSelectService.select().subscribe(function(t){var r=t.id,i=t.name;e.form.patchValue({department:{id:r,name:i}})})},t.throttleOpenDocTypePicker=function(e){var t=e.currentTarget.dataset.index;this.curEmployeeDocFormGroup=this.form.get("employeeDocs").at(t),this.setData({docTypePickerVisible:!0})},t.throttleCloseDocTypePicker=function(){this.setData({docTypePickerVisible:!1})},t.throttleConfirmDocType=function(e){var t=e.detail;this.curEmployeeDocFormGroup.patchValue({docType:t.code}),this.throttleCloseDocTypePicker()},t.throttleChangeGender=function(e){var t=e.currentTarget.dataset.gender;this.form.patchValue({gender:t})},t.throttleConfirmBirthday=function(e){var t=e.detail,r=c.DateUtils.format(t,"yyyy-MM-dd");this.form.patchValue({birthday:r}),this.throttleCloseBirthdayPicker()},t.throttleCloseBirthdayPicker=function(){this.setData({birthdayPickerVisible:!1})},t.throttleOpenBirthdayPicker=function(){this.setData({birthdayPickerVisible:!0})},t.throttleConfirm=function(){var e=this,t=this.form;if(c.FormUtils.validate(t)){var r=v.getFormValue(this.form);this.showLoading(),this.employeeManageHttpService.addEmployeeWithoutCheck(r).pipe(u.catchError(function(t){return e.handleErrorService.handle(t)}),u.finalize(function(){e.hideLoading()})).subscribe(function(t){e.employeeModifyService.confirm()})}else t.updateValueAndValidity()},e}();m=n([f.injectable(),c.loading,a("design:paramtypes",[g,o.EmployeeManageHttpService,l.ValidateService,h.DepartmentSelectService,s.HandleErrorService,d.EmployeeModifyService])],m),Page(f.container.resolve(m))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(14),o=r(8),s=r(6),c=r(32),l=r(5),u=r(0),p=r(816),f=r(175),d=function(){function e(e,t,r,i,n){this.data=e,this.handleErrorService=t,this.validateService=r,this.frequentTravellerHttpService=i,this.frequentTravellerModifyService=n}var t=e.prototype;return t.onLoad=function(e){var t=this,r=p.createForm();this.form=r,r.valueChanges.pipe(l.startWith(r.value)).subscribe(function(e){var r=t.data.formData;s.ObjectUtils.deepCompare(r,e)||t.setData({formData:e})}),r.statusChanges.pipe(l.startWith(r.status)).subscribe(function(e){var i=t.validateService.getErrorMsgs(r),n=t.data.errMsgs;s.ObjectUtils.deepCompare(n,i)||t.setData({errMsgs:i})});var i=e.id;i&&(wx.setNavigationBarTitle({title:"编辑常用旅客"}),this.frequentTravellerHttpService.get(i).pipe(l.catchError(function(e){return t.handleErrorService.handle(e)}),l.finalize(function(){t.hideLoading()})).subscribe(function(e){t.wholeInfo=e,t.form.patchValue(e)}))},t.handleSwitchNameType=function(){var e=this.form,t=e.value.isNameCn;e.patchValue({isNameCn:!t})},t.handleNameCnInput=function(e){var t=e.detail.value,r=t[0]||"",i=t.substring(1)||"",n=this.form.get("surnameCn");n.markAsDirty(),n.setValue(r);var a=this.form.get("givenNameCn");a.markAsDirty(),a.setValue(i)},t.handleInput=function(e){var t=e.currentTarget.dataset.name,r=e.detail.value,i=this.form.get(t);i.markAsDirty(),i.setValue(r)},t.throttleConfirm=function(){var e=this,t=this.form;if(s.FormUtils.validate(t)){var r=p.getFormValue(t),i=r.id?this.frequentTravellerHttpService.update(Object.assign({},this.wholeInfo,r)):this.frequentTravellerHttpService.create(r);this.showLoading(),i.pipe(l.catchError(function(t){return e.handleErrorService.handle(t)}),l.finalize(function(){e.hideLoading()})).subscribe(function(t){e.frequentTravellerModifyService.confirm(Object.assign({id:t},r))})}else t.updateValueAndValidity()},t.throttleShowNameInputNotice=function(){this.setData({nameInputNoticeVisible:!0})},e}();d=i([u.injectable(),s.loading,n("design:paramtypes",[function(){this.nameInputNoticeVisible=!1},o.HandleErrorService,c.ValidateService,a.FrequentTravellerHttpService,f.FrequentTravellerModifyService])],d),Page(u.container.resolve(d))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(14),s=r(8),c=r(6),l=r(0),u=r(175),p=r(316),f=r(90),d=r(22),h=r(5),v=function(){function e(){this.scrollTop=0,this.list=null,this.selected=[]}var t,r,n;return t=e,(r=[{key:"remain",get:function(){var e=this.count,t=this.selected;return e&&t?e-t.length:0}}])&&i(t.prototype,r),n&&i(t,n),e}(),g=function(e){var t,r;function i(t,r,i,n,a,o){var s;return(s=e.call(this,n)||this).data=t,s.frequentTravellerHttpService=r,s.frequentTravellerSelectService=i,s.toastService=a,s.frequentTravellerModifyService=o,s.httpRequest=s.frequentTravellerHttpService.search.bind(s.frequentTravellerHttpService),s}r=e,(t=i).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var n=i.prototype;return n.getQueryParams=function(){return{}},n.onLoad=function(){var e=this.frequentTravellerSelectService.getInfo(),t=e.count,r=e.selected;this.setData({count:t,selected:r}),this.query()},n.throttlescrolltolower=function(){this.loadMore()},n.throttleAdd=function(){var e=this;this.frequentTravellerModifyService.toModify().subscribe(function(t){e.query()})},n.throttleEdit=function(e){var t=this,r=e.currentTarget.dataset.item;this.frequentTravellerModifyService.toModify(r.id).subscribe(function(e){t.query()})},n.throttleConfirm=function(){var e=this.data,t=e.selected,r=e.count-t.length;r>0?this.toastService.error("还需选择"+r+"位旅客"):this.frequentTravellerSelectService.confirm(t)},n.handleToggleEmployee=function(e){var t=e.currentTarget.dataset.employee,r=this.data,i=r.selected,n=r.count,a=i.findIndex(function(e){return e.id===t.id});-1===a?!n||i.length<n?i.push(t):this.toastService.error("不可选择更多旅客"):i.splice(a,1),this.setData({selected:i})},n.throttleRemove=function(e){var t=this,r=e.currentTarget.dataset,i=r.item,n=r.index;f.default.confirm({message:"确定删除"+d.getName(i)+"？"}).then(function(){t.showLoading(),t.frequentTravellerHttpService.remove(i.id).pipe(h.finalize(function(){t.hideLoading()}),h.catchError(function(e){return t.handleErrorService.handle(e)})).subscribe(function(){var e=t.data,r=e.list,i=e.selected;r.splice(n,1);var a=i.findIndex(function(e){return e.id==e.id});-1!==a&&i.splice(a,1),t.setData({list:r,selected:i})})}).catch()},i}(c.PaginationPage);g=n([l.injectable(),c.loading,a("design:paramtypes",[v,o.FrequentTravellerHttpService,p.FrequentTravellerSelectService,s.HandleErrorService,s.ToastService,u.FrequentTravellerModifyService])],g),Page(l.container.resolve(g))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),o=r(6),s=r(0),c=function(){function e(e,t){this.data=e,this.routerService=t}var t=e.prototype;return t.onLoad=function(e){var t=e.props,r=e.id,i=t?JSON.parse(t):this.data.props;this.setData({orderId:r,props:i})},t.throttleToHome=function(){this.routerService.toHome()},t.throttleToOrderDetail=function(){this.routerService.hotel.toOrderDetail(this.data.orderId,!0)},e}();c=i([s.injectable(),n("design:paramtypes",[function(){this.OSSPrefix=o.OSSPrefix,this.resultTypeImageOps={success:o.OSSPrefix+"/pay/pay-success.png",failed:o.OSSPrefix+"/pay/pay-fail.png"},this.props={type:"success",title:"操作结果",result:"操作成功",description:""}},a.RouterService])],c),Page(s.container.resolve(c))},function(e,t,r){"use strict";var i=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},n=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),o=function(){function e(e){this.data=e}return e.prototype.onLoad=function(e){if(e.guest){var t=JSON.parse(e.guest);this.setData({orderGuest:t})}},e}();o=i([a.injectable(),n("design:paramtypes",[function(){}])],o),Page(a.container.resolve(o))},function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var n=this&&this.__decorate||function(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),s=function(){function e(){}var t,r,n;return t=e,(r=[{key:"address",get:function(){var e=this.distributionSummary,t="";if(e){var r=e.distribution;t=""+(r.province||"")+(r.city||"")+(r.area||"")+(r.address||"")}return t}}])&&i(t.prototype,r),n&&i(t,n),e}(),c=function(){function e(e){this.data=e}return e.prototype.onLoad=function(e){if(e.distributionSummary){var t=JSON.parse(e.distributionSummary);this.setData({distributionSummary:t})}},e}();c=n([o.injectable(),a("design:paramtypes",[s])],c),Page(o.container.resolve(c))},,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),n=r(14),a=r(5),o=r(8);Component({options:{addGlobalClass:!0},data:{travelerList:[]},methods:{getTravelerList:function(){var e=this;this.getTravelerListRequest().pipe(a.catchError(function(t){return e.getHandleErrorService().handle(t)})).subscribe(function(t){e.setData({travelerList:t})})},getTravelerListRequest:function(){return this.getTravelerService().search({pageNumber:1,pageSize:100}).pipe(a.map(function(e){return e.content}))},handleDeleted:function(e){var t=this,r=e.currentTarget.dataset.id;this.getTravelerService().remove(r).pipe(a.switchMap(function(){return t.getTravelerListRequest()}),a.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){t.setData({travelerList:e})})},handleToModifyPage:function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/package-mine/pages/traveler-detail-modify/traveler-detail-modify?id="+t})},getTravelerService:function(){return i.container.resolve(n.FrequentTravellerHttpService)},getHandleErrorService:function(){return i.container.resolve(o.HandleErrorService)}},lifetimes:{ready:function(){this.getTravelerList()}},pageLifetimes:{show:function(){this.getTravelerList()}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),n=r(5),a=r(0),o=r(8);Component({options:{addGlobalClass:!0},data:{addressList:[]},methods:{getAddressList:function(){var e=this;this.getAddressListRequest().pipe(n.catchError(function(t){return e.getHandleErrorService().handle(t)})).subscribe(function(t){e.setData({addressList:t})})},getAddressListRequest:function(){return this.getAddressService().search({pageNumber:1,pageSize:100}).pipe(n.map(function(e){return e.content}))},handleDeleted:function(e){var t=this,r=e.currentTarget.dataset.id;this.getAddressService().remove(r).pipe(n.switchMap(function(){return t.getAddressListRequest()}),n.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){t.setData({addressList:e})})},handleToModifyPage:function(e){var t=JSON.stringify(e.currentTarget.dataset.address);wx.navigateTo({url:"/app/package-mine/pages/address-detail-modify/address-detail-modify?address="+t})},getAddressService:function(){return a.container.resolve(i.CustomerAddressHttpService)},getHandleErrorService:function(){return a.container.resolve(o.HandleErrorService)}},lifetimes:{ready:function(){this.getAddressList()}},pageLifetimes:{show:function(){this.getAddressList()}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),n=r(5),a=r(0),o=r(8);Component({options:{addGlobalClass:!0},data:{invoiceList:[]},methods:{getInvoiceList:function(){var e=this;this.getInvoiceListRequest().pipe(n.catchError(function(t){return e.getHandleErrorService().handle(t)})).subscribe(function(t){e.setData({invoiceList:t})})},getInvoiceListRequest:function(){return this.getInvoiceService().search({pageNumber:1,pageSize:100}).pipe(n.map(function(e){return e.content}))},handleDeleted:function(e){var t=this,r=e.currentTarget.dataset.id;this.getInvoiceService().remove(r).pipe(n.switchMap(function(){return t.getInvoiceListRequest()}),n.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){t.setData({invoiceList:e})})},handleToModifyPage:function(e){var t=JSON.stringify(e.currentTarget.dataset.invoice);wx.navigateTo({url:"/app/package-mine/pages/invoice-detail-modify/invoice-detail-modify?invoice="+t})},getInvoiceService:function(){return a.container.resolve(i.CustomerInvoiceHttpService)},getHandleErrorService:function(){return a.container.resolve(o.HandleErrorService)}},lifetimes:{ready:function(){this.getInvoiceList()}},pageLifetimes:{show:function(){this.getInvoiceList()}}})},,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6);Component({options:{addGlobalClass:!0},properties:{flightItem:Object},observers:{flightItem:function(e){e&&this.setDefaultBunkInfo(e)}},data:{flightRouteArrowSrc:i.OSSPrefix+"/flight/route-arrow.svg",bunkInfo:null},methods:{setDefaultBunkInfo:function(e){var t=e.bunks[0];this.setData({bunkInfo:t})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6);Component({options:{addGlobalClass:!0},properties:{attentions:Object},observers:{attentions:function(e){if(e){var t=e.filter(function(e){return e.popUp});this.setData({attentionList:e,showPopup:!!t.length,showAttentionList:t})}}},data:{tipIcon:i.OSSPrefix+"/common/tip-icon.svg",attentionList:[],showAttentionList:[],showPopup:!1},methods:{handleShowPopup:function(){this.setData({showPopup:!0,showAttentionList:this.data.attentionList}),this.triggerEvent("showPopup")},handleClosePopup:function(){this.setData({showPopup:!1})}}})},function(e,t,r){"use strict";var i=this&&this.__rest||function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),a=r(111);Component({options:{addGlobalClass:!0},data:{flightRouteArrowSrc:n.OSSPrefix+"/flight/flight-route-arrow.svg",routeGoSrc:n.OSSPrefix+"/flight/route-go.svg",flightDetail:null,bunkInfo:null,showPopup:!1},lifetimes:{ready:function(){this.init()}},methods:{init:function(){var e=wx.getStorageSync(a.FLIGHT_SELECTED_DATA)[0],t=e.bunks,r=i(e,["bunks"]),n=t[0];this.setData({flightDetail:Object.assign({},r),bunkInfo:n})},handleShowPopup:function(){this.setData({showPopup:!0}),this.triggerEvent("showPopup")},handleClosePopup:function(){this.setData({showPopup:!1})},handleChangeRoute:function(){wx.navigateBack({delta:2})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),n=r(309);Component({options:{addGlobalClass:!0},properties:{filterSource:Array,filterParams:Object},observers:{filterSource:function(e){e&&this.properties.filterParams&&this.resetFilterOptionList(e)},filterParams:function(e){e&&this.properties.filterSource&&this.resetFilterOptionList(this.properties.filterSource)}},data:{tipIcon:i.OSSPrefix+"/common/tip-icon.svg",timeIcon:{normal:i.OSSPrefix+"/flight/sort-icon-time.svg",active:i.OSSPrefix+"/flight/sort-icon-time-selected.svg"},priceIcon:{normal:i.OSSPrefix+"/flight/sort-icon-price.svg",active:i.OSSPrefix+"/flight/sort-icon-price-selected.svg"},filterIcon:{normal:i.OSSPrefix+"/flight/sort-icon-filter.svg",active:i.OSSPrefix+"/flight/sort-icon-filter-selected.svg"},showPopup:!1,sortTypeEnum:n.FlightSortType,orderByEnum:n.FlightOrderBy,sortType:n.FlightSortType.Time,orderBy:n.FlightOrderBy.TimeAsc,filterOptionList:[],filterParams:[],hasSelected:!1,activeIndex:0},methods:{resetFilterOptionList:function(e){var t=this;e.forEach(function(e){var r=e.options,i=e.key,n=t.properties.filterParams[i];r.forEach(function(e){e.checked=n.includes(e.value)})}),this.setFilterOptionList(e)},handleShowPopup:function(){this.setData({showPopup:!0})},handleClosePopup:function(){this.setData({showPopup:!1}),this.resetFilterOptionList(this.data.filterOptionList)},handleChangeSort:function(e){var t=e.currentTarget.dataset.sort,r=n.FlightOrderBy.TimeAsc;r=t===n.FlightSortType.Time?this.data.orderBy===n.FlightOrderBy.TimeAsc?n.FlightOrderBy.TimeDesc:n.FlightOrderBy.TimeAsc:this.data.orderBy===n.FlightOrderBy.PriceAsc?n.FlightOrderBy.PriceDesc:n.FlightOrderBy.PriceAsc,this.setData({sortType:t,orderBy:r}),this.triggerEvent("changeOrderBy",{orderBy:r})},handleActiveNav:function(e){var t=e.currentTarget.dataset.index;this.setData({activeIndex:t})},handleSelectedFilter:function(e){var t=e.currentTarget.dataset.index,r=t[0],i=t[1],n=this.data.filterOptionList;n[r].options[i].checked=!n[r].options[i].checked,this.setFilterOptionList(n)},handleUnSelected:function(e){var t=e.currentTarget.dataset.index,r=t[0],i=t[1],n=this.data.filterOptionList;n[r].options[i].checked=!1,this.setFilterOptionList(n)},setFilterOptionList:function(e){e.forEach(function(e){e.active=e.options.some(function(e){return e.checked})});var t=e.some(function(e){return e.active});this.setData({filterOptionList:e,hasSelected:t})},handleClearSelected:function(){var e=this.data.filterOptionList;e.forEach(function(e){e.active=!1,e.options.forEach(function(e){e.checked=!1})}),this.setData({filterOptionList:e,hasSelected:!1})},handleConfirm:function(){var e=this.data.filterOptionList,t={};e.forEach(function(e){t[e.key]=e.options.filter(function(e){return e.checked}).map(function(e){return e.value})}),this.triggerEvent("confirmFilter",{filterParams:t}),this.setData({showPopup:!1})}}})},,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(111);Component({options:{addGlobalClass:!0},properties:{cabinList:Array,isOnBusiness:Boolean,isChange:Boolean},observers:{cabinList:function(e){if(e&&e.length){var t=e.length>4,r=t?e.slice(0,4):e;this.setData({showCabinList:r,list:e,isShowMore:t})}}},data:{bunkTagClass:i.bunkTagClass,list:[],showCabinList:[],isShowMore:!1},methods:{handleShowMore:function(){this.setData({showCabinList:this.data.list,isShowMore:!1})},handleShowPurchasingFeeModal:function(){this.triggerEvent("purchasingModal")},handleShowPoliciesAndBaggage:function(e){var t=e.currentTarget.dataset.id;this.triggerEvent("policiesAndBaggage",{bunkId:t})},handleSelectedBunk:function(e){var t=e.currentTarget.dataset.id;this.triggerEvent("selected",{bunkId:t})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(110),n=r(8),a=r(6),o=r(16),s=r(5),c=r(0);Component({options:{addGlobalClass:!0},properties:{paramsList:Array,overlayTop:Number},observers:{paramsList:function(e){e&&e.length&&(this.setDateByProps(e),this.queryPoliciesAndBaggage(e))}},data:{policiesIcon:a.OSSPrefix+"/flight/policies-icon.svg",baggageIcon:a.OSSPrefix+"/flight/baggage-icon.svg",flightRoutes:[],policiesAndBaggageList:[],showPopup:!1,isRoundTrip:!1,active:0},methods:{handleClosePopup:function(){this.setData({showPopup:!1})},setDateByProps:function(e){var t=2===e.length,r=[];t&&(r=e.map(function(e){return{flightNo:e.flightNo,departureDate:e.departureDate,planeType:e.planeType,airlineName:e.airlineName,airlineCode:e.airlineCode}})),this.setData({showPopup:!0,flightRoutes:r,isRoundTrip:t})},queryPoliciesAndBaggage:function(e){var t=this,r=e.map(function(e){return t.getFareRuleService().queryDetail(e)});wx.showLoading({title:""}),o.forkJoin(r).pipe(s.finalize(function(){wx.hideLoading()}),s.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){t.setData({policiesAndBaggageList:e})})},getFareRuleService:function(){return c.container.resolve(i.FareRuleDetailHttpService)},getHandleErrorService:function(){return c.container.resolve(n.HandleErrorService)}}})},,,,,,,,,,,,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(50),n=r(5),a=r(0),o=r(123),s=r(113);Component({options:{addGlobalClass:!0},data:{triggered:!1,tabBarHeight:0,current:0,approvalEnabled:!0,authorizeEnabled:!0,approvalProcessList:[],selectedApprovalType:o.ApprovalProcessType.Approval,approvalProcessType:o.ApprovalProcessType,approvalStatusOps:s.ApprovalStatusConstant,approvalStatus:s.ApprovalStatus,authorizeStatusOps:s.AuthorizeStatusConstant,authorizeStatus:s.AuthorizeStatus,queryParams:{pageNumber:1,pageSize:10,approvalStatusList:[s.ApprovalStatus.WaitApproval,s.ApprovalStatus.Cancelled],authorizeStatus:[s.AuthorizeStatus.WaitAuthorize]},isMore:!1},properties:{},lifetimes:{ready:function(){this.initPageDate(),this.initQueryParams(),this.getApprovalList()}},pageLifetimes:{show:function(){this.getApprovalList()}},methods:{initPageDate:function(){var e=this.getGlobalDataService().getGlobalData().tabBarRect.height;this.setData({tabBarHeight:e})},initQueryParams:function(){var e=this.getGlobalDataService().getGlobalData(),t=e.approvalEnabled,r=e.authorizeEnabled,i=t?o.ApprovalProcessType.Approval:o.ApprovalProcessType.Authorize,n=t?0:2;this.setData({current:n,approvalEnabled:t,authorizeEnabled:r,selectedApprovalType:i})},handleChange:function(e){var t=e.currentTarget.dataset.index,r=e.currentTarget.dataset.status,i=e.currentTarget.dataset.type,n=i===o.ApprovalProcessType.Approval?Object.assign({},this.data.queryParams,{pageNumber:1,approvalStatusList:r}):Object.assign({},this.data.queryParams,{pageNumber:1,authorizeStatus:r});this.setData({current:t,selectedApprovalType:i,queryParams:n,isMore:!1}),this.getApprovalList()},handleRefresherPull:function(){var e=this,t=Object.assign({},this.data.queryParams,{pageNumber:1});this.setData({queryParams:t}),this.getApprovalListRequest().pipe(n.finalize(function(){e.setData({triggered:!1})})).subscribe(function(t){e.setData({approvalProcessList:t})})},handleReachBottom:function(){var e=this;if(this.data.isMore){var t=this.data.queryParams.pageNumber,r=Object.assign({},this.data.queryParams,{pageNumber:t+1});this.setData({queryParams:r}),wx.showLoading({title:"加载更多"}),this.getApprovalListRequest().pipe(n.finalize(function(){return wx.hideLoading()})).subscribe(function(t){e.setData({approvalProcessList:e.data.approvalProcessList.concat(t)})})}else wx.showToast({title:"没有更多数据了...",icon:"none"})},handleCancel:function(e){var t=this,r=e.currentTarget.dataset.id;wx.showLoading({title:"请求中"}),this.getApprovalMixedService().getApprovalCancelRequest(r).pipe(n.switchMap(function(){return t.setData({queryParams:Object.assign({},t.data.queryParams,{pageNumber:1})}),t.getApprovalListRequest()}),n.finalize(function(){return wx.hideLoading()})).subscribe(function(e){t.setData({approvalProcessList:e})})},getApprovalList:function(){var e=this,t=Object.assign({},this.data.queryParams,{pageNumber:1});this.setData({queryParams:t,approvalProcessList:[]}),wx.showLoading({title:"加载中"}),this.getApprovalListRequest().pipe(n.finalize(function(){return wx.hideLoading()})).subscribe(function(t){e.setData({approvalProcessList:t})})},getApprovalListRequest:function(){var e=this,t=this.data,r=t.queryParams,i=t.selectedApprovalType;return this.getApprovalMixedService().getApprovalForMineMixedRequest(i,Object.assign({},r)).pipe(n.tap(function(t){var i=t.totalPage,n=r.pageNumber;e.setData({isMore:i-n>0})}),n.map(function(e){return e.content}))},toApprovalProcessDetail:function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/pages/approval-process-detail/approval-process-detail?approvalId="+t+"&source="+s.ApprovalSource.Mine})},toAuthorizeProcessDetail:function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/pages/authorize-process-detail/authorize-process-detail?authorizeId="+t+"&source="+s.ApprovalSource.Mine})},getApprovalMixedService:function(){return a.container.resolve(o.ApprovalMixedService)},getGlobalDataService:function(){return a.container.resolve(i.GlobalDataService)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(50),n=r(5),a=r(0),o=r(123),s=r(113);Component({options:{addGlobalClass:!0},data:{triggered:!1,tabBarHeight:0,current:0,approvalEnabled:!0,authorizeEnabled:!0,approvalProcessList:[],selectedApprovalType:o.ApprovalProcessType.Approval,approvalProcessType:o.ApprovalProcessType,approvalStatusOps:s.ApprovalStatusConstant,authorizeStatusOps:s.AuthorizeStatusConstant,authorizeSheetHandleStatus:s.AuthorizeSheetHandleStatus,queryParams:{pageNumber:1,pageSize:10,waitingAudited:!0,authorizeSheetHandleStatus:s.AuthorizeSheetHandleStatus.WaitHandle},isMore:!1,showRejectReason:!1,auditApprovalParams:{auditSource:"WechatMiniprogram",opinion:"",id:"",auditPassed:!1}},properties:{approvalToAuditNum:Number,authorizeToAuditNum:Number},lifetimes:{ready:function(){this.initPageDate(),this.initQueryParams(),this.getApprovalList()}},pageLifetimes:{show:function(){this.getApprovalList()}},methods:{initPageDate:function(){var e=this.getGlobalDataService().getGlobalData().tabBarRect.height;this.setData({tabBarHeight:e})},initQueryParams:function(){var e=this.getGlobalDataService().getGlobalData(),t=e.approvalEnabled,r=e.authorizeEnabled,i=t?o.ApprovalProcessType.Approval:o.ApprovalProcessType.Authorize,n=t?0:2;this.setData({current:n,approvalEnabled:t,authorizeEnabled:r,selectedApprovalType:i})},handleRefresherPull:function(){var e=this,t=Object.assign({},this.data.queryParams,{pageNumber:1});this.setData({queryParams:t}),this.getApprovalListRequest().pipe(n.finalize(function(){e.setData({triggered:!1})})).subscribe(function(t){e.setData({approvalProcessList:t}),e.triggerEvent("updateDot")})},handleChange:function(e){var t=e.currentTarget.dataset.index,r=e.currentTarget.dataset.status,i=e.currentTarget.dataset.type,n=i===o.ApprovalProcessType.Approval?Object.assign({},this.data.queryParams,{pageNumber:1,waitingAudited:r}):Object.assign({},this.data.queryParams,{pageNumber:1,authorizeSheetHandleStatus:r});this.setData({current:t,selectedApprovalType:i,queryParams:n,isMore:!1}),this.getApprovalList()},handleReachBottom:function(){var e=this;if(this.data.isMore){var t=this.data.queryParams.pageNumber,r=Object.assign({},this.data.queryParams,{pageNumber:t+1});this.setData({queryParams:r}),wx.showLoading({title:"加载更多"}),this.getApprovalListRequest().pipe(n.finalize(function(){return wx.hideLoading()})).subscribe(function(t){e.setData({approvalProcessList:e.data.approvalProcessList.concat(t)})})}else wx.showToast({title:"没有更多数据了...",icon:"none"})},handleShowRejectReason:function(e){var t=e.currentTarget.dataset.id;this.setAuditApprovalParams({id:t}),this.setData({showRejectReason:!0})},handleCloseRejectReason:function(){this.setData({showRejectReason:!1})},bindTextAreaBlur:function(e){var t=e.detail.value||"";this.setAuditApprovalParams({opinion:t})},handleAgree:function(e){var t=e.currentTarget.dataset.id;this.setAuditApprovalParams({id:t,auditPassed:!0}),this.handleAuditApproval()},handleReject:function(){this.setAuditApprovalParams({auditPassed:!1}),this.handleAuditApproval()},handleAuditApproval:function(){var e=this,t=this.data,r=t.selectedApprovalType,i=t.auditApprovalParams;wx.showLoading({title:"请求中"}),this.getApprovalMixedService().getAuditApprovalMixedRequest(r,i).pipe(n.switchMap(function(){return e.toastOperateSuccess(),e.setData({queryParams:Object.assign({},e.data.queryParams,{pageNumber:1})}),e.getApprovalListRequest()}),n.finalize(function(){return wx.hideLoading()})).subscribe(function(t){e.setData({approvalProcessList:t}),e.triggerEvent("updateDot"),e.handleCloseRejectReason()})},setAuditApprovalParams:function(e){var t=this.data.auditApprovalParams;this.setData({auditApprovalParams:Object.assign({},t,e)})},toastOperateSuccess:function(){wx.showToast({title:"操作成功"})},getApprovalList:function(){var e=this,t=Object.assign({},this.data.queryParams,{pageNumber:1});this.setData({queryParams:t,approvalProcessList:[]}),wx.showLoading({title:"加载中"}),this.getApprovalListRequest().pipe(n.finalize(function(){wx.hideLoading()})).subscribe(function(t){e.setData({approvalProcessList:t}),e.triggerEvent("updateDot")})},getApprovalListRequest:function(){var e=this,t=this.data,r=t.queryParams,i=t.selectedApprovalType;return this.getApprovalMixedService().getApprovalForOtherMixedRequest(i,Object.assign({},r)).pipe(n.tap(function(t){var i=t.totalPage,n=r.pageNumber;e.setData({isMore:i-n>0})}),n.map(function(e){return e.content}))},toApprovalProcessDetail:function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/pages/approval-process-detail/approval-process-detail?approvalId="+t+"&source="+s.ApprovalSource.Other})},toAuthorizeProcessDetail:function(e){var t=e.currentTarget.dataset.id;wx.navigateTo({url:"/app/pages/authorize-process-detail/authorize-process-detail?authorizeId="+t+"&source="+s.ApprovalSource.Other})},getApprovalMixedService:function(){return a.container.resolve(o.ApprovalMixedService)},getGlobalDataService:function(){return a.container.resolve(i.GlobalDataService)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(22);Component({options:{addGlobalClass:!0},properties:{authorizeDetail:Object},data:{hotelOverrunInfo:"",wasOver:!1,flightOverrunInfo:{}},observers:{authorizeDetail:function(e){var t=e.bizType,r=e.hotelBo,n=e.flightBo;t===i.BizType.Hotel&&r.wasOver?this.setHotelOverrun(r,e.travellerName):t===i.BizType.Flight&&this.setFlightOverrun(n)}},methods:{setHotelOverrun:function(e,t){var r=e.totalOverPrice,i=e.days,n=e.roomsCount,a=e.dayMaxPrice,o=e.cityLevelName,s=Number(r)/i/Number(n),c=t+"："+o+"酒店差标"+a+"元/间夜,超出金额"+Math.ceil(s)+"元/间夜";this.setData({hotelOverrunInfo:c,wasOver:e.wasOver})},setFlightOverrun:function(e){var t=e.ticketBo.overrunInfo,r=t.preDaysOverrun,i=t.lowPriceOverrun,n=t.departureTimeLimitOverrun;this.setData({flightOverrunInfo:t,wasOver:r||i||n})}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6);Component({options:{addGlobalClass:!0},properties:{flightInfo:Object,bigOrderNo:String},data:{cardBackgroundUrl:i.OSSPrefix+"/approval/order-card-bg-flight.png",segmentRouterImgUrl:i.OSSPrefix+"/approval/flight-segment.png",routerIcon:i.OSSPrefix+"/approval/flight-single-route.svg",segment:{},ticketDetail:{},feeInfo:{},durationInfo:""},observers:{flightInfo:function(e){var t=e.segments,r=e.ticketBo,i=t[0],n=this.timeTransform(i.duration);this.setData({segment:i,ticketDetail:r,feeInfo:r.feeInfo,durationInfo:n})}},methods:{timeTransform:function(e){var t=Math.floor(e/60),r=e%60;return"约"+(0===t?"":t+"小时")+(0===r?"":r+"分钟")}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6);Component({options:{addGlobalClass:!0},properties:{hotelInfo:Object,bigOrderNo:String},data:{cardBackgroundUrl:i.OSSPrefix+"/approval/order-card-bg-hotel.png"}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),n=r(8),a=r(5),o=r(0);Component({options:{addGlobalClass:!0},properties:{orderId:String},data:{orderDetail:null,insurances:[]},observers:{orderId:function(e){this.getFlightOrderDetail(e)}},methods:{getFlightOrderDetail:function(e){var t=this;this.getFlightOrderHttpService().getFlightOrderDetail(e).pipe(a.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){var r=e.passengers[0].flightOrderTicketBos[0].insurance||[];t.setData({orderDetail:e,insurances:r})})},handleToPassengerDetailPage:function(e){var t=e.currentTarget.dataset.index,r=this.data.orderDetail.passengers[t],i={guestName:r.passengerName,docType:r.docType,docNo:r.docNo,approvalNo:r.approvalNo,approvalStatus:r.approvalStatus,belongedDeptName:r.belongedDeptName,projectName:r.projectName,birthday:r.birthday,mobile:r.mobile};wx.navigateTo({url:"/app/pages/common/guest-detail/guest-detail?guest="+JSON.stringify(i)})},getFlightOrderHttpService:function(){return o.container.resolve(i.FlightOrderQueryHttpService)},getHandleErrorService:function(){return o.container.resolve(n.HandleErrorService)}}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(14),n=r(8),a=r(5),o=r(0);Component({options:{addGlobalClass:!0},properties:{orderId:String},data:{orderDetail:null,showGuestList:!0},observers:{orderId:function(e){this.getHotelOrderDetail(e)}},methods:{handleToggleGuestList:function(){this.setData({showGuestList:!this.data.showGuestList})},handleToGuestDetailPage:function(e){var t=e.currentTarget.dataset.index,r=this.data.orderDetail.guests[t],i={guestName:r.guestName,docType:r.docType,docNo:r.docNo,approvalNo:r.approvalNo,approvalStatus:r.approvalStatus,belongedDeptName:r.belongedDeptName,projectName:r.projectName,birthday:r.birthday,mobile:r.mobile};wx.navigateTo({url:"/app/pages/common/guest-detail/guest-detail?guest="+JSON.stringify(i)})},getHotelOrderDetail:function(e){var t=this;this.getHotelOrderHttpService().getDetail(e).pipe(a.catchError(function(e){return t.getHandleErrorService().handle(e)})).subscribe(function(e){t.setData({orderDetail:e})})},getHotelOrderHttpService:function(){return o.container.resolve(i.HotelOrderQueryHttpService)},getHandleErrorService:function(){return o.container.resolve(n.HandleErrorService)}}})}]);